docno="lists-000-14545505"
received="Mon Aug  7 11:13:24 2000"
isoreceived="20000807151324"
sent="Mon, 7 Aug 2000 16:13:10 +0100 (GMT Daylight Time)"
isosent="20000807151310"
name="Dave Raggett"
email="dsr@w3.org"
subject="Re: Bug: Possible dangling pointer in istack.c"
id="Pine.WNT.4.10.10008071612410.-557727@hazel.hpl.hp.com"
charset="US-ASCII"
inreplyto="000001c00035$dd045810$51eee13f&#64;rwaki"
expires="-1"

To: Randy Waki<rwaki@flipdog.com>
cc:html-tidy@w3.org


On Mon, 7 Aug 2000, Randy Waki wrote:

> I think I've discovered a dangling pointer bug in istack.c.  
> When PopInLine() in istack.c pops the stack, it fails to check
> if lexer->insert is pointing past the new end of stack.  This
> can cause a subsequent call to InsertedToken() to dereference
> the bogus lexer->insert.
> 
> The fix is in the last if statement of PopInLine(), where the
> stack is popped: if lexer->insert points past the end of the
> stack, set it to null. (It's possible a similar check needs to
> be performed just above, too.)

Thanks for the bug fix and example code.

Regards,

-- Dave Raggett <dsr@w3.org> http://www.w3.org/People/Raggett
tel/fax: +44 122 578 3011 (or 2521) +44 778 532 0444 (mobile)
World Wide Web Consortium (on assignment from HP Labs)



