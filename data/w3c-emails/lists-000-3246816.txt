docno="lists-000-3246816"
received="Thu Sep  2 12:57:10 1999"
isoreceived="19990902165710"
sent="Thu, 2 Sep 1999 10:55:43 -0600"
isosent="19990902165543"
name="Randy Waki"
email="rwaki144@sun10.whizbanglabs.com"
subject="RE: iso-2022 HTML -&gt; XML"
id="000001bef563$fe5a97f0$ce9946a6@whizbanglabs.com"
charset="iso-8859-1"
inreplyto="199909021124.UAA00318&#64;chitose.doi.ics.keio.ac.jp"
expires="-1"

To:<html-tidy@w3.org>


Tomohisa Yazaki wrote:
>
> For the first problem, I added cleanComment() method to
> Clean.java. This method accepts a Node object and removes all comment
> nodes which include "--". To make this patch work, I fixed a bug that
> doctype.next.prev is not set in setXHTMLDocType() and fixDocType() in
> Lexer.java. Removing the whole comment is a rough way, replacing "--"
> to something else may be a better way.

How about inserting a space between consecutive hyphens?  In other words,
change all occurrences of "--" to "- -".  This is how XSLT fixes up illegal
comments [1].

Also, it's illegal for a comment to end with "-" in XML (it's buried in the
BNF [2]).  This may be illegal in HTML, too.  It depends on how you
interpret the HTML 4.0 spec [3].  Dave probably knows.  For example,

   <!-- Illegal in XML, maybe in HTML, too --->

Note the three hyphens at the end.

[1] http://www.w3.org/TR/WD-xslt#section-Creating-Comments
[2] http://www.w3.org/TR/1998/REC-xml-19980210.html#sec-comments
[3] http://www.w3.org/TR/REC-html40/intro/sgmltut.html#h-3.2.4

Randy



