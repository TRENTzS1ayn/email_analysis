docno="lists-000-4308182"
received="Mon Oct 18 11:58:31 1999"
isoreceived="19991018155831"
sent="Mon, 18 Oct 1999 16:59:53 +0100 (GMT Daylight Time)"
isosent="19991018155953"
name="Dave Raggett"
email="dsr@w3.org"
subject="Re: tidy eats &lt;OPTION&gt;text&lt;/OPTION&gt;"
id="Pine.WNT.4.10.9910181656580.900-100000@OEMCOMPUTER"
charset="US-ASCII"
inreplyto="8625680A.00594D25.00&#64;em-stpmta-01.mmm.com"
expires="-1"

To:ldcousin@mmm.com
cc:html-tidy@w3.org



p.s. the problem was introduced recently when I added the
InsertMisc call into ParseText(). The fix is to insert
the following code snippet after the call to InsertMisc:

        /* deal with comments etc. */
        if (InsertMisc(field, node))
            continue;

        /* insert text value into option element */
        if (node->type == TextNode)
        {
            /* only called for 1st child */
            if (field->content == null && !(mode & Preformatted))
                TrimTrailingSpace(lexer, field->last);

            if (node->start >= node->end)
            {
                FreeNode(node);
                continue;
            }

            InsertNode(field, node);
            continue;
        }

        if (node->tag == tag_font)
        {
            ReportWarning(lexer, field, node,
                           DISCARDING_UNEXPECTED);
            FreeNode(node);
            continue;
        }



Regards,

-- Dave Raggett <dsr@w3.org> http://www.w3.org/People/Raggett
phone: +44 122 578 2984 (or 2521) +44 385 320 444 (gsm mobile)
World Wide Web Consortium (on assignment from HP Labs)



