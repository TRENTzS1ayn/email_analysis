docno="lists-000-9259478"
received="Wed Feb  9 13:10:38 2000"
isoreceived="20000209181038"
sent="Wed, 9 Feb 2000 13:10:33 -0500"
isosent="20000209181033"
name="J. David Bryan"
email="jdbryan@acm.org"
subject="[ENH] Report configuration filename used"
id="200002091810.NAA03569@mail.bcpl.net"
charset="US-ASCII"
expires="-1"


To: HTML Tidy List<html-tidy@w3.org>

This report is for the Tidy version of 13th January 2000.

Tidy's default behavior may be altered by a combination of command-line 
options and options stored in a configuration file.  The use of command-
line options clearly shows what defaults have been altered.  The implicit 
use of a configuration file does not.  A user of Tidy may have no idea that 
an implicit configuration file (e.g., built-in to the Tidy code or set via 
the environment variable) may be affecting Tidy's defaults.

Therefore, I recommend displaying a line to stderr whenever a default 
configuration file is in use, for example:

  Reading configuration file "xxx"

This may be done by inserting the following code in localize.c:

  void ReportConfigFile(FILE *errout, const char *filename)
  {
      tidy_out(errout, "Reading configuration from \"%s\"\n\n", filename);
  }

...and the following code after line 421 of config.c:

  ReportConfigFile(stderr, fname);

Additionally, and in light of this change, it may be desirable to enhance 
ParseConfigFile (defined in config.c) to take an additional parameter so 
that only implicit and not command-line-specified configuration files are 
reported.

                                      -- Dave



