docno="lists-001-0322132"
received="Wed Oct 11 10:07:42 2000"
isoreceived="20001011140742"
sent="Wed, 11 Oct 2000 15:14:00 +0100"
isosent="20001011141400"
name="Tony Goodwin"
email="tony.goodwin@bfs.phone.com"
subject="Re: Aug 4 version of tidy generating segmentation fault"
id="39E475A8.90084A8C@bfs.phone.com"
charset="us-ascii"
inreplyto="0010110907.AA2835&#64;cas.org"
expires="-1"


To:"Larry W. Virden"<lvirden@cas.org>, html-tidy<html-tidy@w3.org>

Larry,
Problem is that attr is (nil) when ReportAttr called

Problem caused by <a href-"...." at line 269 of poke.html  where it should be =

To fix tidy (for this one only) change line 216 in localize.cpp to following
tidy_out(lexer->errout, " unknown attribute value \"%s\"", attr ? attr : "NULL");

More correctly either this should be applied to all tidy_out s in thsi module or a fix put in tidy_out function.

Tony

"Larry W. Virden" wrote:

> Platform: SPARC Solaris 2.6, Sun's compiler.
> Version of Tidy - Aug 4, with patches as mailed to this mailing list.
>
> I feed tidy the web page http://www.purl.org/net/lvirden/Pokemon/index.html
> and get back:"
>
> Tidy (vers 4th August 2000) Parsing console input (stdin)
> line 269 column 5 - Warning: <a> unknown attribute value "signal SEGV (no mapping at the fault address) in strlen at 0xff2b2be4
> 0xff2b2be4: strlen+0x0080:      ld      [%o1], %o2
> Current function is tidy_out
>    33       vfprintf(fp, msg, args);
> (dbx 5) where
>   [1] strlen(0x0, 0x0, 0x53740, 0x7efefeff, 0x81010100, 0x53528), at 0xff2b2be4
>   [2] _doprnt(0x0, 0xffbed344, 0x0, 0xff339731, 0x0, 0x5375c), at 0xff301568
>   [3] vfprintf(0x6f9b8, 0xffbed344, 0xff33d99c, 0x0, 0x53740, 0x1955c), at 0xff30345c
> =>[4] tidy_out(fp = 0x6f9b8, msg = 0x53740 " unknown attribute value "%s"", ...), line 33 in "localize.c"
>   [5] ReportAttrError(lexer = 0x7ac10, node = 0x81748, attr = (nil), code = 4U), line 216 in "localize.c"
>   [6] ParseAttrs(lexer = 0x7ac10, isempty = 0xffbed478), line 2801 in "lexer.c"
>   [7] GetToken(lexer = 0x7ac10, mode = 0), line 1808 in "lexer.c"
>   [8] ParseBlock(lexer = 0x7ac10, element = 0x81700, mode = 0), line 536 in "parser.c"
>   [9] ParseTag(lexer = 0x7ac10, node = 0x81700, mode = 0), line 432 in "parser.c"
>   [10] ParseList(lexer = 0x7ac10, list = 0x806c0, mode = 0), line 1652 in "parser.c"
>   [11] ParseTag(lexer = 0x7ac10, node = 0x806c0, mode = 0), line 432 in "parser.c"
>   [12] ParseBody(lexer = 0x7ac10, body = 0x7b8a0, mode = 0), line 2927 in "parser.c"
>   [13] ParseTag(lexer = 0x7ac10, node = 0x7b8a0, mode = 0), line 432 in "parser.c"
>   [14] ParseHTML(lexer = 0x7ac10, html = 0x7ad30, mode = 0), line 3261 in "parser.c"
>   [15] ParseDocument(lexer = 0x7ac10), line 3308 in "parser.c"
>   [16] main(argc = 1, argv = 0xffbed8f0), line 959 in "tidy.c"
> (dbx 6)
> --
> Never apply a Star Trek solution to a Babylon 5 problem.
> Larry W. Virden <mailto:lvirden@cas.org> <URL: http://www.purl.org/NET/lvirden/>
> Even if explicitly stated to the contrary, nothing in this posting should
> be construed as representing my employer's opinions.
> -><-

--
===============
Tony Goodwin
mailto:tony.goodwin@bfs.phone.com



