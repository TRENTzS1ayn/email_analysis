docno="lists-001-0619594"
received="Tue Oct 24 04:56:23 2000"
isoreceived="20001024085623"
sent="Tue, 24 Oct 2000 10:03:01 +0100"
isosent="20001024090301"
name="Tony Goodwin"
email="tony.goodwin@bfs.phone.com"
subject="meta etc outside &lt;head&gt;"
id="39F55045.FA2E6106@bfs.phone.com"
charset="us-ascii"
expires="-1"


To: html-tidy<html-tidy@w3.org>

Given example
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 FRAMESET//EN">
<HTML>
<meta http-equiv="Content-Type" content="text/html; charset=euc-jp">
<HEAD>
<TITLE>We'll be There --- 111.co.jp </TITLE>
</HEAD>
<FRAMESET ROWS="85%,15%">
        <FRAME SRC="top.html" NAME="MAIN" FRAMEBORDER="1"
SCROLLING="auto">
        <FRAME SRC="footer.html" NAME="FOOTER" FRAMEBORDER="1"
SCROLLING="auto">
</FRAMESET>
</HTML>

tidy will on reaching meta tag, create an inferred <head>. When it
reaches actual head tag, it breaks out of ParseHead function and
subsequently the frameset/frames are removed within an empty body.

I have implemented a fix in ParseHead function which separates out check
on <head> tag, such that a </head>
ends function, while a start tag is ignored and processing continues.
(probably should issue warning or something)

        if (node->tag == head->tag)
        {
                if( node->type == EndTag)
                {
                    FreeNode(node);
                    head->closed = yes;
                    break;
                }
                else
                {
                    FreeNode(node);
                    continue;
                }
        }

--
===============
Tony Goodwin
mailto:tony.goodwin@bfs.phone.com



