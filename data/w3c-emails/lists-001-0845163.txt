docno="lists-001-0845163"
received="Tue Oct 31 18:47:09 2000"
isoreceived="20001031234709"
sent="Tue, 31 Oct 2000 15:47:10 -0800"
isosent="20001031234710"
name="Gary L Peskin"
email="garyp@firstech.com"
subject="[BUG+FIX] Problem in parser.TrimInitialSpace"
id="39FF59FE.D1312A5F@firstech.com"
charset="us-ascii"
expires="-1"


To: Html-Tidy<html-tidy@w3.org>

This routine does not check to see if the space it's trimming is
actually part of the node from which it's trimming the space.  This
results in a situation where node.start is greater than node.end.  This
causes negative subscript errors in clone() and other bad things.

To fix:

Change line 326 from:

    if (text->type == TextNode && lexer->lexbuf[text->start] == ' ')

to:

    if (text->type == TextNode && lexer->lexbug[text->start] == ' '
                               && text->start < text->end)

Gary



