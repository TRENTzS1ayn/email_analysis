docno="lists-001-2388082"
received="Sat Dec  9 02:20:17 2000"
isoreceived="20001209072017"
sent="Sat, 9 Dec 2000 01:28:07 -0500 (EST)"
isosent="20001209062807"
name="Peter Henderson"
email="peterhenderson@usa.net"
subject="Re: Frameset ignored?"
id="NCBBJDPAHCEJEBEIKJGCIEGHCEAA.peterhenderson@usa.net"
charset="iso-8859-1"
inreplyto="Frameset ignored?"
expires="-1"

To:<html-tidy@w3.org>


I'm not sure if Outlook will save the In-Reply-To header, but this is in
reply to "Frameset ignored?" from Martin-?ric Racine (Fri, Nov 24 2000).
I'm using TidyGUI (1.1.3 based on Tidy 4th Aug 2000) and I find the same
problem (i.e. the loose doctype and dtd are used instead of the frameset). I
haven't tested it extensively, but I'll try to explain it.
I have a test page with a frameset and two frames.
Starting with no doctype, Tidy adds HTML 4.01 Frameset.
Starting with no doctype, and set to either doctype loose or strict, Tidy
adds HTML 4.01 [Transitional].
Starting with no doctype, and set to output XHTML, Tidy adds XHTML 1.0
Transitional.
Starting with no doctype, and set to output XHTML with doctype loose or
strict, Tidy adds XHTML 1.0 Strict or Transitional.
(For the four above, Tidy says it looks like HTML 4.01 Frameset.)
Starting with doctype HTML 4.01 Transitional, it says doctype doesn't match
content and changes it back to Frameset.
Starting with doctype HTML 4.01 Transitional, and Tidy set with doctype
strict or loose, Tidy still says it doesn't match but returns either the
strict or loose HTML doctype.
Starting with doctype XHTML 4.01 Frameset, Tidy changes it to Transitional
(doctype auto or loose) or Strict (doctype strict).
If any of the resulting strict or loose doctypes are fed back, Tidy gives a
warning.
There are too many more combinations to test, but I'm starting to see a
pattern (please correct me if I'm wrong). Tidy ALWAYS obeys the doctype
config command it receives. If doctype is on auto, though, weird things
happen. Tidy always says the source "looks like" frameset, and it correctly
adds HTML Frameset. But if set to output XHTML, Tidy always adds XHTML
Transitional.
I don't understand C very well, but I think Tony Goodwin found a possible
problem in the code: "tidy and xHTML version" from Tony Goodwin (Wed, Oct 04
2000). He said the problem is in the function SetXHTMLDoctype.
I looked at the code and, while most of it is way over my head, I think I
spotted something else. It looked like Tidy ignores or returns unrecognized
or something if the case is wrong. Overall, this is what I'm saying I'd like
to have fixed:
First, if the doctype case is wrong (like transitional instead of
Transitional or w3c instead of W3C), but the words are right, then Tidy
should fix it instead of ignoring it or warning about it.
If a document is frameset, Tidy shouldn't be allowed to change it to
something else like strict or loose, but should ALWAYS make its doctype
frameset.
XHTML should output more than Transitional if set to auto.
Tidy shouldn't output invalid markup. I mean, anything Tidy produces, if fed
back though, should have no errors. Like if I start out with no doctype, and
Tidy adds loose or something, right now it will just generate an error the
next time, but leave it as is.
Also, instead of just omit, auto, strict, loose, and <fpi>, there should
also be frameset. Also there should be a way to specify a system identifier
for <fpi>.
It would be nice to have a choice for the HTML version to use. Now, the only
choice is XHTML or not. But if the file is already XHTML then it will leave
it XHTML even if not told to. Under different circumstances, I think Tidy
can output HTML 2, 3.2, 4.0, and 4.01, and XHTML 1.0. A choice for which one
to use would be nice.
Also I tried the regular command line version of Tidy (the 4th Aug 2000
version) and it reports 30th April 2000. And somewhere a little more
detailed explanation of the options would be greatly appreciated.
I think that's all I was trying to remember to say. I hope I didn't sound
like I was trying to complain about Tidy and I hope I wasn't too confusing.
I think Tidy is a great program. With or without these bugs, I know of no
other program that comes close in features. I hope I've provided enough
information for these issues to be fixed soon. If not, let me know and I'll
be happy to test more or whatever is needed. I look forward to a new version
of Tidy, and beyond that, a very bright future.

Sincerely,
Peter Henderson
peterhenderson@usa.net



