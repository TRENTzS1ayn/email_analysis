docno="lists-001-3585343"
received="Tue Apr 10 12:32:14 2001"
isoreceived="20010410163214"
sent="Tue, 10 Apr 2001 13:31:53 -0300 (ART)"
isosent="20010410163153"
name="Adrian Mugnolo"
email="adrianm@yahoo-inc.com"
subject="Re: Parse string instead of file"
id="200104101631.NAA05673@jazz.ar.yahoo.com"
charset="US-ASCII"
inreplyto="8ep1dtssbbotkfh0fsu0mqr4ak3vb9gb95&#64;4ax.com"
expires="-1"


To: Bjoern Hoehrmann<derhoermi@gmx.net>
CC:html-tidy@w3.org

Hi,

> I'd like to use HTML Tidy in some applications, but they mostly deal
> with strings instead of files. Has anyone rewritten the current code
> to deal with (char*) strings or is anyone going to do so?

I've been doing this using a two way pipe.  Because of how tidy works,
reading all input before doing any output, the usual buffering problems
related to open2 don't cause trouble here.

An example in Perl:

        use IPC::Open2;
        open2(*R, *W, 'tidy 2>/dev/null');
        print W '<h1>Hello</h1>';
        close W;
        local $/ = undef;
        $html = <R>;
        close R;
        print $html;

The output looks like:

$ ./open2.pl
<html>
<head>
<title></title>
</head>
<body>
<h1>Hello</h1>
</body>
</html>

HTH



