docno="lists-001-7704370"
received="Mon Feb  5 18:36:09 2001"
isoreceived="20010205233609"
sent="Mon, 05 Feb 2001 15:36:16 -0800"
isosent="20010205233616"
name="Gary L Peskin"
email="garyp@firstech.com"
subject="Re: JTidy access error?"
id="3A7F38F0.542522AC@firstech.com"
charset="us-ascii"
inreplyto="v03110706b6a4734358e5&#64;[141.151.10.39]"
expires="-1"


To: Russell Gold<russgold@acm.org>
CC: HTML Tidy List<html-tidy@w3.org>

Russell Gold wrote:
> 
> A number of people have been reporting this error when using JTidy with HttpUnit and JUnit:
> 
> java.lang.IllegalAccessError: try to access field
> org.w3c.tidy.ParserImpl._parseHead from class
> org.w3c.tidy.ParserImpl$ParseHTML
>         at org.w3c.tidy.ParserImpl$ParseHTML.parse(ParserImpl.java)
>         at org.w3c.tidy.ParserImpl.parseDocument(ParserImpl.java)
>         at org.w3c.tidy.Tidy.parse(Tidy.java)
>         at org.w3c.tidy.Tidy.parseDOM(Tidy.java)
>         at com.meterware.httpunit.ReceivedPage.<init>(ReceivedPage.java:43)
>         at
> com.meterware.httpunit.WebResponse.getReceivedPage(WebResponse.java:351)
>         at
> com.meterware.httpunit.WebResponse.getFrames(WebResponse.java:334)
>         at
> com.meterware.httpunit.WebResponse.getFrameNames(WebResponse.java:97)
>         at
> com.meterware.httpunit.WebConversation.getResponse(WebConversation.java:98)
>         at ExampleTest.testWelcomePage(ExampleTest.java:39)
> 
> Now ParserImpl does not actually access _parseHead directly, but it does call getParseHead() to get it (line 140). This looks legitimate to me, but I wonder if there is some kind of optimization happening that might not work well with certain VMs or classloaders. Any ideas?

Russell --

Are these people using Microsoft JVMs?  Older versions did not follow
the appropriate rules for accessing fields in inner classes.  I'm not
sure if this is fixed in current versions or not.

If the errors were occurring with MS JVMs, you might try using Sun or
IBM JVMs.

Gary



