docno="lists-002-10369805"
received="Mon May 19 20:56:52 2003"
isoreceived="20030520005652"
sent="Tue, 20 May 2003 02:56:34 +0200"
isosent="20030520005634"
name="Bjoern Hoehrmann"
email="derhoermi@gmx.net"
subject="Re: Feature or support request? prevent tidy from stripping the s ingl  e whitespace that follows an endtag"
id="3ecb5992.4302176@smtp.bjoern.hoehrmann.de"
charset="us-ascii"
inreplyto="61F3DB5930AADF49A71965ECD6A62DD8051981&#64;benexchng.benetech.org"
expires="-1"

To: Ivo Pletikosic<ivo@benetech.org>
Cc:html-tidy@w3.org



* Ivo Pletikosic wrote:
>is output as:
>--
><?xml version="1.0" encoding="iso-8859-1" standalone="yes"?>
><dtbook3>
>  <book>
>    <bodymatter>hello, 
>    <em>how</em>are you 
>    <strong>doing</strong>today.</bodymatter>
>  </book>
></dtbook3>
>--

Tidy must not remove the whitespace between "how" and "are you" and
between "doing" and "today." TidyClassic got it right... In the unbroken
version (or Tidy 04 August 2000) you would get

  <dtbook>
    <book>
      <bodymatter>hello,
      <em>how</em>
  
      are you
      <strong>doing</strong>
  
      today.</bodymatter>
    </book>
  </dtbook>

Not nice but doesn't do harm to most documents. Is that what you are
asking for? If not, how should the output look like? IMHO, the most
reasonable behaivour for Tidy would be to consider elements having text
node siblings or ancestors with text nodes siblings to be inline
elements and all other elements blocklevel elements. The output would
then look similar to

  <?xml version="1.0" encoding="iso-8859-1" standalone="yes"?>
  <dtbook>
    <book>
      <bodymatter>
        hello, <em>how</em> are you <strong>doing</strong> today.
      </bodymatter>
    </book>
  </dtbook>

or

  ...
      <bodymatter>hello, <em>how</em> are you <strong>doing</strong>
      today.</bodymatter>
  ...

depending on whether Tidy wraps after/before <bodymatter>. For more
sophisticated solutions Tidy would need to know what elements constitute
blocks and what elements are to be considered inline elements.

>Is there a way to configure tidy to treat the XML tags as if it were HTML?
>or is this spacing behavior limited to files identified and markedup as
>HTML?

Depends on what spacing behaivour you ask for. It would also be possible
to introduce a config option that identifies certain elements as those
from the XHTML namespace. However, yes, the XML pretty printer is pretty
simplistic and as noted above obviously broken. It would be possible to
improve it, but I don't think I will do so. Patches welcome :-)

In general, if you already have well-formed XML there is a number of
better tools for you out there.



