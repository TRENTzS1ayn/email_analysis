docno="lists-002-11622801"
received="Sun Feb  2 18:08:40 2003"
isoreceived="20030202230840"
sent="Mon, 3 Feb 2003 00:07:35 +0100 (CET)"
isosent="20030202230735"
name="Piotr Banski"
email="bansp@venus.ci.uw.edu.pl"
subject="Re: persistent xml-decl vs. char-encoding"
id="Pine.LNX.4.21.0302022349320.31608-100000@venus.ci.uw.edu.pl"
charset="US-ASCII"
inreplyto="4.3.2.7.2.20030202174217.02d5f190&#64;pop.rcn.com"
expires="-1"

To: Charles Reitzel<creitzel@rcn.com>
cc:html-tidy@w3.org



Thanks, Charles --

On Sun, 2 Feb 2003, Charles Reitzel wrote:
> First, I would recommend that you replace the entire XML declaration with 
> sed.  Yes, we might fix the bug (not respecting --xml-decl no w/ RAW 
> encoding), but probably not in time to meet your needs.  The format is 
> highly regular and shouldn't be a problem w/ sed or awk in a shell script.
> 
> You are fighting an uphill battle using RAW in the first place.

Given this, I will perhaps begin by transcoding all the files into
Unicode, as I guess this should eliminate both problems (the need for the
"encoding" attribute in the XML declaration and the use of raw encoding).
And if for some reason that won't work satisfactorily, I'll go for sed, as
you say.

> The next major item on Tidy's agenda is to support pluggable character
> encodings a la Expat or LibXml.  That said, have a look at the recent
> changes to support ISO-8859-15.  It might be easier all around do a
> patch of your own to support 8859-2 along the same lines.  Just
> thinking out loud here.

I'm afraid I'm not up to this yet :-)

> Second, about the segfault, I found and fixed one in the new diagnostics 
> code.  If you are using a Compile Farm executable, it should be there 
> tomorrow.  If you are using Windows, I thought I it up after I fixed that 
> problem, but let me know, and I'll make sure to put up a fresh build.  If 
> the problem remains, please send a sample config and input file.  Thanks.

I've already uploaded a test case with my bug report -- will see tomorrow
how the new version fares against it (I'm using Linux).

Thanks again :-)

  Piotr



