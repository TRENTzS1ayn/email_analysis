docno="lists-006-12161726"
received="Mon Aug 20 05:09:13 2001"
isoreceived="20010820090913"
sent="Mon, 20 Aug 2001 10:08:00 +0100"
isosent="20010820090800"
name="Tim Ellison"
email="Tim_Ellison@uk.ibm.com"
subject="Re: Versions being deleted during a MERGE..."
id="OFDFF2ACB9.DCE8E1F5-ON80256AAE.00319E17@portsmouth.uk.ibm.com"
charset="us-ascii"
inreplyto="Versions being deleted during a MERGE..."
expires="-1"

To:ietf-dav-versioning@w3.org



Peter Raymond <Peter.Raymond@merant.com> wrote:

> Hi,
>
> I just noticed a potential problem with versions being
> used for a merge operation being deleted during the merge.
>
> Section 11 says a checked-out resource has a DAV:merge-set
> identifying versions to be merged.  DELETE (section 11.5)
> says it will remove entries from the merge-set.  Shouldn't
> the server disallow the DELETE, someone somewhere is in
> the middle of a merge using this version, also there would
> be a race condition if someone deletes the version while
> the client is processing the DAV:merge-set of a checked-out
> resource.

I think the spec is correct that the server should allow the DELETE.  We
can debate the 'work-flow' aspect of merging and may come to different
conclusions, however, from a protocol point of view, I think a client
should be allowed to delete a version during someone else's (and especially
their own) merge.  DELETE will not be the only potential point of conflict
during a merge since the merge request and the resolution of conflicts is
not atomic.  There can be no "safe" merge without locking down all the
affected resources and their version histories.

Regards,
Tim



