docno="lists-006-6789393"
received="Tue Feb  6 06:23:15 2001"
isoreceived="20010206112315"
sent="Tue, 6 Feb 2001 11:21:57 +0000"
isosent="20010206112157"
name="Tim_Ellison@uk.ibm.com"
email="Tim_Ellison@uk.ibm.com"
subject="Re: Autoversion confusion"
id="802569EB.003E72B8.00@d06mta07.portsmouth.uk.ibm.com"
charset="us-ascii"
inreplyto="Autoversion confusion"
expires="-1"

To:ietf-dav-versioning@w3.org




> I have a question about DAV:auto-version "when-locked"
> value.  In my model of the way things work:
>
> On a non-versioning server with a non-versioning client:
>  - client issues LOCK on A
>  - Lock-owner client issues PUT to A, creating the
> content A' (A-prime)
>  - Any client issues GET to A, retrieving the content A'

Agreed.

> On a versioning server with a non-versioning client,
> where resource A is a VCR, which has DAV:auto-version
> equals "when-locked".
>  - client issues LOCK on A, creating a checked-out version

The check-out doesn't occur until a modification request (e.g.,
PUT/PROPPATCH) is received.  So a LOCK immediately folowed by an UNLOCK
would not create a new version.

>  - Lock-owner client issues PUT to A, modifying the
> checked-out version to have the content A'

Well, modifying the checked out *version-controlled resource* (not
'version', a version does not have a DAV:auto-version property).

>  - Any client issues a GET to A, which retreives the
> body of the VCR, which is the same as the body of the
> last checked-in version, which is NOT the content A'.

No, the body of the version-controlled resource will be the target of the
GET, so it will be the value of A'.

> So, on a versioning server with DAV:auto-version set
> to "when-locked", clients cannot GET the latest content
> PUT by the lock-owner (without specifying the version URL),
> until UNLOCK occurs and the version is checked in.  This
> is inconsistent with the way a non-versioning server
> behaves.
>
> I like the functionality this feature is supposed to
> provide, but is there a way of resolving this discrepancy?
> The problem may lie in the fact that the VCR is defined
> to have the same body and contents of the last checked-in
> version, rather than the currently checked-out version.

I believe there is no inconsistency.
There is a difference between a checked-out version-controlled resource and
a checked out version (which is called a working resource).

Tim



