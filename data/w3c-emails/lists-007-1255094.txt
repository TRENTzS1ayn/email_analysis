docno="lists-007-1255094"
received="Wed Jun  5 09:14:42 2002"
isoreceived="20020605131442"
sent="Wed, 5 Jun 2002 15:14:07 +0200 "
isosent="20020605131407"
name="Zivkov, Sasa"
email="sasa.zivkov@sap.com"
subject="RE: MOVE on Version History Members of a Working Collection"
id="816D93CCC927D31188570008C75D1DE110FD86CD@dbwdfx1a.wdf.sap-ag.de"
charset="iso-8859-1"
inreplyto="MOVE on Version History Members of a Working Collection"
expires="-1"


To:ietf-dav-versioning@w3.org


>    From: Zivkov, Sasa [mailto:sasa.zivkov@sap.com]
> 
>    Let's suppose we have a version controlled resource (a.txt) under a
>    version controlled collection (mycoll) under a workspace (wsp01):
> 
>    /repo/ws/wsp01/mycoll/a.txt
> 
>    and we have another version controlled collection:
> 
>    /repo/ws/wsp01/mycoll2
> 
>    If, now, we check out both mycoll and mycoll2 with apply-to-version
>    (which results in creating two working collections wc_mycoll and
>    wc_mycoll2, where wc_mycoll contains a binding to the version
>    history of a.txt) and then do a move:
> 
>    MOVE wc_mycoll/a.txt
>    Destination: wc_mycoll2
> 
>    then, I suppose, the binding a.txt is removed from wc_mycoll and
>    a binding to the same version history is created in wc_mycoll2.
>    Is that correct ?
> 
> Yes.
> 
>    If after that we checkin wc_mycoll2 then mycoll2 will contain 
>    a VCR a.xml whose DAV:version-history will be the same like
>    DAV:version-history of mycoll/a.txt.  Is that correct ?
> 
> Yes.
> 
>    I suppose it is not because in this case we would have two VCR's
>    in the same space pointing to the same version-history (mycoll/a.txt
>    and mycoll2/a.txt).
> 
> You will actually have one VCR, with two bindings to it (i.e. one from
> mycoll/a.txt and another from mycoll2/a.txt).  This is required by
> workspace semantics, which says that there can only be one VCR in a
> workspace for a given version history, but you can have multiple
> bindings in that workspace to that VCR.

I always thought that there can be only one URL in a workspace for
one VCR :-(

So, there is not *the* URL of a VCR in a workspace ?

In the example above if both URL's mycoll/a.txt and mycoll2/a.txt are
the same VCR then they must share the same set of live/dead properties
and content.
Right ?

And if I DELETE mycoll/a.txt is the VCR deleted also ?
Or does the server do the reference counting and deletes the VCR when
the last binding to it is deleted ?

Also if we take a look on a part of rfc3253:

    14.4 Additional DELETE Semantics

      Additional Preconditions:

          (DAV:cannot-modify-checked-in-parent): If the request-URL
          identifies a version-controlled resource, the DELETE MUST fail
          when the collection containing the version-controlled resource is
          a checked-in version-controlled collection, unless DAV:auto-
          version semantics will automatically check out the version-
          controlled collection.

So, here you mention *the* collection containing the VCR.
But in the example above which collection is *the* collection containing
the VCR mycoll or mycoll2 ?


> 
>    In general my question is: Is it possible to move a VCR from one
>    VCC (version controlled collection) to another using MOVE on
>    working collections ?
> 
> Yes.  (That is one of the benefits you get from the
> "one VCR per version history" semantics).
> 
> Cheers,
> Geoff



