docno="lists-007-2236673"
received="Thu Jan 17 11:24:01 2002"
isoreceived="20020117162401"
sent="Thu, 17 Jan 2002 17:23:19 +0100"
isosent="20020117162319"
name="Kirmse, Daniel"
email="daniel.kirmse@sap.com"
subject="FW: Problems with Delete of a version-controlled collection"
id="59357A260E15D311B5A60008C75D3530068B476F@dbwdfx13.wdf.sap-ag.de"
charset="iso-8859-1"
inreplyto="Problems with Delete of a version-controlled collection"
expires="-1"


To:"Ietf-Dav-Versioning (E-mail)"<ietf-dav-versioning@w3.org>



-----Original Message-----
From: Kirmse, Daniel 
Sent: Donnerstag, 17. Januar 2002 17:19
To: 'Clemm, Geoff'
Subject: RE: Problems with Delete of a version-controlled collection




>-----Original Message-----
>From: Clemm, Geoff [mailto:gclemm@rational.com]
>Sent: Mittwoch, 16. Januar 2002 17:50
>To: Ietf-Dav-Versioning (E-mail)
>Subject: RE: Problems with Delete of a version-controlled collection
>
>
>
>   From: Kirmse, Daniel [mailto:daniel.kirmse@sap.com]
>
>   suppose this:
>
>   /foo
>   |
>   +- /bar
>|
>+- foobar.c
>
>   all the resources are under version-control. Now suppose this
>   sequence of requests:
>
>   CHECKOUT /foo/bar
>     DAV:apply-to-version
>
>   (working-collection: /wc/wc1  auto-update: /foo/bar)
>
>   CHECKOUT /foo
>     DAV:apply-to-version
>
>   (working-collection: /wc/wc2, auto-update: /foo)
>
>   delete folder /foo/bar:
>   DELETE /wc/wc2/bar   
>   or is it done via the real VCR? I hope not! The DELETE 
>should be hidden
>   until checkin!
>
>You are correct.  The DELETE should be done to the working collection,
>as you show here.
>
>   CHECKIN /wc/wc2
>   (applied to /foo -> the folder /bar and all its content is gone)
>
>   CHECKIN /wc/wc1
>   (must fail because the VCR the auto-update should go to is gone)
>
>That depends on the server.  A server could just delete the
>auto-update property when the VCR referenced by that property
>is deleted, and allow the CHECKIN of /wc/wc1 to succeed.
>You haven't really "lost" anything, because this version is
>now available in the version history that is associated with
>/wc/wc1.

---->
So the VCR of /foo/bar is still gone (even so the VCR of /foo/bar/foobar.c)
but the version-hsitory of it would contain a new version created by the
last checkin.
Hmmm. What if the deleted VCR was the last one pointing to this
version-history? Is there a way of creating a new VCR pointing to a existing
VH? Rolling back the delete would be an option too, I think.
--->

>
>   Questions:
>   1. Is this right?
>   2. If yes: Shouldn't the deletion be prevented or fail because a
>subfolder
>   is checked out and therefore some kind of "locked"?
>
>A server certainly could fail the CHECKIN of /wc/wc2 for this reason,
>but that would have to be a server-defined precondition (i.e. this
>CHECKIN is not forbidden by any of the standard preconditions).
>
>Cheers,
>Geoff
>



