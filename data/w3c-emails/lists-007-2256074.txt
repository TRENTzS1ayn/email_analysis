docno="lists-007-2256074"
received="Thu Jan 17 22:49:39 2002"
isoreceived="20020118034939"
sent="Thu, 17 Jan 2002 22:48:36 -0500"
isosent="20020118034836"
name="Clemm, Geoff"
email="gclemm@rational.com"
subject="RE: Problems with Delete of a version-controlled collection"
id="3906C56A7BD1F54593344C05BD1374B10585DD26@SUS-MA1IT01"
charset="iso-8859-1"
inreplyto="Problems with Delete of a version-controlled collection"
expires="-1"


To:"Ietf-Dav-Versioning (E-mail)"<ietf-dav-versioning@w3.org>

   From: Kirmse, Daniel [mailto:daniel.kirmse@sap.com]

   >From: Clemm, Geoff [mailto:gclemm@rational.com]
   >   From: Kirmse, Daniel [mailto:daniel.kirmse@sap.com]
   >
   >   suppose this:
   >
   >   /foo
   >   |
   >   +- /bar
   >|
   >+- foobar.c
   >
   >   all the resources are under version-control. Now suppose this
   >   sequence of requests:
   >
   >   CHECKOUT /foo/bar
   >     DAV:apply-to-version
   >
   >   (working-collection: /wc/wc1  auto-update: /foo/bar)
   >
   >   CHECKOUT /foo
   >     DAV:apply-to-version
   >
   >   (working-collection: /wc/wc2, auto-update: /foo)
   >
   >   delete folder /foo/bar:
   >   DELETE /wc/wc2/bar   
   >
   >   CHECKIN /wc/wc2
   >   (applied to /foo -> the folder /bar and all its content is gone)
   >
   >   CHECKIN /wc/wc1

   >You haven't
   >really "lost" anything, because this version is now available in
   >the version history that is associated with /wc/wc1.

   So the VCR of /foo/bar is still gone (even so the VCR of
   /foo/bar/foobar.c) but the version-history of it would contain a
   new version created by the last checkin.

Yes.

   Hmmm. What if the deleted VCR was the last one pointing to this
   version-history?

The earlier version of the folder /foo (the one visible before the
CHECKIN of /wc/wc2) will still contain a reference to that version
history (in its DAV:version-controlled-binding-set property).

   Is there a way of creating a new VCR pointing to a existing
   VH? Rolling back the delete would be an option too, I think.

Yes, you would just UPDATE /foo to the earlier version (before the
CHECKIN of /wc/wc2), which would recreate a VCR named /foo/bar, and
you can then UPDATE /foo/bar to select the version that was created
by the CHECKIN of /wc/wc1.

Cheers,
Geoff



