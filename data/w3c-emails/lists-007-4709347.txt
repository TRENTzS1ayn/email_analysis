docno="lists-007-4709347"
received="Thu Aug  1 04:21:20 2002"
isoreceived="20020801082120"
sent="Thu, 1 Aug 2002 10:21:17 +0200 "
isosent="20020801082117"
name="Nevermann, Dr., Peter"
email="Peter.Nevermann@softwareag.com"
subject="RE: DeltaV methods on locked non-VCR: which response code?"
id="DFF2AC9E3583D511A21F0008C7E62106024E28E5@daemsg02.software-ag.de"
charset="iso-8859-1"
inreplyto="DeltaV methods on locked non-VCR: which response code?"
expires="-1"


To:"'ietf-dav-versioning@w3.org'"<ietf-dav-versioning@w3.org>


Thanks, Geoff!

Some of us were assuming that checking for the lock ("as being WebDAV") had
priority over checking of DeltaV precondition violations ... in which case
423 would be the response in most of the cases below. But, as we can deduce
from your response, that is not the case.

Another issue, which we find difficult sometimes, is to decide whether to
use 403 or 409 as status code on DeltaV precondition violations.


Example 1: assume existing collection at /ws/bar then 

MKWORKSPACE /ws/bar

returns 403 with DAV:resource-must-be-null ... as you stated below.
According to section 1.6 of RFC 3253 this means that the request should not
be repeated because it will always fail. But it could be 409 because: isn't
the user able to resolve the conflict by deleting /ws/bar and then resubmit
the request?


Example 2: assume checked-in VCR at /foo.xml and 

CHECKOUT /foo.xml (without DAV:fork-ok)

(a) violating precondition
DAV:checkout-of-version-with-descendant-is-discouraged; then I would return
status code 409 since the user can resolve the conflict by passing the
DAV:fork-ok element.

(b) violating precondition
DAV:checkout-of-version-with-descendant-is-forbidden; then I would return
status code 403 ... hm, or should it be 409 since the conflict could be
resolved by proppatching the DAV:checkout-fork property???

Regards,
Peter

> -----Original Message-----
> From: Clemm, Geoff [mailto:gclemm@rational.com]
> Sent: Wednesday, July 31, 2002 23:01
> To: 'ietf-dav-versioning@w3.org'
> Subject: RE: DeltaV methods on locked non-VCR: which response code?
> 
> 
> 
>    From: Nevermann, Dr., Peter [mailto:Peter.Nevermann@softwareag.com]
> 
>    assume
>    1) a non-collection *non-VCR* resource at /foo.xml which 
> is *locked*
>    2) an ordinary collection resource at /bar which is *locked*.
> 
>    We are wondering what the response status code should be in these
> particular
>    cases (403, 409, 423, ???):
> 
>    CHECKOUT /foo.xml
> 
> 405
> 
>    CHECKIN /foo.xml
> 
> 405
> 
>    LABEL /foo.xml
> 
> 405
> 
>    REPORT /foo.xml
> 
> Depends on the report request.  Since a report is a read-only
> operation, it doesn't matter that it is write-locked.
> 
>    UPDATE /foo.xml
> 
> 405
> 
>    VERSION-CONTROL /foo.xml
> 
> 423
> 
>    MKWORKSPACE /bar
> 
> 403, with DAV:resource-must-be-null in the DAV:error node.
> 
> Cheers,
> Geoff
> 



