docno="lists-007-4929541"
received="Thu Aug 15 09:20:05 2002"
isoreceived="20020815132005"
sent="Thu, 15 Aug 2002 09:19:31 -0400"
isosent="20020815131931"
name="Clemm, Geoff"
email="gclemm@rational.com"
subject="RE: Marshalling Depth &gt; 0 responses for REPORTs, WAS: Replacing t he Label header with a DAV:labeled-version report"
id="3906C56A7BD1F54593344C05BD1374B107D7C040@SUS-MA1IT01"
charset="iso-8859-1"
inreplyto="Marshalling Depth &gt; 0 responses for REPORTs, WAS: Replacing t he Label header with a DAV:labeled-version report"
expires="-1"


To:ietf-dav-versioning@w3.org


A Depth:infinity DAV:locate-by-history request makes no sense,
so having it return something ugly (i.e. a 403 for every non-collection
member) is not a problem.

On the other hand, a Depth:infinity DAV:labeled-version request does
make sense, and it is reasonable for it to return a 403 for every
non-version-controlled member of the collection.

In general, when a request asks you to apply a report to every member
of a collection, it seems reasonable to indicate the result (possibly,
an error) for each member of that collection.

Cheers,
Geoff

-----Original Message-----
From: Julian Reschke [mailto:julian.reschke@greenbytes.de]
Sent: Thursday, August 15, 2002 8:46 AM
To: ietf-dav-versioning@w3.org
Subject: RE: Marshalling Depth > 0 responses for REPORTs, WAS: Replacing
t he Label header with a DAV:labeled-version report



Sorry,

problem doesn't go away :-)

>    Related question of the day: what's the response format for the
>    version-tree report with depth: 1 applied to a collection that
>    itself is not versioned but contains one version controlled member?
>
>    For depth 0 I'd expect:
>    409 CONFLICT
>    with
>    <error xmlns="DAV:"><supported-report/></error>
>
> Sounds right.
>
>
>    So for depth 1 one would get:
>    207 MULTISTATUS
>    <multistatus xmlns="DAV:">
>      <response>
>        <href>/collection/</href>
>        <status>HTTP/1.1 409 Conflict</status>
>        <responsedescription><error><supported-report/>
>          </error></responsedescription> </response>
>      <response>
>        <href>/collection/a</href>
>        <propstat>
>  <prop>
>  ...now what?...
>  </prop>
>  <status>HTTP/1.1 200 OK</status>
>        </propstat>
>      </response>
>    </multistatus>
>
> Yes.


So,

assume we do a depth: infinity REPORT locate-by-history. This report is
defined for collections only, so it must return FORBIDDEN for all
non-collection resources it is applied to. This suggests that in the case of
depth: infinity, I will get a

<response>
    <href>...</href>
    <status>HTTP/1.1 403 Forbidden</status>

<responsedescription><error><supported-report/></error></responsedescription
> </response>
<response>

element for every single non-collection resource in the namespace below the
request URI. Is this really intended???

Julian



