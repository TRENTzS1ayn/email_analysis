docno="lists-009-12291629"
received="Fri Nov 17 14:30:54 1995"
isoreceived="19951117193054"
sent="Fri, 17 Nov 95 14:22:04 PST"
isosent="19951117222204"
name="Jeffrey Mogul"
email="mogul@pa.dec.com"
subject="Re: keepalives and proxies: a request and a proposal"
id="9511172222.AA02972@acetes.pa.dec.com"
inreplyto="Pine.BSF.3.91.951117212247.5327A100000&#64;alex.iet.unipi.it"
expires="1"


To: Lorenzo Vicisano<vicisano@iet.unipi.it>
Cc: http-wg mailing list<http-wg%cuckoo.hpl.hp.com@hplb.hpl.hp.com>,mogul@pa.dec.com

    The `Connection: Keep-Alive my-name' solution allows each compliant
    proxy to realize whether is talking to a compliant proxy/client or not.

One quibble: we should not use a host name here; we should use
the IP address of the host (and on a multi-homed host or proxy,
the IP address that is actually assigned to the connection).  This
avoid the overhead (and possibly the failure) of an extra DNS lookup
at each proxy and server.

Aside from that, I agree; this is 100% foolproof because every link in
the chain must prove that it understands this header.  I don't
understand Roy's comment that it does not adequately account for
hierarchical proxies or gateways.

Roy sez:
    The only way to differentiate communication capabilities is through
    the protocol name + version number, since that is the only feature
    that cannot be passed on by a proxy.
The implication is that the 1.1 protocol spec will say something
like "a client or proxy must not send or forward a Keepalive:
header to a proxy [or server?] with a version number below 1.1".
Is that what you are planning, Roy?

One problem that the "Keepalive: myaddress" approach seems to
solve better than the version-number based approach is that it
allows a 1.1 proxy to not implement persistent connections.
That is, under Roy's approach, persistent connection support
would have to be 100% mandatory for all 1.1 (and later) proxies.
Under the alternate approach, any proxy not wanting to support
persistent connections (either for implementation reasons or
for policy reasons) could simply drop the "Keepalive: myaddress"
header.

-Jeff



