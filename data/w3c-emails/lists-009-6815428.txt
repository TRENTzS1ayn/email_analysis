docno="lists-009-6815428"
received="Sat Aug 12 03:24:46 1995"
isoreceived="19950812072446"
sent="Sat, 12 Aug 1995 12:06:09 +0200 (MET DST)"
isosent="19950812100609"
name="Balint Nagy Endre"
email="bne@bne.ind.eunet.hu"
subject="Re: &quot;Hits&quot; pragma"
id="199508121006.MAA00688@bne.ind.eunet.hu"
charset="USASCII"
inreplyto="9508120305.AA01029&#64;horizon.cs.princeton.edu"
expires="1"


To:burchard@horizon.cs.princeton.edu
Cc: http wg discussion<http-wg%cuckoo.hpl.hp.com@hplb.hpl.hp.com>

Paul Burchard writes:
> Brian Behlendorf <brian@organic.com> writes:
> > One thing that would encourage the use of Expires:
> > headers of course would be a way for caches to report hits
> > they served directly without a long-distance conditional GET.
> 
> How about using an additional pragma directive
> 
> Pragma: hits = 35
> 
> to denote the accumulated number of unforwarded requests received  
> by a proxy, in addition to the request being forwarded.  Multiple  
> "hits" directives make sense, and can be accumulated by intermediate  
> proxies.
I'd preferred a
Pragma: hits hits# proxy-name
variant instead.
> Using this pragma, hit counts will be accurate over time intervals  
> on the order of the expiration interval of the resource (which is  
> tunable by the server).
> 
> This proposal requires only minimal changes to caches, servers, and  
> log analysis tools -- and offers a graceful, incremental upgrade  
> path  in the meantime (since Pragma headers are already passed  
> through by any conforming proxy).  Performance of all components is  
> practically unchanged since no additional network connections are  
> used.  And perhaps most important for successful adoption, this  
> scheme avoids imposing any burdensome reporting duties (such as  
> "accounting batch runs") on proxy maintainers.
Agree.
Before I read this, prepared a discussion of hit reports, now I escaped
finishing it and you escaped reading it.
Without the Hits pragma, some web-admins or document owners would use
the no-cache pragma to have those hit counts, which has a very expensive
side effect for both the client and server sides. (bigger system load on server,
and bigger costly wan traffic for both.)
But will the web-admins and document owners be satisfied with raw counts?
And on the opposite end, will admins running caching proxies on firewalls
honor specs for more detailed statistics?

We shall found a good compromise between the stats hungry server-side
and terse client-side requirements, otherwise too many misconfigured systems 
would be running in the near future. (I mean possible mis-use of no-chache
pragma, and consequently caches not honoring it.)

Now that we have this idea intoducing the hits pragma we have a lot to do 
elaborating the concise definition and exact usage of it, and we shall have to
finish it till 18 Aug.

I presume we shall incorporate the hits pragma in the ongoing version of the
HTTP draft as a must requirement.

Any ideas, suggestions, comments?

Andrew. (Endre Balint Nagy) <bne@bne.ind.eunet.hu>



