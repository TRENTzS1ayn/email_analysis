docno="lists-010-12137631"
received="Mon Nov 25 15:35:27 1996"
isoreceived="19961125203527"
sent="Mon, 25 Nov 96 15:22:03 PST"
isosent="19961125232203"
name="Jeffrey Mogul"
email="mogul@pa.dec.com"
subject="Re: Hit Metering  report of 0/0"
id="9611252322.AA02062@acetes.pa.dec.com"
inreplyto="199611221408.JAA09995&#64;pat.appliedtheory.com"
expires="1"


To:mcmanus@appliedtheory.com
Cc: http working group<http-wg%cuckoo.hpl.hp.com@hplb.hpl.hp.com>

    In the absence of a specific server request for any minimum return
    count, the proxy cannot know if the report is worth sending. Some
    servers may not believe that a return connection is worth the
    overhead of receiving a 1/0 report, just as some servers may insist
    on seeing a 0/0 report to know that the proxy's 'best-effort' is
    succeeding.

    perhaps the initial negotiation could contain a count-range meter
    header from the proxy indicating the bounds (both hi and low) it is
    willing to report for, and the server response could return min and
    max values in that range that represents the reporting interval.
    (i.e. don't report anything less than 2 hits, but never go more
    than 15 without sending a report)

It would not complicate things too much to add a Meter response-directive
along the lines of
Meter: want-report= MIN/MAX
as long as the default was to NOT send this, and that the default
MIN is equal to 1 and the default MAX is equal to infinity.

I'm really reluctant to add something from the proxy to the server
to indicate the proxy's "willingness to report" limits, since it's
hard to imagine that a proxy cache with non-infinite disk space
could actually guarantee a minimum.  I.e., think of a proxy cache
with room for at most two items.  If it has promised not to report
a hit-count for each of these until the count reaches 10, and each
only has 2 hits, and it decides it wants to evict one so that it
can store a more useful cache entry instead, what does it do?

And I don't think it makes sense for the proxy to offer a maximum
value, for similar reasons of enforceability.

-Jeff



