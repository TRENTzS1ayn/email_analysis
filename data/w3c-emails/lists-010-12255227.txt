docno="lists-010-12255227"
received="Tue Nov 26 11:44:48 1996"
isoreceived="19961126164448"
sent="Tue, 26 Nov 96 11:26:27 PST"
isosent="19961126192627"
name="Jeffrey Mogul"
email="mogul@pa.dec.com"
subject="Re: Hitmetering: to Proposed Standard?"
id="9611261926.AA06441@acetes.pa.dec.com"
inreplyto="199611220029.QAA16062&#64;orval.arc.nasa.gov"
expires="1"


To:hardie@nasa.gov
Cc:http-wg%cuckoo.hpl.hp.com@hplb.hpl.hp.com

    >The "stickiness" of the Meter request-directive is only a
    >performance optimization, and if there are serious technical
    >arguments against it, we could remove that without affecting any
    >other aspect of the proposal.

    >But I do not think it is accurate to think of this in the same way
    >that we have previously discussed "sticky" headers, since those
    >were for actual request-headers.  The Meter request header is a
    >sort of unusual thing that applies to transport-level connections,
    >not to individual requests, and so it might probably be better to
    >use a term other than "sticky" here.  (The Meter response
    >directives are per-response, but hop-by-hop, and so if there is a
    >general "sticky" mechanism agreed upon for the rest of HTTP, then
    >it could take advantage of this.)

   I'm not sure how good an optimization it is.  You mentioned above
   that an server would probably cache-bust now only on those
   resources for which it needs accurate counts (like an ad image).
   By making this a per-connection header, you seem to me to force a
   proxy to report and a server to receive information it may well
   throw away (like the counts on every little fancy bar or button
   image).

I don't think my original response was clear enough. The Meter
response directives are NOT STICKY; to quote from the I-D:

   The Meter response-directives are not sticky; they apply only to the
   specific response that they are attached to.

This means that we are not "forcing" a server ask for information
that it will throw away; it must explicitly request Metering for
each response individually.  We certainly do not expect (or want)
origin servers to hit-meter those bars and buttons!

There is a somewhat confusing situation, which may not have been
helped by one of the examples in the I-D, which is that one
can omit the "Meter" header on the *first* (and only the first)
response on a connection, because the "Connection: meter" header
that must be sent if one is doing Metering has (by the HTTP/1.1
spec) the implication that the Meter header is present in that
response.  Maybe this example needs some more explanation in the text.

-Jeff



