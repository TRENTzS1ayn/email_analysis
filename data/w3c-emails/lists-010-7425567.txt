docno="lists-010-7425567"
received="Wed Aug 14 17:19:11 1996"
isoreceived="19960814211911"
sent="Wed, 14 Aug 96 17:08:42 MDT"
isosent="19960814230842"
name="Jeffrey Mogul"
email="mogul@pa.dec.com"
subject="Re: New document on &quot;Simple hitmetering for HTTP&quot;"
id="9608150008.AA17384@acetes.pa.dec.com"
inreplyto="199608101444.QAA19593&#64;wsooti04.win.tue.nl"
expires="1"


To: Koen Holtman<koen@win.tue.nl>
Cc:http-wg%cuckoo.hpl.hp.com@hplb.hpl.hp.com

    It would be better to [...]
    instead add stuff to make being cooperative less costly (e.g. a method
    to piggy-back hit count reports for other URLs on a request you have to
    send anyway).

I don't think we need to add very much at all for this.  Remember
that the count report can be sent over the same persistent connection
as other operations being sent to the server.  A typical count report
would be
HEAD /foo.html HTTP/1.1
Host: www.w3.org
Cache-control: use-count=37
if no Vary was sent, or something like
HEAD /foo.html HTTP/1.1
Host: www.w3.org
User-agent: SuperBrowser 1.1
Cache-control: use-count=37
otherwise.  These are short enough that you can probably send 4 or 5
of them without increasing the number of TCP packets (although the
length of certain packets would increase) in the typical case.

Clearly, some sort of header-abbreviation or tokenization would
reduce the overhead even more, although you would have to at least
transmit the URL+host for each report.  It looks like the average length
of possibly-cachable URLs in our proxy logs is about 48 bytes
(including host names).

-Jeff



