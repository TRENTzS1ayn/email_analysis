docno="lists-011-10128323"
received="Tue Oct 28 12:13:24 1997"
isoreceived="19971028171324"
sent="Tue, 28 Oct 1997 21:09:54 +0100 (MET)"
isosent="19971028200954"
name="Koen Holtman"
email="koen@win.tue.nl"
subject="spec-08 selfcontradiction in 13.5.2"
id="199710282009.VAA02605@wsooti08.win.tue.nl"
charset="USASCII"
expires="1"


To:http-wg%cuckoo.hpl.hp.com@hplb.hpl.hp.com
Cc: Koen Holtman<koen@win.tue.nl>


Section 13.5.2 of draft-ietf-http-v11-spec-08 contains a minor
self-contradiction.  It first says that `A cache or non-caching proxy
MUST NOT modify [...] Content-Length', and later says that `A cache or
non-caching proxy MAY modify or add [Content-Length] in a response
that does not include no-transform, [...]'.

The problem is that the MUST NOT above is too strong.  Here is a
rewrite of the second half of section 13.5.2 which solves the problem.

         [...]
            A cache or non-caching proxy MUST NOT modify the
            following field in a response:

               . Expires

            but it may add this field if not already present.  If an
            Expires header is added, it MUST be given a field-value
            identical to that of the Date header in that response.

            A cache or non-caching proxy MUST NOT modify the folling
            field in a response that contains the no-transform
            Cache-Control directive, or in any request:

               . Content-Length

            A cache or non-caching proxy MAY modify or this field in a
            response that does not include no-transform, but if it
            does so, it MUST add a Warning 14 (Transformation applied)
            if one does not already appear in the response.  A cache
            MAY add this header if not already present.  If a
            Content-Length header is added or modified, it MUST
            correctly reflect the length of the entity-body.

              Note: a typical reason for adding the Content-Length
              header is that the origin server sent the content
              chunked encoded.

            A cache or non-caching proxy MUST NOT modify or add any of
            the following fields in a response that contains the no-
            transform Cache-Control directive, or in any request:

               . Content-Encoding
               . Content-Range
               . Content-Type

            A cache or non-caching proxy MAY modify or add these fields
         [...]


Koen.



