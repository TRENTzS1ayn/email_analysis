docno="lists-011-11439956"
received="Wed Nov 19 16:11:59 1997"
isoreceived="19971119211159"
sent="Wed, 19 Nov 1997 15:58:15 0800"
isosent="19971119235815"
name="Paul Leach"
email="paulle@microsoft.com"
subject="RE: spec-08 selfcontradiction in 13.5.2"
id="5CEA8663F24DD111A96100805FFE658720371F@red-msg51.dns.microsoft.com"
inreplyto="spec-08 selfcontradiction in 13.5.2"
expires="1"


To:http-wg%cuckoo.hpl.hp.com@hplb.hpl.hp.com,  'Koen Holtman'<koen@win.tue.nl>, 'Jim Gettys'<jg@w3.org>

I propose to just remove Content-Length from the list of headers affected by
"no-transform".

This is OK -- the section already says that it may not be modified, and it
it gets added, it has to reflect the true length. This meets the
requirements of "no-transform", because the fidelity of the entity-body will
not be affected.


> ----------
> From: koen@win.tue.nl[SMTP:koen@win.tue.nl]
> Sent: Tuesday, October 28, 1997 12:09 PM
> To: http-wg%cuckoo.hpl.hp.com@hplb.hpl.hp.com
> Cc: koen@win.tue.nl
> Subject: spec-08 self-contradiction in 13.5.2
> 
> 
> Section 13.5.2 of draft-ietf-http-v11-spec-08 contains a minor
> self-contradiction.  It first says that `A cache or non-caching proxy
> MUST NOT modify [...] Content-Length', and later says that `A cache or
> non-caching proxy MAY modify or add [Content-Length] in a response
> that does not include no-transform, [...]'.
> 
> The problem is that the MUST NOT above is too strong.  Here is a
> rewrite of the second half of section 13.5.2 which solves the problem.
> 
>          [...]
>             A cache or non-caching proxy MUST NOT modify the
>             following field in a response:
> 
>                . Expires
> 
>             but it may add this field if not already present.  If an
>             Expires header is added, it MUST be given a field-value
>             identical to that of the Date header in that response.
> 
>             A cache or non-caching proxy MUST NOT modify the folling
>             field in a response that contains the no-transform
>             Cache-Control directive, or in any request:
> 
>                . Content-Length
> 
>             A cache or non-caching proxy MAY modify or this field in a
>             response that does not include no-transform, but if it
>             does so, it MUST add a Warning 14 (Transformation applied)
>             if one does not already appear in the response.  A cache
>             MAY add this header if not already present.  If a
>             Content-Length header is added or modified, it MUST
>             correctly reflect the length of the entity-body.
> 
>               Note: a typical reason for adding the Content-Length
>               header is that the origin server sent the content
>               chunked encoded.
> 
>             A cache or non-caching proxy MUST NOT modify or add any of
>             the following fields in a response that contains the no-
>             transform Cache-Control directive, or in any request:
> 
>                . Content-Encoding
>                . Content-Range
>                . Content-Type
> 
>             A cache or non-caching proxy MAY modify or add these fields
>          [...]
> 
> 
> Koen.
> 



