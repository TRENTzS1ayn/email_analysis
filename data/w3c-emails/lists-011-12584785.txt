docno="lists-011-12584785"
received="Tue Dec  9 20:12:49 1997"
isoreceived="19971210011249"
sent="Tue, 9 Dec 1997 22:24:59 0600 (CST)"
isosent="19971210042459"
name="John Franks"
email="john@math.nwu.edu"
subject="Re: Proposal for new HTTP 1.1 authentication scheme"
id="Pine.LNX.3.95.971209215621.4175A100000@hopf.math.nwu.edu"
charset="USASCII"
inreplyto="348DF54E.FC604986&#64;belllabs.com"
expires="1"

To: Dave Kristol<dmk@bell-labs.com>
Cc: Paul Leach<paulle@microsoft.com>, Jim Gettys<jg@pa.dec.com>,  Eric_Houston/CAM/Lotus@lotus.com, Scott Lawrence<lawrence@agranat.com>,fielding@kiwi.ics.uci.edu,http-wg%cuckoo.hpl.hp.com@hplb.hpl.hp.com


On Tue, 9 Dec 1997, Dave Kristol wrote:
> 
> I like Benjamin Franz's suggestion of a fixed date that means "this is
> not a date" as a placeholder.

Yes, this makes sense.

> Content-length is another matter.  If the client sends the entity with
> chunked encoding, it probably does not know the content length, although
> it may calculate an entity-digest on the fly (and add it as a
> trailer?).  But the proxy may coalesce the entity and add a
> Content-length header.  Now what?  The entity-digest as calculated by
> the two parties will be different because of the Content-length.
> 

I believe that entity headers like Content-MD5, Content-Length,
etc. refer to the entity after any Content-encoding has been applied,
but before any hop-by-hop Transfer-encoding has been applied.  

The specification is pretty explicit about this:

       "Entity-header fields define optional metainformation about the
       entity-body..."


       "The entity-body is obtained from the message-body by decoding
       any Transfer-Encoding that may have been applied to ensure safe
       and proper transfer of the message."

This is important as it would be impossible to put Content-MD5 in a
chunked trailer, if the MD5 hash was calculated on the chunked entity.
Likewise Authentication-Info is explicitly allowed in a chunked
trailer and it depends on the Content-Length.

In any case, it seems the Content-length of an entity is the length
before any chunking.  Thus if a proxy removes chunking and adds a
Contact-Length header that should not introduce any errors in 
entity-digest calculation.

Am I missing something?

John Franks
john@math.nwu.edu



