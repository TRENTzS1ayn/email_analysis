docno="lists-011-13807200"
received="Wed Dec 17 11:34:19 1997"
isoreceived="19971217163419"
sent="Wed, 17 Dec 1997 11:11:19 0800"
isosent="19971217191119"
name="Roy T. Fielding"
email="fielding@kiwi.ics.uci.edu"
subject="Re: more on digest (was: Unidentified subject!)"
id="9712171112.aa07459@paris.ics.uci.edu"
inreplyto="Pine.LNX.3.95.971217113534.6533B100000&#64;hopf.math.nwu.edu"
expires="1"

To: John Franks<john@math.nwu.edu>
Cc:http-wg%cuckoo.hpl.hp.com@hplb.hpl.hp.com


>The only reason this came up at this point was that because a hash
>of the Date, L-M and Expires headers can be part of the response
>there could be a problem for servers with no clock if a proxy added
>a Date header.  There is a simple answer to this which is that
>proxies should not be allowed to add or change Date, L-M or Expires
>headers.  There are no known implementations which do so and no one
>has suggested any reason it is necessary to do so.

An HTTP/1.1 cache is required to change Date and Expires upon receipt
of a 304 response containing updated values for those fields.  This
does impact non-shared caches, so you will need to add something to the
effect of the digest should be removed if those fields are updated.

The Apache proxy canonicalizes the response field-values of Date,
Last-Modified, and Expires to the required HTTP-date format.  I have
no idea what effect this would have on entity-digest.  If it caches
the response, the cache will add Date and Content-Length if they are
missing, but it won't normally cache the response if the request
included Authorization (this would not be the case if we ever
developed a personal, non-shared proxy).

....Roy



