docno="lists-011-1885189"
received="Tue Apr 15 15:43:33 1997"
isoreceived="19970415194333"
sent="Tue, 15 Apr 97 15:33:00 MDT"
isosent="19970415213300"
name="Jeffrey Mogul"
email="mogul@pa.dec.com"
subject="Re: midcourse errors"
id="9704152233.AA15437@acetes.pa.dec.com"
inreplyto="7D9A01DBBFD5CF11AD0F0000F8411F8A55E1AB&#64;ROADKILL"
expires="1"


To:http-wg@cuckoo.hpl.hp.com

Henry Sanders writes:
    Around the time of the LA IETF there was some desire to remove
    footers entirely from chunked T-E. Phill Hallam objected strongly
    to this, and a compromise was reached where Content-MD5 was allowed
    in the footer for 1.1 and future versions of HTTP might allow other
    headers. The issue was considered closed for draft 04 in
    http://www.ics.uci.edu/pub/ietf/http/hypermail/1996q2/0058.html .
    The wording has changed a bit since then (I vaguely remember that
    happening as an editorial change) , but I believe the intent is
    still the same, which is that only Content-MD5 is valid in an HTTP
    1.1 chunked  footer.

Thanks for digging this up (although the message you cite doesn't
specifically address this issue).  I probably ignored most of that
discussion when it took place.

    I agree that the text could use some clarification. I think the
    simplest change consistent with my understanding of the intent
    would be to add a sentence to 14.16 saying "This header is allowed
    in the chunked Transfer-Encoding footer". 

That's a reasonable resolution to the confusion regarding Content-MD5.
I'll bug Jim Gettys to add that.

    Regardless, our server
    supporting this hasn't shipped yet, and I'm willing to change it if
    there's consensus that other headers should be allowed in the
    footer.

I'm still not sure if I agree with the sentiment conveyed by Dave Kristol,
that
I seem to recall discussions about Content-Length as a chunked
footer, and I seem to recall it was considered a bad idea.

But if the consensus is that Content-Length doesn't belong in the footer,
then perhaps we need to define a new "footer-eligible" header that
serves purpose that we are looking for: "Stop this response, I didn't
mean it when I said '200' back in the header".  E.g., a new header
called "Failed:" which can convey an updated status code and message.

E.g.,
HTTP/1.1 200 OK
...
Transfer-Encoding: Chunked

18
This is a complete
0
Failed: 500 Internal Server Error

Just a modest proposal, of course.

-Jeff






