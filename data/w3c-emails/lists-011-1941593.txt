docno="lists-011-1941593"
received="Tue Apr 15 18:44:29 1997"
isoreceived="19970415224429"
sent="Tue, 15 Apr 1997 18:41:08 0700 (PDT)"
isosent="19970416014108"
name="Ari Luotonen"
email="luotonen@netscape.com"
subject="Re: Issues-list item &quot;CACHINGCGI&quot;"
id="199704160141.SAA17231@step.mcom.com"
charset="USASCII"
inreplyto="9704160012.AA15744&#64;acetes.pa.dec.com"
expires="1"


To: Jeffrey Mogul<mogul@pa.dec.com>
Cc:http-wg@cuckoo.hpl.hp.com


> I propose adding this to the end of section 13.9:
> 
> Note that some HTTP/1.0 cache operators have found that it is
> dangerous to cache responses to requests for URLs including the
> string "cgi-bin".  HTTP/1.1 caches should follow this practice
> for responses that do not include an explicit expiration time.
> HTTP/1.1 origin servers that want to allow caching of responses
> for URLs including "?" or "cgi-bin" SHOULD include an explicit
> expiration time.  Explicit expiration times may be specified
> using Expires, or the max-age directive of Cache-Control, or
> both.
> 
> -Jeff
> 
> P.S.: I base the first sentence in the note on the sample configuration
> file distributed with a recent version of the Squid cache software.
> If this is actually contrary to normal practice, someone should say so.

Actually, the simple #1 rule for caching/non-caching of all time is:

NEVER cache an HTTP/1.0 response that does not carry a
Last-modified: header.

This supercedes any heuristics based on URLs containing strings like
"cgi-bin", ".cgi" or "htbin".  It's also intuitive: if a response
doesn't content L-M it implies that it probably didn't exist in this
form before I asked for it, and probably won't exist in this form
after so it's not worth caching.

This rule is strictly obeyed by both CERN and Netscape Proxies.
Specific proxy applications that know their data source intimately may
break this rule.  This assumes that the freshness of documents is
guaranteed by configuration, not by the protocol.

I've always strongly encouraged that both Last-modified: and Expires:
be sent out from CGI's whose result is produced from data that has a
specific last modification time, and will have a certain specific
modification time in the future (e.g. a database that is synchronized
at every midnight, but during the 24 hour period in between the
response would be unchanged for the same request).

Cheers,
--
Ari Luotonen, Mail-Stop MV-061Opinions my own, not Netscape's.
Netscape Communications Corp.ari@netscape.com
501 East Middlefield Roadhttp://home.netscape.com/people/ari/
Mountain View, CA 94043, USANetscape Proxy Server Development



