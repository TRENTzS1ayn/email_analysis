docno="lists-011-2435453"
received="Tue Apr 22 03:12:49 1997"
isoreceived="19970422071249"
sent="Tue, 22 Apr 1997 11:24:44 +0200 (MET DST)"
isosent="19970422092444"
name="Luigi Rizzo"
email="luigi@labinfo.iet.unipi.it"
subject="Re: Pipelining and compression effect on HTTP/1.1 proxies"
id="199704220924.LAA18509@labinfo.iet.unipi.it"
inreplyto="3.0.1.32.19970219112400.00954870&#64;pop.w3.org"
expires="1"


To: Henrik Frystyk Nielsen<frystyk@w3.org>
Cc:http-wg@cuckoo.hpl.hp.com

Hi,

in a relatively old message Henrik said:

> In the performance paper that Jim sent a reference to a couple of days ago
> 
> http://www.w3.org/pub/WWW/Protocols/HTTP/Performance/Pipeline.html
> 
> we state that pipelining is an essential part in making HTTP/1.1 outperform
> HTTP/1.0 speedwise. What the paper does not state directly is the impact
> pipelining has on proxies.
...
> Compression will also have a positive impact as it allows proxies to
> maintain the same compressed representation of the object in their
> persistent cache hence giving room for more objects on disk and in memory.

I have done a quick test on the content of our proxy cache: for each
directory, I have compared the output of

cat * | wc
and
cat * | gzip | wc

which is not a very rigorous test (since files in the cache contain the
HTTP header as well, and merging files before compression changes
the results a little bit) but gives the idea.

The total byte count is as follows:

Uncompressed:316.407.346
Compressed:274.892.797

with a saving, due to compression, of approximately 13% . I suspect the
actual use of compression would result in lower performance since
most files are short and headers compress a lot, thus biasing my result
toward better performance. These results can be explained with the fact
that large matherial is generally in compressed form at the source
hence the additional compression is ineffective.

Now gaining 10% on the cache size is not that much, considering the
extra work involved, and besides it looks more like a FS issue than a
cache issue.

Just a data point...

Cheers
Luigi
-----------------------------+--------------------------------------
Luigi Rizzo                  |  Dip. di Ingegneria dell'Informazione
email: luigi@iet.unipi.it    |  Universita' di Pisa
tel: +39-50-568533           |  via Diotisalvi 2, 56126 PISA (Italy)
fax: +39-50-568522           |  http://www.iet.unipi.it/~luigi/
_____________________________|______________________________________



