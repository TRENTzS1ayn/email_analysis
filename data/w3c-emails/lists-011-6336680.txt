docno="lists-011-6336680"
received="Tue Jul 29 15:23:41 1997"
isoreceived="19970729192341"
sent="Tue, 29 Jul 1997 18:18:42 0400"
isosent="19970729221842"
name="Dave Kristol"
email="dmk@belllabs.com"
subject="Re: SetCookie2: &quot;additive&quot; vs. &quot;independent&quot;"
id="33DE6C42.6201DD56@belllabs.com"
charset="usascii"
inreplyto="01ILT3O3B5AQ00517U&#64;SCI.WFBR.EDU"
expires="1"


To: Foteos Macrides<MACRIDES@sci.wfbr.edu>
Cc:http-wg%cuckoo.hpl.hp.com@hplb.hpl.hp.com,http-state@lists.research.bell-labs.com

Foteos Macrides wrote:

> [...]
> 
>         The problem is that you're counting on $Version=0; being treated
> as a bad cookie by the old server or script, and don't know what error
> handling it's using.  It indeed would be desireable for the UA to
> communicate that it supports version 1 or greater cookie handling in
> those cases for which it is using cached version 0 cookies and doesn't
> yet know if the server or script can handle new cookies.  The simplest,
> most efficient way might be to send:
> 
> Cookie2: $Version="1"
> Cookie: realoldnameA=realoldvalueA; realoldnameB=realoldvalueB[; ...]
> 
> If it's an old server or script, the Cookie2 request header will be
> ignored.  Otherwise, the server or script will use Set-Cookie2, the
> UA will not send the Cookie2 probe, and use Cookie: $Version="1"; ...
> so the updating is mutually know by the State Management partners
> with negligable excess network traffic having been expended, and with
> both the server/script and UA thereafter enjoyed all the benefits
> of the modern State Management protocol.

I like this approach.

Dave Kristol



