docno="lists-011-6551715"
received="Wed Jul 30 11:45:03 1997"
isoreceived="19970730154503"
sent="Wed, 30 Jul 97 11:35:55 MDT"
isosent="19970730173555"
name="Jeffrey Mogul"
email="mogul@pa.dec.com"
subject="Re: Issues-list item &quot;CACHINGCGI&quot;"
id="9707301835.AA11881@acetes.pa.dec.com"
inreplyto="Pine.GSO.3.96.970729231830.11299E100000&#64;shell1.aimnet.com"
expires="1"


To:http-wg%cuckoo.hpl.hp.com@hplb.hpl.hp.com

Dave Morris writes:

    I support the behavior for handling HTTP/1.1 responses strictly 
    conforming to Roy's position but I believe somthing like Jeff's
    proposed wording is necessary when the 1.1 cache is covering a 1.0
    server.

I would go along with this, except that I see no way that a proxy
in a chain of several proxies can reliably determine whether the
origin server is HTTP/1.0.  E.g., if you have this configuration:

Origin_server----Proxy_p1-----Proxy_p2------client

how does Proxy_p2 know for sure that the Origin_server is not
HTTP/1.0?

Given that, there certainly are many cases where a proxy
can reliably know that the origin server is definitely HTTP/1.1.
For example, Proxy_p1 knows that it's talking to the origin
server, and it knows what HTTP-version is sent in the response
status-line.  Or, if the response includes a header that could
only have been added by an HTTP/1.1 server (e.g., Cache-Control).

So, one possible rewording of the proposed resolution would be
to change:

A cache MUST NOT assign a heuristic expiration time to a
response for a URL that includes the strings "htbin", "cgi-bin", or
"?" in its rel_path part.  If such a response does not 
carry an explicit expiration time, it must be treated as
if it expires immediately.

to this:

A cache MUST NOT assign a heuristic expiration time to a
response for a URL that includes the strings "htbin",
"cgi-bin", or "?" in its rel_path part, if the response might
have been generated by an HTTP/1.0 (or earlier) origin server.
If such a response does not carry an explicit expiration time,
it must be treated as if it expires immediately.

-Jeff



