docno="lists-011-8104076"
received="Mon Aug 11 18:53:24 1997"
isoreceived="19970811225324"
sent="Mon, 11 Aug 1997 21:52:01 0400"
isosent="19970812015201"
name="Scott Lawrence"
email="lawrence@agranat.com"
subject="Re: REVERSION"
id="199708120152.VAA09553@devnix.agranat.com"
inreplyto="Pine.SUN.3.95.970811151249.20962D100000&#64;xochi.tezcat.com"
expires="1"


To:http-wg%cuckoo.hpl.hp.com@hplb.hpl.hp.com


>>>>> "KW" == Klaus Weide <kweide@tezcat.com> writes:

KW> This leads to another question.  Does the proposed OPTIONS probe
KW> actually *work* for an Apache/1.[23]* server acting as proxy?

  I sent probes to www.agranat.com running our 1.1 server via
  www.apache.org (Apache/1.3a2-dev).

    Sent:
        OPTIONS http://www.agranat.com HTTP/1.1
        Host: www.agranat.com
        Connection: close
        Max-Forwards: 0
        User-Agent: wwwreq/1.7

    Response:
        HTTP/1.0 200 OK
        Date: Tue, 12 Aug 1997 01:28:12 GMT
        Server: Agranat-EmWeb/R3_0alpha6
        Allow: HEAD, GET, OPTIONS

  it downgrades the request when it passes it on (according to the log
  on our server it received a 1.0 request), and then downgrades the
  response when it is returned.  Here is a direct probe of the same
  origin server:

    Sent:
        OPTIONS * HTTP/1.0
        User-Agent: wwwreq/1.7

    Response:
        HTTP/1.1 200 OK
        Date: Tue, 12 Aug 1997 01:46:00 GMT
        Server: Agranat-EmWeb/R3_0alpha6
        Public: HEAD, GET, POST, TRACE, OPTIONS

  [had to modify my test script to send 1.0 OPTIONS :-) ]
  so we returned 1.1 to the 1.0 request, and Apache made it 1.0 again.

  If I probe Apache directly with a 1.1 OPTIONS:

    Sent:
        OPTIONS * HTTP/1.1
        Host: www.apache.org
        Connection: close
        User-Agent: wwwreq/1.7

    Response:
        HTTP/1.1 200 OK
        Date: Tue, 12 Aug 1997 01:37:30 GMT
        Server: Apache/1.3a2-dev
        Content-Length: 0
        Allow: GET, HEAD, OPTIONS, TRACE
        Connection: close

  it responds as 1.1.

  I tried putting a 'Max-Forwards: 0' header in the probe through
  Apache, and it ignored it and forwarded it anyway.

--
Scott Lawrence           EmWeb Embedded Server       <lawrence@agranat.com>
Agranat Systems, Inc.        Engineering            http://www.agranat.com/



