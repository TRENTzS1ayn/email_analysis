docno="lists-012-16448359"
received="Fri Mar 30 12:55:15 2001"
isoreceived="20010330175515"
sent="Fri, 30 Mar 2001 17:11:10 +0530"
isosent="20010330114110"
name="Seema P Kumar"
email="2kseema@sun20.datamatics.com"
subject="Problem with multipart/xmixed replace"
id="002201c0b90e$51ead8c0$524111cf@datamatics.com"
charset="iso-88591"
expires="1"


To:<http-wg@cuckoo.hpl.hp.com>

Hi all !

 Could anybody tell me about the "multipart/x-mixed-replace" content type ?
 I try to use thie content type for my HTTPServletResponse object in my Java servlet, to keep
 outputting messages to
 the browser, but however, the browser does not interpret the headers
 properly and all the tags are visible as
 part of the browser content (I use Internet Explorer 5.0).

The following is the Java code :
public class RefreshingServlet extends HttpServlet{
 
 
 public void init(ServletConfig config) throws ServletException{
  super.init(config);
        
 }

public void service(HttpServletRequest req, HttpServletResponse res)
    throws ServletException, IOException
{
    res.setContentType("multipart/x-mixed-replace;boundary=\"boundary\"");
    
  PrintWriter out=res.getWriter();
    // Here is the first part
    out.print("\n\r--boundary\n\r");
    out.print("Content-Type: text/html\n\r");

    out.println("<H1>Waiting...</H1>");
    out.flush();

    // Here is the long work (here, a sleep)
    try {
         Thread.sleep(3000);
    }
    catch (Exception e) {
         // ignore
    }

    // Here is the second part
    out.print("\n\r--boundary\n\r");
    out.print("Content-Type: text/html\n\r");

    out.println("<H1>Done</H1>");

    out.print("\n\r--boundary--\n\r");
    out.flush();
}

}

Any loopholes for this ?

Regards,
Seema Kumar
Datamatics Technologies Ltd.,
(Tel: 8290829 (Ext:619))



