docno="lists-012-2087818"
received="Sat Apr 11 01:42:16 1998"
isoreceived="19980411054216"
sent="Sat, 11 Apr 1998 11:40:31 +0900"
isosent="19980411024031"
name="Henrik Frystyk Nielsen"
email="frystyk@w3.org"
subject="Issue: warning header should be general header, not response header"
id="3.0.5.32.19980411114031.007f6b30@localhost"
charset="usascii"
expires="1"


To:http-wg@cuckoo.hpl.hp.com
Cc:jg@w3.org


Currently the Warning header field is a Response header field:

14.46 Warning

The Warning response-header field is used to carry
additional information about the status of a response
which may not be reflected by the response status code.
This information is typically, though not exclusively,
used to warn about a possible lack of semantic transparency
from caching operations.

However, in section 13.1.2, it is said that 

A proxy MUST NOT modify or add any of the following fields
in a response that contains the no-transform Cache-Control
directive, or in any request:

o Content-Encoding
o Content-Range
o Content-Type

A non-transparent proxy MAY modify or add these fields in
a response that does not include no-transform, but if it
does so, it MUST add a Warning 114 (Transformation applied)
if one does not already appear in the response.

The Warning header field must be a general header field to be able to
indicate that a message in a PUT has been modified. This can for example be
used to support advanced image processing in the proxy which is not
available in the client doing the PUT. I admit that the above wording is
quite confusing. I would say:

A proxy MUST NOT modify or add any of the following fields
in a message that contains the no-transform Cache-Control
directive:

o Content-Encoding
o Content-Range
o Content-Type

A non-transparent proxy MAY modify or add these fields to
a message that does not include no-transform, but if it
does so, if not already present, it MUST add a Warning 114
(Transformation applied).

This would also make it a lot easier to use the Warining header field by
Mandatory, for example.

Henrik
--
Henrik Frystyk Nielsen,
World Wide Web Consortium
http://www.w3.org/People/Frystyk



