docno="lists-012-4529821"
received="Tue Jul 28 11:41:23 1998"
isoreceived="19980728154123"
sent="Mon, 27 Jul 1998 12:59:36 0400"
isosent="19980727165936"
name="Henrik Frystyk Nielsen"
email="frystyk@w3.org"
subject="Re: ISSUE: Returning metainformation on a 201 (Created) response"
id="3.0.5.32.19980727125936.00cde820@localhost"
charset="usascii"
inreplyto="9807271623.AA20082&#64;pachyderm.pa.dec.com"
expires="1"


To: Jim Gettys<jg@pa.dec.com>
Cc:http-wg@cuckoo.hpl.hp.com,dmk@research.bell-labs.com,paulle@microsoft.com

At 09:23 7/27/98 -0700, Jim Gettys wrote:
>
>a) I'm nervous about adding anything like this at this date.  I'd be happier
>with a separate RFC describing what should happen...  This should have
>been dealt with months ago.

I guess that applies to many of the edits performed now - the reason is
probably that nobody has implemented PUT with etag preconditions until now
- if you want to play with it then you can try out my implementation using
the Web Commander - a libwww sample application [1].

>b) 4) seems a gross hack to me, adding another HEAD class special case
>to the protocol.

I didn't say that it is beautiful but it provides the needed functionality
without breaking existing applications. If people don't care then we can
dream up a new scheme altogether and don't have to be concerned about it here.

>c) I suggest (described in a separate ID) a new header that conveys the
>ETAG.  This solves the race condition.  To get any additional metadata
>that might have changed, you'd perform a HEAD right after the PUT.

This solution doesn't quite work the same way and doesn't have as useful
semantics (special cases etags and allows race conditions on other
metainformation).

>d) you should go see if the WEBDAV folks have worried about this case;
>they are sloppy enough they may have missed it, but then again, they
>may have found it and have another fix for it...

I have forwarded the mail to the webdav mailing list.

Actually the current wording of etags in 14.19 is adequate as (if?) the
requested variant in a first time PUT can be said to be the "requested
variant". Whether that is obvious is another question - and of course it
doesn't work with other metainformation:

The ETag response-header field provides the current value of the entity tag
for the requested variant.

Henrik

[1] http://www.w3.org/WinCom/
--
Henrik Frystyk Nielsen,
World Wide Web Consortium
http://www.w3.org/People/Frystyk



