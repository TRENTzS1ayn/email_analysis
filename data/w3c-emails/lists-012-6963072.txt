docno="lists-012-6963072"
received="Mon Oct  5 14:34:39 1998"
isoreceived="19981005183439"
sent="Thu, 1 Oct 1998 21:48:23 +0100 (BST)"
isosent="19981001204823"
name="Vinod Valloppillil (Exchange)"
email="vinodv@exchange.microsoft.com"
subject="RE: Microsoft proxy"
id="BFF90FB6CF66D111BF4F0000F840DB8503C2FC87@LASSIE"
charset="iso-88591"
inreplyto="Microsoft proxy"
expires="1"


To:"'Drazen Kacar'"<dave@fly.cc.fer.hr>,http-wg@hplb.hpl.hp.com

the behavior described below was exhibited in Microsoft Proxy Server 1.0.   

Proxy Server 2.0 'fixes' this by just closing the connection if we get a
timeout / reset from the server.



> -----Original Message-----
> From: Drazen Kacar [mailto:dave@fly.cc.fer.hr]
> Sent: Thursday, October 01, 1998 6:14 AM
> To: http-wg@hplb.hpl.hp.com
> Subject: Microsoft proxy
> 
> 
> I got this from wget maintainer. As far as I know, proxies aren't
> supposed to append anything to the requested resource.
> However, I've been off-line for more than a year and I haven't
> digested the most recent HTTP spec. So, could someone tell
> me if this is legal?
> 
> ----- Forwarded message from Hrvoje Niksic <hniksic@srce.hr> -----
> 
> Sender: hniksic@public.srce.hr
> To: Drazen Kacar <dave@fly.cc.fer.hr>
> Subject: [Simon Munton <simonm@m4data.co.uk>] RE: wget 1.5.3 
> on Windows 98/NT, using MSVC 6
> X-Attribution: Hrvoje
> From: Hrvoje Niksic <hniksic@srce.hr>
> Date: 25 Sep 1998 13:58:06 +0200
> Message-ID: <kigiuicz9o1.fsf@jagor.srce.hr>
> User-Agent: Gnus/5.070033 (Pterodactyl Gnus v0.33) 
> XEmacs/21.0 (Danish Landrace)
> 
> ------- Start of forwarded message -------
> Message-ID: 
> <c=GB%a=_%p=M4DATA%l=M4EXCH-980925091231Z-6978@m4exch.m4data.co.uk>
> From: Simon Munton <simonm@m4data.co.uk>
> To: "'Hrvoje Niksic'" <hniksic@srce.hr>
> Subject: RE: wget 1.5.3 on Windows 98/NT, using MSVC 6
> Date: Fri, 25 Sep 1998 10:12:31 +0100
> MIME-Version: 1.0
> Content-Type: text/plain; charset="us-ascii"
> Content-Transfer-Encoding: 7bit
> 
> What seems to happen is this: part way through the download, 
> there is an
> error,
> eg timeout, and it seems that in addition MS proxy server sends a text
> string that gets put
> on the end of the downloaded file. Something like:
>  "HTTP Proxy error: Connection timed out".
> 
> When wget retries, this error message gets left embedded in the
> downloaded file.
> So the final file looks like:
> 
> <-------Good Data--------><---HTTP Proxy error 
> message----><-------Good
> data---->
> 
> Hope this makes sense. If you'd like me to try and find out more
> specific details
> of what's going on, let me know. 
> 
> ===========================================================
> Simon Muntonsimonm@m4data.co.uk
> M4 Data LtdTel: 44-1749-679222
> Mendip court, Bath Rd, WellsFax: 44-1749-673928
> Somerset, BA5 3DG, England
> 
> >
> >> I also use wget through Microsoft Proxy server, which has 
> a habit of
> >> sending error messages which get appended to the files being
> >> downloaded, and when wget retries getting the file, the downloaded
> >> file ends up with these messages in the middle.  I added a 
> couple of
> >> changes to ftp.c and http.c (diffs below), so that they 
> 'back up' by
> >> 2048 bytes when retrying, thereby getting rid of the error message
> >> embedded in the file.  (2048 seems to work for me).
> >
> >I don't understand this part.  How does the server send these error
> >messages, and exactly how do they get "appended to the files"?
> >
> >-- 
> >Hrvoje Niksic <hniksic@srce.hr> | Student at FER Zagreb, Croatia
> >--------------------------------+--------------------------------
> >Mix 2 table spoons sugar with 1 spoon salt.  Put it in a bottle
> >and stick a fuse into it.  Say "Shit!" when it doesn't detonate.
> >
> 
> ------- End of forwarded message -------
> 
> ----- End forwarded message -----
> 
> -- 
>  .-.   .-.    Life is a sexually transmitted disease.
> (_  \ /  _)
>      |        dave@fly.cc.fer.hr
>      |
> 



