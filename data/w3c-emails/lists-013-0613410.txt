docno="lists-013-0613410"
received="Thu Nov  8 19:46:00 2001"
isoreceived="20011109004600"
sent="Thu, 8 Nov 2001 14:44:59 0500"
isosent="20011108194459"
name="Howard Melman"
email="howard@silverstream.com"
subject="Connection: close and 100continue"
id="15338.57531.804000.244776@gargle.gargle.HOWL"
charset="usascii"
expires="1"


To: HTTP Working Group<http-wg@cuckoo.hpl.hp.com>
CC: Howard Melman<howard@silverstream.com>


Should a Connection: close header be allowed on a
100-continue response?  If so what does it mean?  Does it
mean the connection is closed after the 100-continue
response is sent and the body must be sent on a new
connection (seems very wrong) or that the body is sent and
the connection is closed after the final response, and if
so, shouldn't that final response have a Connection: close
header? 

   14.10 Connection

   [...]

   HTTP/1.1 defines the "close" connection option for the sender to
   signal that the connection will be closed after completion of the
   response. For example,

       Connection: close

   in either the request or the response header fields indicates that
   the connection SHOULD NOT be considered `persistent' (section 8.1)
   after the current request/response is complete.

   HTTP/1.1 applications that do not support persistent connections MUST
   include the "close" connection option in every message.

I think the "every message" is incorrect.  In trying to come
up with alternative wording I now question if it makes any
sense to send it on a 101 response?  Alternate wording would
be either: "every message except 100 continue responses" or
"every message except 1XX responses".  But I think that
might be too broad.

If you don't agree with the above, then I think the
following needs to be considered:

   8.1.2 Overall Operation

   [...]

   Persistent connections provide a mechanism by which a client and a
   server can signal the close of a TCP connection. This signaling takes
   place using the Connection header field (section 14.10). Once a close
   has been signaled, the client MUST NOT send any more requests on that
   connection.

Should this be "send any more requests" or "begin any more
requests though it may complete in process ones such as
sending a body after receiving a 100-continue response" ?

Thanks.

Howard



