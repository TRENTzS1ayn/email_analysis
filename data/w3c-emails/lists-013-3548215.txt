docno="lists-013-3548215"
received="Wed Nov 27 14:20:22 2002"
isoreceived="20021127192022"
sent="Wed, 27 Nov 2002 11:20:16 0800"
isosent="20021127192016"
name="Jeffrey Mogul"
email="Jeff.Mogul@hp.com"
subject="Re: Connection:KeepAlive and Proxies"
id="200211271920.gARJKGgD028492@wera.hpl.hp.com"
inreplyto="Pine.BSF.4.44.0211262205070.39393-100000&#64;measurementfactory.com"
expires="1"


To: Alex Rousskov<rousskov@measurement-factory.com>
cc: Diwakar Shetty<Diwakar.Shetty@oracle.com>,ietf-http-wg@w3.org


Alex wrote:

   I think the book is misquoting the RFC.

Actually, I think Diwakar Shetty's original message misquoted the book.
(Alex guess this right.)  He wrote:

    Following is a para which i read in one book.

    An HTTP/1.0 client could send a "Keep-Alive" header to a HTTP/1.1
    proxy that did not understand "Connection" but might mistakenly
    forward it. If the downstream connection also maintained a
    "Keep-Alive" connection, the proxy in the middle would never
    receive the closing of the response

He later identified this as from page 289 in Krishnamurthy & Rexford.
The actual paragraph is much longer (the quote above is not the
whole paragraph!) and what the paragraph in the book actually says is:

[2 sentences I'm not quoting]
However, interaction between the Connection header and
Keep-Alive header could result in a hung connection.  This
occured because an HTTP/1.0 client could send a "Keep-Alive"
header to a proxy that did not understand "Connection" but
might mistakenly forward it.  If the downstream connection also
maintained a "Keep-Alive" connection, the proxy in the middle
would never receive the closing of the response.  To avoid such
problems, HTTP/1.1 proxies are not permitted to establish a
persistent connection with HTTP/1.0 clients.

So the discussion on this mailing list has been misguided because
the book never mentioned "a HTTP/1.1 proxy that did not understand
'Connection'".  

I'm sure the Krishnamurthy & Rexford book does have bugs, and
I suspect this paragraph could have been clearer if the phrase
"to a proxy" had been "to an HTTP/1.0 proxy".  But from now on,
let's insist on accurate quotes before discussing whether some
publication got the story right.

-Jeff



