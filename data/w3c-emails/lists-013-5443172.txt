docno="lists-013-5443172"
received="Fri Oct 17 10:41:01 2003"
isoreceived="20031017144101"
sent="Fri, 17 Oct 2003 10:35:10 0400"
isosent="20031017143510"
name="Peter Watkins"
email="peterw@usa.net"
subject="Re: Reverse Proxy Header Munging"
id="3F8FFE1E.3070001@usa.net"
charset="usascii"
inreplyto="p05210604bbb35ff37661&#64;[128.52.39.83]"
expires="1"


To:"John C. Mallery"<jcma@ai.mit.edu>
Cc:ietf-http-wg@w3.org


John C. Mallery wrote:

> At 15:20 -0400 10/15/03, Peter Watkins wrote:
> 
>>John C. Mallery wrote:

>>>What is not clear to me is why Apache can't just pass through the HOST header as
>>>received and use the VIA header to convey the reverse proxy information to the
>>>upstream server.

>>These sound more like Apache/implementation questions than IETF/HTTP spec questions. Why does Apache, from your research, apparently send a different Host header? I could speculate[0] but I'm not sure this is an appropriate forum for discussing this particular behavior.

> Actually this is more like a HTTP WG issue because the area of reverse proxies is
> a dark corner in the standards, where interoperability can be problematic.

As long as the "downstream"/public-facing server talks HTTP to the
client, I don't care if it's communicating with the  backend/"upstream" 
server using HTTP, uucp, RPC, or RFC 1149 for that matter -- and I don't 
think the end users do, either. OK, maybe not RFC 1149. But if there's a 
business relationship between the downstream and upstream server, 
they'll work something out.

If there's not a business relationship, then the downstream server 
should issue an HTTP redirect to the client and be done with it.

Standards like HTTP exist to provide interoperability to disparate, 
unrelated systems on broad, often public, networks. That's generally not 
the case between downstream/upstream servers in an HTTP masquerading setup.

Well, that's my opinion. I'll back off and let you make your case to 
others. What I'd suggest: 1) suggest a "solution" 2) give more 
illustrations of the "problem" that don't involve Apache's ProxyPass 
implementation. I honestly can't tell if you have a general complaint 
(and, if so, how a public standard would address what I imagine your 
desire to be without facilitating something like content 
theft/misrepresentation) or a problem with Apache's software (maybe 
you're trying to do something that would be better served with other 
products [Squid? Inktomi Traffic Edge?]).

Cheers,

-Peter



