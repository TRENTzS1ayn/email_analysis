docno="lists-013-5732656"
received="Wed Nov  5 15:37:57 2003"
isoreceived="20031105203757"
sent="Thu, 06 Nov 2003 07:37:39 +1100"
isosent="20031105203739"
name="Robert Collins"
email="robertc@squidcache.org"
subject="Re: Relative ordering of fields in HTTP request"
id="1068064659.22905.89.camel@localhost"
inreplyto="200311051855.hA5ItEwJ020335&#64;wera.hpl.hp.com"
expires="1"

To: Jeffrey Mogul<Jeff.Mogul@hp.com>
Cc: Srikanth Kandula<kandula@MIT.EDU>,ietf-http-wg@w3.org


On Thu, 2003-11-06 at 05:55, Jeffrey Mogul wrote:
>    The order in which header fields with differing field names are
>    received is not significant. 
> 
> and so it is definitely legal to reorder (for example)
> 
> Accept: text/plain
> Connection: close
> 
> to become
> 
> Connection: close
> Accept: text/plain
> 

While it's legal, we've found that some firewalls expect certain headers
within the first X Kb, or the first tcp data payload, and reject or drop
requests if they aren't there. (I don't recall the specific headers
offhand - it's in the squid bugzilla if you're interested). We recently
fixed squid to not reorder headers that we received, to keep the early
headers at the start of the request transmission as the client hands to
us - allowing debugging of clients and more predictable behaviour.

Rob

-- 
GPG key available at: <http://members.aardvark.net.au/lifeless/keys.txt>.




