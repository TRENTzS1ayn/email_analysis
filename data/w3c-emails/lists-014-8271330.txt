docno="lists-014-8271330"
received="Thu May 20 14:51:53 2004"
isoreceived="20040520185153"
sent="Thu, 20 May 2004 14:48:51 0400"
isosent="20040520184851"
name="MarjaRiitta Koivunen"
email="marja@annotea.org"
subject="Update problem with iggy"
id="5.1.0.14.0.20040520141934.0532ed48@mail.annotea.org"
charset="usascii"
expires="1"


To: Eric Prud'hommeaux<eric@w3.org>
Cc:public-annotea-dev@w3.org


Discussed this with Eric two weeks ago.
Promised to send it again here so it is easier to find:

Update seems to have the following problem:
Each change to an annotation creates a new annotation instead of updating 
the old one e.g.

1) this is the original annotation made with Amaya (body contains "test 
iggy": http://iggy.w3.org/annotations/attribution/1083803351.895598

2) and this is the same annotation except that "change" was added to the 
existing body text http://iggy.w3.org/annotations/attribution/1083803374.199805

session ids:
  <!-- session-id 1083803574.648029" -->
and <!-- session-id 1083803787.303193" -->

The problem is that we should only see the latter annotation but at the 
moment we retrieve both from the server.

Earlier Eric confirmed that Amaya uses PUT for the reply updates and POST 
with replace source parameter for the annotation updates. Although we 
should really use PUT in both cases they do work, so that should not be the 
problem.

And replies do the dublication too:

Annotation:
http://iggy.w3.org/annotations/attribution/1085078002.39180
Orig Reply:
http://iggy.w3.org/annotations/attribution/1085078054.579611
Updated Reply:
http://iggy.w3.org/annotations/attribution/1085078066.742406

(Tested in Windows 2000 with Amaya 8.5)

Marja

Marja



