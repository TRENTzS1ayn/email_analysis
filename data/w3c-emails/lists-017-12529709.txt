docno="lists-017-12529709"
received="Thu Oct  9 14:24:55 2003"
isoreceived="20031009182455"
sent="Thu, 09 Oct 2003 21:24:53 +0300"
isosent="20031009182453"
name="Ville Skytt?"
email="ville.skytta@iki.fi"
subject="Re: [checklink] very long checking times  any idea?"
id="1065723893.11132.100.camel@bobcat.mine.nu"
inreplyto="144C85F2-FA78-11D7-9C64000393A63FC8&#64;w3.org"
expires="1"

To: Olivier Thereaux<ot@w3.org>
Cc:public-qa-dev@w3.org



On Thu, 2003-10-09 at 19:46, Olivier Thereaux wrote:

> I just got reports of "sluggishness" for checklink. I checked, and it 
> seems indeed like checklink takes > 5 seconds to HEAD each resource.
[...]
>
> Ville, do you have any idea what could cause this, or any experience of 
> similar trouble?

At least there are some DNS problems on v.w.o.  The primary nameserver
(ie the first one in /etc/resolv.conf) doesn't answer at all, others
seem to be fine.  The effect can be witnessed eg. by running the
following several times and comparing the results:

   time HEAD -d http://www.w3.org/
   time HEAD -d http://18.29.1.34/

A 5 second DNS timeout somewhere?  I was about to suggest running nscd
on v.w.o but it seems to be running named anyway...

There are some problems with checklink that prevent HTTP Keep-Alive
working too well, the LWP::UserAgent instances aren't always reused. 
That may cause the delay even between requests to the same hostname
during a single checklink run.



