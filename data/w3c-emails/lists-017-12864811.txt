docno="lists-017-12864811"
received="Tue Apr  6 22:16:27 2004"
isoreceived="20040407021627"
sent="Wed, 07 Apr 2004 04:15:58 +0200"
isosent="20040407021558"
name="Bjoern Hoehrmann"
email="derhoermi@gmx.net"
subject="Re: new host server for w.v.o"
id="40886247.129410522@smtp.bjoern.hoehrmann.de"
charset="usascii"
inreplyto="A9C4D58A-8834-11D8-8480000393A63FC8&#64;w3.org"
expires="1"

To: olivier Thereaux<ot@w3.org>
Cc: QA Dev<public-qa-dev@w3.org>



* olivier Thereaux wrote:
>On Apr 6, 2004, at 11:39, olivier Thereaux wrote:
>> I installed checklink, but check seems to dislike this new host. 
>> onsgmls is the well-known "1.5pre8" yet check behaves as if it were an 
>> outdated version ("invalid, no error"). could be related to perl on 
>> this new box (v5.8.3, versus 5.6.1 on the old one).
>
>  Bjoern yesterday helped me find the reason for that...
>
>It seems that perl -T does not like our usage of IPC::Open3 in the :80 
>instance.
>
>Apparently -T has become even more paranoid with version 5.8 and we're 
>not the only ones to have had such an issue.

It seems that $CFG->{'SGML Parser'} and $catalog are considered tainted;
I untainted them with the result that Perl is unable to find cmd.exe
which is the result of

  # Get rid of (possibly insecure) $PATH.
  delete $ENV{PATH};

(I believe that Perl is broken in this regard, it seems to attempt to
open "cmd.exe" directly rather than relying on %ComSpec% which is an
absolute reference...) commenting the delete out yields in
fatalsToBrowser with

  open3: IO::Pipe: Can't spawn-NOWAIT: Bad file descriptor at check ...

(I) Just run it without -T...



