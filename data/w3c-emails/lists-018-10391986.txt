docno="lists-018-10391986"
received="Tue Jul  1 04:05:53 2003"
isoreceived="20030701080553"
sent="Tue, 1 Jul 2003 01:05:44 0700"
isosent="20030701080544"
name="Michael Rys"
email="mrys@microsoft.com"
subject="MS-FO-LC1089: fn:root() should only be defined when a document node exists"
id="5C39F806F9939046B4B1AFE652500A3A05C2D760@RED-MSG10.redmond.corp.microsoft.com"
charset="usascii"
expires="1"


To:<public-qt-comments@w3.org>


Class: Technical

Section 14.1.9 fn:root: fn:root() should error if root node is not a
document node. Otherwise the following expression is surprising:
(<a><b/><c/></a>)[/a/c]/b

The above expression does not return the b element, since the / would
return the a element node which does not contain an a and thus the
predicate evaluates to false.

If we return an error, we avoid this issue. Users can use a let
expression to bind the constructed element. And we can decide in a later
version to give it a different semantics.

Also note that in XPath 1.0, fn:root() always gave a document node.

NOTE: This would give at least a return type document (see LC1-088).



