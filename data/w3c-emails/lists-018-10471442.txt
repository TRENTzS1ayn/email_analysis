docno="lists-018-10471442"
received="Tue Jul  1 05:21:04 2003"
isoreceived="20030701092104"
sent="Tue, 1 Jul 2003 10:21:02 +0100"
isosent="20030701092102"
name="Jeni Tennison"
email="jeni@jenitennison.com"
subject="Re: MS-FO-LC1-036: stringjoin example is wrong"
id="81480663517.20030701102102@jenitennison.com"
charset="usascii"
inreplyto="5C39F806F9939046B4B1AFE652500A3A05C2D70F&#64;RED-MSG10.redmond.corp.microsoft.com"
expires="1"


To:"Michael Rys"<mrys@microsoft.com>
CC:public-qt-comments@w3.org


Michael Rys wrote:
> Last example fn:string-join is wrong: ancestor-or-self::* is a
> reverse axis so result would be section/chap/doc. Either fix the
> result or add a /. at the end of the path expression.

The example is correct in terms of the ordering of the result. The
results of a path expression are always returned in document order, so
the path "ancestor-or-self::*" returns the <doc> element, followed by
the <chapter> element, followed by the <section> element.

The example is wrong, however, because it uses the expression
"name(.)" when it should use "name($n)". The current example would
return "section/section/section" since "name(.)" always returns
"section". The corrected example is:

  fn:string-join(for $n in ancestor-or-self::* return name($n), '/')

Cheers,

Jeni

---
Jeni Tennison
http://www.jenitennison.com/



