docno="lists-018-12608047"
received="Sun Jun  8 19:53:04 2003"
isoreceived="20030608235304"
sent="Sun, 08 Jun 2003 23:52:58 +0000"
isosent="20030608235258"
name="xquery@attbi.com"
email="xquery@attbi.com"
subject="No convenient way to cast one expression to the same type as another?"
id="200306082353.h58Nr4iC018727@tux.w3.org"
expires="1"


To:public-qt-comments@w3.org


Given two opaque expressions $x and $y, does XQuery have a convenient 
expression that converts $x to the same (dynamic or static) type as $y?

I can write a gnarly (60+ lines, just to handle singletons) typeswitch that 
converts $x to the dynamic type of $y, provided I'm willing to settle for the 
built-in XQuery types only.  I haven't found any way to handle user-defined 
types, or to convert $x to the static type of $y.

Strangely, this operation does come up (at least for dynamic types); for 
example, the general comparison operators perform this conversion on 
xdt:untypedAtomic values in some cases.

Perhaps there should be a built-in function like
convert-to-same-type-as($exprToConvert as item*, $type as item*) as item*
?

Cheers,

Michael Brundage
Writing as
Author, "XQuery: The XML Query Language" (Addison-Wesley, to appear 2003)
Co-author, "Professional XML Databases" (Wrox Press, 2000)

not as
Technical Lead
Common Query Runtime/XML Query Processing
WebData XML Team
Microsoft



