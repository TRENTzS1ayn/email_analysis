docno="lists-018-1933647"
received="Mon Oct  7 12:48:52 2002"
isoreceived="20021007164852"
sent="Mon, 7 Oct 2002 12:16:53 0400 (EDT)"
isosent="20021007161653"
name="Jeff Kenton"
email="jkenton@datapower.com"
subject="XPath 2.0 &ndash;&ndash; Question about decimal arithmetic"
id="3DA1B365.1010203@datapower.com"
charset="usascii"
expires="1"


To:public-qt-comments@w3.org





I have looked at the XPath 2.0 WD, the XML Schema Recommendation (Part 2: 
Datatypes), and the XQuery 1.0 and XPath 2.0 Functions and Operators WD.

I have questions about decimal arithmetic:

It is clear what the intent is if you have an infinite precision 
representation of decimals.  However, if you limit yourself to a real 
implementation (18 decimal digits conforms to the Schema Recommendation), you 
run into questions when you start doing arithmetic.  For example:

Addition:  a + b -- if a has 15 digits before the decimal point and b has 15 
digits after the decimal, which 18 digits do you keep? Do you round the 
result? Subtraction and multipl;ication have similar questions.

Division:  this is the biggest problem.  If you divide 1.0 div 3.0, is the 
answer 0.3 or 0.333333333333333333? If the latter, this will propagate through 
any following operations, including output.

Since all numbers in existing (pre 2.0) stylesheets that would have been 
doubles will now default to decimal (was this intended?), this is a serious 
question.

Thanks.

-- 
--------------------------
Jeff Kenton
DataPower Technology, Inc.



