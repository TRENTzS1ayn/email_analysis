docno="lists-019-0404416"
received="Wed May  7 17:33:21 2003"
isoreceived="20030507213321"
sent="Wed, 7 May 2003 14:33:10 -0700"
isosent="20030507213310"
name="Ashok Malhotra"
email="ashokma@microsoft.com"
subject="RE: dateTime etc accessors now UTC-based, were local"
id="E5B814702B65CB4DA51644580E4853FB0846B1C3@red-msg-12.redmond.corp.microsoft.com"
charset="us-ascii"
inreplyto="dateTime etc accessors now UTC-based, were local"
expires="-1"


To:"David Holmes"<dholmes@tibco.com>,<public-qt-comments@w3.org>


That's a good question, David, as it relates to an area in which there
has been significant change in the May 2 draft.

XML Schema defines the value space for all the date/time types as the
value in the UTC timezone.  In the XQuery/Xpath specifications we have
chosen to also keep the original timezone as part of the value.  Thus,
if the lexical form for a dateTime is "2003-05-07T17:30:00-05:00"  this
would translate into a two-part value:  a dateTime in the UTC timezone
2003-05-07T22:30:00 and the timezone -05:00.  

The component extraction functions work on values defined in this
manner.
There were also some bugs in the earlier drafts which have been
corrected.

All the best, Ashok

> -----Original Message-----
> From: public-qt-comments-request@w3.org [mailto:public-qt-comments-
> request@w3.org] On Behalf Of David Holmes
> Sent: Wednesday, May 07, 2003 1:44 PM
> To: 'public-qt-comments@w3.org'
> 
> 
> I noticed that the Last Call (02 May 2003) Functions and Operators
working
> draft has changed from the 15 November 2002 draft in regards to the
basis
> for component accessors functions for dateTime and friends.
> 
> For example, where previously (Section 8.4.10.1, 15 November 2002)
> 
> fn:get-hours-from-dateTime(xs:dateTime("1999-05-31T13:20:00-05:00"))
> returns
> 13,
> 
> now (Section 9.4.10.1, 02 May 2003)
> 
> fn:get-hours-from-dateTime(xs:dateTime("1999-12-31T21:20:00-05:00"))
> returns
> 2.
> 
> It would appear that the basis for component accessors has gone from
local
> (same as lexical) to UTC.  I can understand that the distinction is
> necessary to get everything to work out right, but the user is now
left
> with
> the onerous task of calculating local components and surprising
results
> unless this behavior is made very explicit in the specs.
> 
> Would you be able to point me to some threads on the subject? Did the
> committee consider some parallel functions e.g. get-local-hours-from-
and
> get-utc-hours-from-?
> 
> Thanks,
> 
> David Holmes
> 
> 
> 



