docno="lists-019-11604421"
received="Tue Apr 13 11:18:25 2004"
isoreceived="20040413151825"
sent="Tue, 13 Apr 2004 11:17:44 -0400"
isosent="20040413151744"
name="Henry Zongaro"
email="zongaro@ca.ibm.com"
subject="Re: [Serial] I18N WG last call comments"
id="OFFC3F39CE.2923E943-ON85256E74.006FF6D1-85256E75.005403D3@ca.ibm.com"
charset="US-ASCII"
inreplyto="[Serial] I18N WG last call comments"
expires="-1"

To:w3c-i18n-ig@w3.org,duerst@w3.org
Cc:public-qt-comments@w3.org



Hello,

     In [1], Martin Duerst submitted the following comment on the Last 
Call Working Draft of XSLT 2.0 and XQuery 1.0 Serialization on behalf of 
the I18N Working Group.

> [18] Section 4.5 (XML output method, omit-xml-declaration): "The
>    omit-xml-declaration parameter must be ignored if the standalone
>    parameter is present, or if the encoding parameter specifies a
>    value other than UTF-8 or UTF-16.": This disallows producing
>    XML other than UTF-8 or UTF-16 without an xml declaration even
>    though this is legal e.g. if served over HTTP with a corresponding
>    charset parameter. We are not sure this is intended, and we
>    are not sure this is a good thing. On the other hand,
>    omit-xml-declaration must also be ignored if version is not 1.0.

     Thanks to Martin and the I18N Working Group for this comment.

     The XSL and XQuery Working groups discussed this comment.

     Regarding the second point, although XML 1.1 requires a document 
entity to have an XML declaration, it does not require an external general 
parsed entity to have a text declaration.  The setting of the 
omit-xml-declaration parameter could still be meaningful, even if the 
version parameter has a value other than 1.0.

     Regarding the first point, as originally written, XML 1.0 required an 
XML declaration or a text declaration if the encoding of the document or 
external general parsed entity was anything other than UTF-8 or UTF-16. 
XSLT 1.0 enforced that requirement in its serialization mechanism.  The 
draft of Serialization inherited that behaviour from XSLT 1.0.  However, 
an erratum to XML 1.0 removed that requirement.

     In response to both points, the working groups decided that the 
Serialization specification should permit an XML declaration or text 
declaration to be omitted in precisely those circumstances in which it can 
be omitted according to XML 1.0 and XML 1.1.

     In particular, the working groups decided that if the serialized 
result could be considered to be the text declaration of an external 
general parsed entity, the omit-xml-declaration parameter could have the 
value yes or the value no, and the parameter's setting would take effect. 
They further decided that if the serialized result could only be 
considered to be a document entity because

  o the standalone parameter had the value yes or no; or
  o the version parameter had a value other than 1.0 and the
    doctype-system parameter was supplied

the omit-xml-declaration parameter must have the value no.  Otherwise, a 
serialization error results.  A host language would, of course, have the 
option of ensuring such conflicts never arise through whatever 
language-specific mechanism it uses to specify serialization parameters.

     May I ask the working group to confirm that that response is 
acceptable?

Thanks,

Henry [On behalf of the XSL and XQuery Working Groups.]
[1] 
http://lists.w3.org/Archives/Public/public-qt-comments/2004Feb/0362.html
------------------------------------------------------------------
Henry Zongaro      Xalan development
IBM SWS Toronto Lab   T/L 969-6044;  Phone +1 905 413-6044
mailto:zongaro@ca.ibm.com



