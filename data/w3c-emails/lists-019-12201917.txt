docno="lists-019-12201917"
received="Tue Apr 20 10:17:06 2004"
isoreceived="20040420141706"
sent="Tue, 20 Apr 2004 10:08:36 -0400"
isosent="20040420140836"
name="Henry Zongaro"
email="zongaro@ca.ibm.com"
subject="RE: FW: XSLT 2.0: XML Output Method: the omit-xml-declaration Parameter"
id="OF60826315.B1DC37A9-ON85256E7C.0046F671-85256E7C.004DB090@ca.ibm.com"
charset="US-ASCII"
inreplyto="200404201156.i3KBuPAE715882&#64;e6.ny.us.ibm.com"
expires="-1"

To:"Michael Kay"<mhk@mhk.me.uk>,"'Deborah Cawkwell'"<deborah.cawkwell@bbc.co.uk>
Cc:public-qt-comments@w3.org



Hello,

     I see that my description of the decision wasn't as precise as I'd 
wanted it to be.  The decision was, as Michael Kay indicated, that the 
value of the omit-xml-declaration parameter is always respected:  the 
declaration is output if and only if the parameter has the value "no".

     Further, it will be a serialization error if the parameter has the 
value "yes", but the settings of other parameters would require an XML or 
text declaration to be emitted.  In particular, an XML or text declaration 
is required if the standalone parameter has the value "yes" or the value 
"no", or if the version parameter has a value other than "1.0", and the 
doctype-system parameter is supplied.  In response to your comment, the 
setting of the encoding parameter is never considered to conflict with the 
setting of the omit-xml-declaration parameter.

     A host language can ensure that such a serialization error will never 
occur - in particular, XSLT will ensure that the values of parameters will 
never conflict in this way.


"Michael Kay" <mhk@mhk.me.uk> wrote on 2004-04-20 07:56:11 AM:
> I think (hope) that the decision of the WGs is:
> 
> When the output method is XML, an XML declaration will be output if and 
only
> if the omit-xml-declaration parameter has the value "no". In XSLT, the
> default value will be "no".
> 
> Michael Kay
> 
> > -----Original Message-----
> > From: public-qt-comments-request@w3.org 
> > [mailto:public-qt-comments-request@w3.org] On Behalf Of 
> > Deborah Cawkwell
> > Sent: 20 April 2004 09:47
> > To: Henry Zongaro
> > Cc: public-qt-comments@w3.org
> > Subject: RE: FW: XSLT 2.0: XML Output Method: the 
> > omit-xml-declaration Parameter
> > 
> > 
> > Great. 
> > 
> > To summarize XSLT will 2.0 will be consistent with XML 1.0 
> > (inc erratum)
> > and the inclusion of an XML prolog will not be a 'MUST'. 
> > 
> > Will it be a 'CAN', if I want to do it?

Thanks,

Henry
------------------------------------------------------------------
Henry Zongaro      Xalan development
IBM SWS Toronto Lab   T/L 969-6044;  Phone +1 905 413-6044
mailto:zongaro@ca.ibm.com


> > 
> > Thanks v much
> > 
> > Deborah
> > 
> > 
> > -----Original Message-----
> > From: Henry Zongaro [mailto:zongaro@ca.ibm.com] 
> > Sent: 13 April 2004 15:51
> > To: Deborah Cawkwell
> > Cc: public-qt-comments@w3.org
> > Subject: Re: FW: XSLT 2.0: XML Output Method: the omit-xml-declaration
> > Parameter
> > 
> > Deborah,
> > 
> >      In [1], you submitted the following comment on the Last Call
> > Working 
> > Draft of XSLT 2.0 and XQuery 1.0 Serialization.
> > 
> > > 4.5 XML Output Method: the omit-xml-declaration Parameter 
> > >
> > http://www.w3.org/TR/2003/WD-xslt-xquery-serialization-2003111
> > 2/#N105F3 
> > > 
> > > This says: "The omit-xml-declaration parameter must be 
> > ignored if the 
> > > standalone parameter is present, or if the encoding parameter
> > specifies 
> > > a value other than UTF-8 or UTF-16." 
> > > 
> > > I would like to control the output of the omit-xml-declaration 
> > > parameter, where the encoding parameter specifies a value other than
> > > UTF-8 or UTF-16. I often don't use Unicode. I would like the option 
> > > to output with non-standard encoding as XHTML. The XHTML standard (
> > > http://www.w3.org/TR/xhtml1/) specifies that "an XML declaration is 
> > > not required in all XML documents"; it is often desirable to omit 
> > > it, given that it is known that there are unexpected results with 
> > > some user agents.
> > 
> >      Thank you for your comment.
> > 
> >      The XSL and XQuery Working groups discussed your comment.  As 
> > originally written, XML 1.0 required an XML declaration or a text 
> > declaration if the encoding of the document or external 
> > general parsed 
> > entity was anything other than UTF-8 or UTF-16.  XSLT 1.0 
> > enforced that 
> > requirement in its serialization mechanism.  The draft of 
> > Serialization 
> > inherited that behaviour from XSLT 1.0.  However, an erratum 
> > to XML 1.0 
> > removed that requirement.
> > 
> >      In response to your comment, the working groups decided 
> > to require 
> > the XML declaration or text declaration to be omitted, 
> > regardless of the
> > 
> > setting of the encoding parameter.  Serialization will permit an XML 
> > declaration or text declaration to be omitted in precisely those 
> > circumstances in which it can be omitted according to XML 1.0 and XML
> > 1.1. 
> >  This would affect both the xml and xhtml output methods.
> > 
> >      As that is the change you requested, I believe that decision will
> > be 
> > acceptable to you.   May I ask you to confirm that it is?
> > 
> > Thanks,
> > 
> > Henry [On behalf of the XSL and XQuery Working Groups.]
> > [1] 
> > http://lists.w3.org/Archives/Public/public-qt-comments/2004Feb
> > /0996.html
> > ------------------------------------------------------------------
> > Henry Zongaro      Xalan development
> > IBM SWS Toronto Lab   T/L 969-6044;  Phone +1 905 413-6044
> > mailto:zongaro@ca.ibm.com



