docno="lists-019-16117415"
received="Mon Feb 23 14:31:47 2004"
isoreceived="20040223193147"
sent="Mon, 23 Feb 2004 14:31:05 -0500"
isosent="20040223193105"
name="scott_boag@us.ibm.com"
email="scott_boag@us.ibm.com"
subject="Re: [XQuery] MS-XQ-LC1-146"
id="OF790F85BE.E285CF37-ON85256E43.00595A4A-85256E43.006B377E@lotus.com"
charset="US-ASCII"
inreplyto="EB0A327048144442AFB15FCE18DC96C7020F7F63&#64;RED-MSG-31.redmond.corp.microsoft.com"
expires="-1"

To:"Michael Rys"<mrys@microsoft.com>
Cc:public-qt-comments@w3.org,public-qt-comments-request@w3.org



Hi Michael.  Paul wanted me to give high priority to answering this 
particular issue (original mail at [1]).

Since the November document, the WG has agreed to change the precedence of 
instance-of, treat, castable, and case (in response to a previous issue 
raised [2] by you).  The precedence table is now looking more like:

1       (comma)
2       FLWORExpr, some, every, TypeswitchExpr, IfExpr
3       or
4       and
5       eq, ne, lt, le, gt, ge, =, !=, <, <=, >, >=, is, <<, >>
6       to
7       +, -
8       *, div, idiv, mod
9       unary -, unary +
10      union, |
11      intersect, except
12      instance of
13      treat
14      castable
15      cast
16      ValidateExpr, /, //
17      [ ], ( )

so that these operators bind much more tightly.

In the most recent test parser, your expression parses fine:

Type Expression:
"1" cast as xs:integer = "1.0" cast as xs:integer
|QueryList
|   Module
|      MainModule
|         Prolog
|         QueryBody
|            Expr
|               ComparisonExpr =
|                  CastExpr
|                     PathExpr
|                        StringLiteral "1"
|                     CastAs cast as
|                     SingleType
|                        AtomicType
|                           QNameForAtomicType xs:integer
|                  CastExpr
|                     PathExpr
|                        StringLiteral "1.0"
|                     CastAs cast as
|                     SingleType
|                        AtomicType
|                           QNameForAtomicType xs:integer

Please let me know if this previously decided issue resolves MS-XQ-LC1-146 
in your view.  Thanks!

-scott


[1] [XQuery] MS-XQ-LC1-146
 http://lists.w3.org/Archives/Public/public-qt-comments/2004Feb/0801.html

[2] Grammar issue: cast as
 http://lists.w3.org/Archives/Member/w3c-xml-query-wg/2003Oct/0063.html



