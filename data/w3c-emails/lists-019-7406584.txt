docno="lists-019-7406584"
received="Sat Oct 11 11:57:20 2003"
isoreceived="20031011155720"
sent="Sat, 11 Oct 2003 17:58:10 +0200"
isosent="20031011155810"
name="Xavier Franc"
email="xfranc@online.fr"
subject="Re: [Use cases] More issues"
id="3F882892.3040502@online.fr"
charset="us-ascii"
inreplyto="[Use cases] More issues"
expires="-1"


To:public-qt-comments@w3.org


some more issues:

- use case TREE:Q6 has been erroneously modified wrt the previous version
   this results in an infinite recursion

new version:
declare function local:section-summary($book-or-section as element())
   as element()*
{
   for $section in $book-or-section
   return
     <section>
        { $section/@* }
        { $section/title }
        <figcount>
          { count($section/figure) }
        </figcount>
        { local:section-summary($section) }
     </section>
};

<toc>
   {
     for $s in doc("book.xml")/book/section
     return local:section-summary($s)
   }
</toc>


Since $book-or-section is a single element, the 'for $section in' is
actually not a loop, thus calling local:section-summary($section)
is a recursive loop.

The former version was correct.

-- 
Xavier FRANC



