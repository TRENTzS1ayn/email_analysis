docno="lists-019-7440123"
received="Mon Oct 13 19:57:50 2003"
isoreceived="20031013235750"
sent="Mon, 13 Oct 2003 16:55:55 -0700"
isosent="20031013235555"
name="Sarah Wilkin"
email="swilkin@apple.com"
subject="[F&amp;O] Function for self-evaluation?"
id="C91AF818-FDD8-11D7-8444-000A278462D6@apple.com"
charset="US-ASCII"
expires="-1"


To:public-qt-comments@w3.org


One function we added to our XQuery implementation is eval(), which 
takes a string and evaluates it as an XQuery expression. I'm wondering 
if the working group has considered adding such a function.

The most obvious use case is a query that needs to be marked up and 
executed later. For example, in the NIST test suite, a test looks like:
<results>
{fn:boolean(xs:double("-1.7976931348623157E308"))}
</results>
So an implementor is somehow expected to read in the whole file and 
execute it as XQuery. If eval is supported, the same file can become
<results>
fn:boolean(xs:double("-1.7976931348623157E308"))
</results>
And the test may be evaluated with XQuery itself:
eval(doc("test.xml")/results/string())

There are, of course, many other uses. The is not merely a "convenience 
method" as it could never be written as a user-defined function. Any 
comments are appreciated.

--Sarah



