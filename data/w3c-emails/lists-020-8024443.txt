docno="lists-020-8024443"
received="Tue Mar 23 18:33:02 2004"
isoreceived="20040323233302"
sent="Tue, 23 Mar 2004 15:28:13 -0800"
isosent="20040323232813"
name="Don Chamberlin"
email="chamberl@almaden.ibm.com"
subject="[XQuery] IBM-XQ-027: Namespace and attribute errors"
id="OFE2E6A835.B22AADA4-ON88256E60.0079E1C6-88256E60.0080E25D@us.ibm.com"
charset="US-ASCII"
expires="-1"

To:public-qt-comments@w3.org
Cc: Andrew Eisenberg<andrew.eisenberg@us.ibm.com>, Scott Boag<scott_boag@us.ibm.com>, Henry Zongaro<zongaro@ca.ibm.com>


(IBM-XQ-027): Responding to a request for clarification, I propose that 
the following rules be added to the XQuery specification:

(a) A static error is raised if a prolog contains multiple declarations 
for the default element/type namespace or multiple declarations for the 
default function namespace (including declarations imported from other 
modules). These conditions are already defined to be errors in Appendix C, 
but they need clarifying text and error codes.

(b) A static error is raised if a direct or computed element constructor 
contains multiple specifications of the default element/type namespace 
(that is, multiple namespace declaration attributes named xmlns, or 
multiple local namespace declarations with no prefix). We need an error 
code for this.

(c) A static error is raised if a namespace declaration attribute (in a 
direct element constructor) or a local namespace declaration (in a 
computed element constructor) binds a namespace prefix to a zero-length 
URI. There is already an error (XQ0053) that covers this case if it occurs 
in a prolog; this error can be extended to cover the additional cases.

(d) A static error is raised if two namespace declaration attributes 
within the same direct element constructor bind the same namespace prefix. 
There is already an error (XQ0043) that covers this case for local 
namespace declarations in a computed element constructor; this error can 
be extended to cover the additional case.

(e) The section on attributes in direct element constructors says "All the 
attribute nodes generated by an element constructor must have unique 
names". We should specify that error XQ0025 is raised if this rule is 
violated. Currently XQ0025 seems to cover only duplicate attribute names 
that occur in the content sequence.

--Don Chamberlin



