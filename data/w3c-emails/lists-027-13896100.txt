docno="lists-027-13896100"
received="Tue May 14 11:44:20 2002"
isoreceived="20020514154420"
sent="Tue, 14 May 2002 11:43:34 -0400"
isosent="20020514154334"
name="Glenn Marcy"
email="gmarcy@us.ibm.com"
subject="Re: XML Test Suite download"
id="OF5ABEC66A.E95C626E-ON85256BB9.00563B15@rchland.ibm.com"
charset="us-ascii"
inreplyto="XML Test Suite download"
expires="-1"

To: Sandra Martinez<sandra.martinez@nist.gov>
Cc:public-xml-testsuite@w3.org,w3c-xml-core-wg@w3.org




Sandra,

Here is the set of changes that I needed to make to get the test suite to
run/pass.
Please fix the ones that are merely simple mistakes.  If you have any
doubts about
the others, please open issues in the test-suite-issues document.

Thanks,
Glenn

Test "ibm-invalid-P32-ibm32i02.xml" is actually not-wellformed since it
violates
the WFC: Entity Declared constraint.  This was the issue that I raised with
the
group on how it seemed odd that a standalone="yes" would make a valid
document
not-wellformed instead of simply invalid, but the group agreed that the WFC
does
in fact apply.

diff -r xmlconf_orig/ibm/ibm_oasis_invalid.xml
xmlconf/ibm/ibm_oasis_invalid.xml
36,37c36,37
<   <TEST URI="invalid/P32/ibm32i02.xml" TYPE="invalid" ID
="ibm-invalid-P32-ibm32i02.xml" ENTITIES="parameter" SECTIONS="2.9" OUTPUT
="invalid/P32/out/ibm32i02.xml">
<     This test violates VC: Standalone Document Declaration in P32.
---
>   <TEST URI="invalid/P32/ibm32i02.xml" TYPE="not-wf" ID
="ibm-invalid-P32-ibm32i02.xml" ENTITIES="parameter" SECTIONS="2.9" OUTPUT
="invalid/P32/out/ibm32i02.xml">
>     This test violates WFC: Entity Declared in P68.

This is the same issue.

diff -r xmlconf_orig/sun/sun-invalid.xml xmlconf/sun/sun-invalid.xml
79,81c79,81
<     SECTIONS="2.9" TYPE="invalid">
<     Tests the Standalone Document Declaration VC, ensuring that
<     a reference to externally defined entity causes a validity
error.</TEST>
---
>     SECTIONS="2.9" TYPE="not-wf">
>     Tests the Entity Declared WFC, ensuring that
>     a reference to externally defined entity causes a well-formedness
error.</TEST>

This file had been corrupted, see TS09 and TS13, but seems to have been
fixed now.
The test description needs to be changed back.

diff -r xmlconf_orig/ibm/ibm_oasis_valid.xml
xmlconf/ibm/ibm_oasis_valid.xml
29,30c29,31
<   <TEST URI="valid/P02/ibm02v01.xml" TYPE="not-wf" ID
="ibm-valid-P02-ibm02v01.xml" ENTITIES="none" SECTIONS="2.2">
<      Contains malformed UTF-8 characters.
---
>   <TEST URI="valid/P02/ibm02v01.xml" TYPE="valid" ID
="ibm-valid-P02-ibm02v01.xml" ENTITIES="none" SECTIONS="2.2">
>     Tests <B>Char</B> with 3 characters - 2 boundaries plus 1 in the
middle - for
>      each range plus #x20 #x9 #xD #xA

There is a typo in this file (and some minor whitespace inconsistancies).

diff -r xmlconf_orig/oasis/oasis.xml xmlconf/oasis/oasis.xml
888c888
< <TEST TYPE='no-wf' SECTIONS='2.6[16]'
---
>   <TEST TYPE='not-wf' SECTIONS='2.6[16]'
892d891
<

This file has now been moved to the valid directory, but the old entry in
the
sun-error file needs to be removed.

diff -r xmlconf_orig/sun/sun-error.xml xmlconf/sun/sun-error.xml
7,11d6
< <TEST URI="invalid/pe01.xml" ID="pe01" SECTIONS="2.8" TYPE="error">
<     Parameter entities must consist of a series of complete markup
<     declarations of the types allowed by the nonterminal
<     <EM>markupdecl</EM>, interespersed with whitespace or PERefs.</TEST>
<

The file was moved but the path in the test description was not updated.

diff -r xmlconf_orig/sun/sun-valid.xml xmlconf/sun/sun-valid.xml
7c7
< <TEST URI="invalid/pe01.xml" ID="pe01" ENTITIES="parameter" SECTIONS
="2.8" TYPE="valid">
---
> <TEST URI="valid/pe01.xml" ID="pe01" ENTITIES="parameter" SECTIONS="2.8"
TYPE="valid">

The test file was changed to change/remove ambiguous content models, but
the expected results file was not updated.

diff -r xmlconf_orig/sun/valid/out/optional.xml
xmlconf/sun/valid/out/optional.xml
1c1
< <root>&#10;    &#10;    <once><e></e></once>&#10;&#10;
<twice><e></e><e></e></twice>&#10;&#10;&#10;
<once-or-twice-a><e></e></once-or-twice-a>&#10;
<once-or-twice-b><e></e></once-or-twice-b>&#10;
<once-or-twice-c><e></e></once-or-twice-c>&#10;
<once-or-twice-d><e></e></once-or-twice-d>&#10;
<once-or-twice-e><e></e></once-or-twice-e>&#10;&#10;
<once-or-twice-a><e></e><e></e></once-or-twice-a>&#10;
<once-or-twice-b><e></e><e></e></once-or-twice-b>&#10;
<once-or-twice-c><e></e><e></e></once-or-twice-c>&#10;
<once-or-twice-d><e></e><e></e></once-or-twice-d>&#10;
<once-or-twice-e><e></e><e></e></once-or-twice-e>&#10;&#10;&#10;
<once-or-more-1a><e></e></once-or-more-1a>&#10;
<once-or-more-1b><e></e></once-or-more-1b>&#10;
<once-or-more-1c><e></e></once-or-more-1c>&#10;
<once-or-more-1d><e></e></once-or-more-1d>&#10;
<once-or-more-1e><e></e></once-or-more-1e>&#10;&#10;
<once-or-more-1a><e></e><e></e></once-or-more-1a>&#10;
<once-or-more-1b><e></e><e></e></once-
or-more-1b>&#10;    <once-or-more-1c><e></e><e></e></once-or-more-1c>&#10;
<once-or-more-1d><e></e><e></e></once-or-more-1d>&#10;
<once-or-more-1e><e></e><e></e></once-or-more-1e>&#10;&#10;
<once-or-more-1a><e></e><e></e><e></e></once-or-more-1a>&#10;
<once-or-more-1b><e></e><e></e><e></e></once-or-more-1b>&#10;
<once-or-more-1c><e></e><e></e><e></e></once-or-more-1c>&#10;
<once-or-more-1d><e></e><e></e><e></e></once-or-more-1d>&#10;
<once-or-more-1e><e></e><e></e><e></e></once-or-more-1e>&#10;&#10;
<once-or-more-1a><e></e><e></e><e></e><e></e></once-or-more-1a>&#10;
<once-or-more-1b><e></e><e></e><e></e><e></e></once-or-more-1b>&#10;
<once-or-more-1c><e></e><e></e><e></e><e></e></once-or-more-1c>&#10;
<once-or-more-1d><e></e><e></e><e></e><e></e></once-or-more-1d>&#10;
<once-or-more-1e><e></e><e></e><e></e><e></e></once-or-more-1e>&#10;&#10;
&#10;    <once-or-more-2a><e></e></once-or-more-2a>&#10;
<once-or-more-2b><e></e></once-or-more-2b>&#10;    <once-or-more-2c><e></e

></once-or-more-2c>&#10;    <once-or-more-2d><e></e></once-or-more-2d>&#10;
<once-or-more-2e><e></e></once-or-more-2e>&#10;&#10;
<once-or-more-2a><e></e><e></e></once-or-more-2a>&#10;
<once-or-more-2b><e></e><e></e></once-or-more-2b>&#10;
<once-or-more-2c><e></e><e></e></once-or-more-2c>&#10;
<once-or-more-2d><e></e><e></e></once-or-more-2d>&#10;
<once-or-more-2e><e></e><e></e></once-or-more-2e>&#10;&#10;
<once-or-more-2a><e></e><e></e><e></e></once-or-more-2a>&#10;
<once-or-more-2b><e></e><e></e><e></e></once-or-more-2b>&#10;
<once-or-more-2c><e></e><e></e><e></e></once-or-more-2c>&#10;
<once-or-more-2d><e></e><e></e><e></e></once-or-more-2d>&#10;
<once-or-more-2e><e></e><e></e><e></e></once-or-more-2e>&#10;&#10;
<once-or-more-2a><e></e><e></e><e></e><e></e></once-or-more-2a>&#10;
<once-or-more-2b><e></e><e></e><e></e><e></e></once-or-more-2b>&#10;
<once-or-more-2c><e></e><e></e><e></e><e></e></once-or-more-2c>&#10;
<once-or-more-2d><e></e><e></e><e></e><e></e></o
nce-or-more-2d>&#10;
<once-or-more-2e><e></e><e></e><e></e><e></e></once-or-more-2e>&#10;
&#10;</root>
\ No newline at end of file
---
> <root>&#10;    &#10;    <once><e></e></once>&#10;&#10;
<twice><e></e><e></e></twice>&#10;&#10;&#10;
<once-or-twice-a><e></e></once-or-twice-a>&#10;
<once-or-twice-b><e></e></once-or-twice-b>&#10;
<once-or-twice-c><e></e></once-or-twice-c>&#10;
<once-or-twice-d><e></e></once-or-twice-d>&#10;
<once-or-twice-e><e></e></once-or-twice-e>&#10;&#10;
<once-or-twice-a><e></e><e></e></once-or-twice-a>&#10;
<once-or-twice-b><e></e><e></e></once-or-twice-b>&#10;
<once-or-twice-c><e></e><e></e></once-or-twice-c>&#10;
<once-or-twice-d><e></e><e></e></once-or-twice-d>&#10;
<once-or-twice-e><e></e><e></e></once-or-twice-e>&#10;&#10;&#10;
<once-or-more-a><e></e></once-or-more-a>&#10;
<once-or-more-b><e></e></once-or-more-b>&#10;
<once-or-more-c><e></e></once-or-more-c>&#10;
<once-or-more-d><e></e></once-or-more-d>&#10;
<once-or-more-e><e></e></once-or-more-e>&#10;&#10;
<once-or-more-a><e></e><e></e></once-or-more-a>&#10;
<once-or-more-b><e></e><e></e></once-or-more-b>&#1
0;    <once-or-more-c><e></e><e></e></once-or-more-c>&#10;
<once-or-more-d><e></e><e></e></once-or-more-d>&#10;
<once-or-more-e><e></e><e></e></once-or-more-e>&#10;&#10;
<once-or-more-a><e></e><e></e><e></e></once-or-more-a>&#10;
<once-or-more-b><e></e><e></e><e></e></once-or-more-b>&#10;
<once-or-more-c><e></e><e></e><e></e></once-or-more-c>&#10;
<once-or-more-d><e></e><e></e><e></e></once-or-more-d>&#10;
<once-or-more-e><e></e><e></e><e></e></once-or-more-e>&#10;&#10;
<once-or-more-a><e></e><e></e><e></e><e></e></once-or-more-a>&#10;
<once-or-more-b><e></e><e></e><e></e><e></e></once-or-more-b>&#10;
<once-or-more-c><e></e><e></e><e></e><e></e></once-or-more-c>&#10;
<once-or-more-d><e></e><e></e><e></e><e></e></once-or-more-d>&#10;
<once-or-more-e><e></e><e></e><e></e><e></e></once-or-more-e>&#10;&#10;
&#10;</root>
\ No newline at end of file

I cannot find the tests that these two entries are referring to.  The
descriptions seem strange talking about tests marked as invalid violating
a WFC, so I suspect that the tests were removed through the descriptions
remained.  Therefore, I have deleted these entries.

diff -r xmlconf_orig/xmltest/xmltest.xml xmlconf/xmltest/xmltest.xml
673,682d672
< <TEST TYPE="invalid" ENTITIES="both" ID="invalid--010"
<     URI="invalid/010.xml" SECTIONS="2.8">
<     This test violates WFC:PE Between Declarations in Production 28a.
<     The last character of a markup declaration is not contained in the
same
<     parameter-entity text replacement.</TEST>
< <TEST TYPE="invalid" ENTITIES="both" ID="invalid--011"
<     URI="invalid/011.xml" SECTIONS="2.8">
<     This test violates WFC:PE Between Declarations in Production 28a.
<     The last character of a markup declaration is not contained in the
same
<     parameter-entity text replacement.</TEST>

That's all !!

-Glenn



