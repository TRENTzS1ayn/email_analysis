docno="lists-037-12535165"
received="Mon Mar 24 04:35:53 1997"
isoreceived="19970324093553"
sent="Mon, 24 Mar 1997 01:35:55 -0800"
isosent="19970324093555"
name="Yaron Goland"
email="yarong@microsoft.com"
subject="RE: Change to Lock-Token"
id="11352BDEEB92CF119F3F00805F14F485026B7264@RED-44-MSG.dns.microsoft.com"
inreplyto="Change to Lock-Token"
expires="-1"


To:"'masinter@parc.xerox.com'"<masinter@parc.xerox.com>
Cc:w3c-dist-auth@w3.org

The idea has a lot of merit, but after I posted the change, I started
asking myself "why should Lock Tokens not be e-tags?" One problem I see
is that there is a difference between e-tags and lock tokens. For
example, if I have a shared or advisory lock (they are coming...), I
want to continue testing for my lock independently of changes to the
resource. The resource may change but my lock is still there.
Furthermore a server may have different mechanisms for assigning lock
tokens and e-tags. What is really needed is a way to use the if-match
header for multiple state tokens. In fact I am beginning to think that
keeping lock tokens as a token and make them URIs is the way to go. That
way the server can quickly determine that something that is not an e-tag
has been put in the if-match header and the URI will tell the server
what state token it is looking at.

All this having been said, I have to admit I am running on instinct.
Near as I can tell, I can't come up with a compelling reason why lock
tokens shouldn't be e-tags. 

Yaron

> -----Original Message-----
> From:Larry Masinter [SMTP:masinter@parc.xerox.com]
> Sent:Sunday, March 23, 1997 9:12 PM
> To:Yaron Goland
> Cc:w3c-dist-auth@w3.org
> Subject:Re: Change to Lock-Token
> 
> Yaron Goland wrote:
> > 
> > As I was working through versioning I realized I had made a mistake
> in
> > specifying the Lock-Token header. I want lock-tokens to be
> > quoted-strings, instead of tokens, so they can be used anywhere an
> e-tag
> > may be used.
> >                 Yaron
> > 
> > Lock-Token Header
> > 
> > LockToken = "Lock-Token" ":" quoted-string CRLF
> > 
> > The Lock-Token may be used anywhere that an e-tag may be used. So
> > Lock-Tokens may be used in if-match calls to indicate that the
> request
> > may only proceed if the lock is still in force.
> > The LockToken header may never appear in the same request as a
> Lock-Info
> > header.
> 
> If a lock-token quacks like an etag, why isn't an etag?
> 
> Wouldn't it be simpler just to say "you can lock something, 
> and you get back the etag of the thing you locked"?
> 
> --
> http://www.parc.xerox.com



