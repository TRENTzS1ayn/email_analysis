docno="lists-038-6239233"
received="Thu Feb 12 22:12:46 1998"
isoreceived="19980213031246"
sent="Thu, 12 Feb 1998 19:12:26 -0800"
isosent="19980213031226"
name="Yaron Goland"
email="yarong@microsoft.com"
subject="RE: 5.5 Write Locks and COPY/MOVE"
id="3FF8121C9B6DD111812100805F31FC0D0113C8D9@red-msg-59.dns.microsoft.com"
inreplyto="5.5 Write Locks and COPY/MOVE"
expires="-1"


To:"'Jason Crawford'"<ccjason@us.ibm.com>,w3c-dist-auth@w3.org

No, there is no way to request that the move be atomic. Although, as always,
one could always add it in an extension spec. The rational behind the
decision was that we looked at the various systems in the world and came to
the conclusion that almost no one could actually handle an atomic move.
However there is a solution for your concern about a move deleting something
at the destination. The overwrite header controls MOVE's behavior such that
if Overwrite is set to "F" and if there is something at the destination then
the move will fail.

Also as a side note, DOS MOVE is not atomic. The reason it looked atomic is
that if there was anything at the destination then it would just fail, so
when it succeeded it meant it was copying into "virgin" territory. However
if there was an error while moving nothing was "moved back". Rather you
would get an error back and the system would be in an inconsistent state,
with some files moved and some not.

Yaron

> -----Original Message-----
> From:Jason Crawford [SMTP:ccjason@us.ibm.com]
> Sent:Thursday, February 12, 1998 12:01 PM
> To:w3c-dist-auth@w3.org
> Subject:RE: 5.5 Write Locks and COPY/MOVE
> 
> This conversation has inspired me to finally speak up about MOVE.
> 
> Could someone point me to the discusion of the rationale for designing the
> MOVE
> method so that it is not atomic.  By atomic, I mean that it either fully
> succeeds or fully fails.  -- I come from the mindset of DOS and Windows
> The
> DOS MOVE command (which can be used to move a directory tree by just
> moving the
> directory at the root of the tree) is my mental model of "move" and I feel
> that
> WebDAV's "MOVE" seems a lot like a variant of XCOPY /S followed my a
> variant of
> DELTREE.   (My apologies to those folks who aren't familiar with these DOS
> commands.)  -- In the current WebDAV draft, is there a way to request a
> server
> do the MOVE atomically?
> 
> I guess I also find the possibility that the move can destroy something at
> the
> destination to be unsettling.  Once again, DOS/Windows is my model.  The
> drag/drop GUI's that I use are also my model... and those UI's can be
> expected
> to be used in authoring clients.    Of course, as far as I know, this
> behavior
> can be achieved with the current protocol with some extra steps taken by
> the
> authoring client code.  Right?
> 
> Thanks,
> 
> J.



