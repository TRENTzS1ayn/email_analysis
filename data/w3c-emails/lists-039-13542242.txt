docno="lists-039-13542242"
received="Thu Apr 13 10:01:09 2000"
isoreceived="20000413140109"
sent="Thu, 13 Apr 2000 09:51:30 -0400"
isosent="20000413135130"
name="jamsden@us.ibm.com"
email="jamsden@us.ibm.com"
subject="Re: Puzzle: DELETE of a locked collection"
id="852568C0.004C2030.00@d54mta03.raleigh.ibm.com"
charset="us-ascii"
inreplyto="Puzzle: DELETE of a locked collection"
expires="-1"

To:w3c-dist-auth@w3c.org




I guess it depends on what it means to delete a collection with a depth
infinity lock. You could specify a tagged list in the If header containing
a token for A and B. Then when deleting B, you'll get a match on the lock
tokin in the tagged If header. So the question is, will you also have to
provide tagged lock tokens for all the files in B in order to match on
them, or is the match implicit because the match occurred on the same lock
token on the parent collection. I don't know the answer. DAV4J would
probably fail unless you had all the locktokens for all the items  to be
deleted in tagged If headers. That's because 1) you can't mix tagged and
non-tagged lists in the same If header and 2) if a tag is specified, it
must match.



|--------+---------------------------->
|        |          Greg Stein        |
|        |          <gstein@lyra.org> |
|        |          Sent by:          |
|        |          w3c-dist-auth-requ|
|        |          est@w3.org        |
|        |                            |
|        |                            |
|        |          04/13/2000 07:51  |
|        |          AM                |
|        |                            |
|--------+---------------------------->
  >-----------------------------------------------------------------------|
  |                                                                       |
  |       To:     w3c-dist-auth@w3.org                                    |
  |       cc:                                                             |
  |       Subject:     Puzzle: DELETE of a locked collection              |
  >-----------------------------------------------------------------------|




Consider the following directory structure:

  Collection         [locked with token A, depth=0]
   \
    SubCollection    [locked with token B, depth=infinity]
     \
      File1
      File2          [these inherit token B]
      ...
      FileN


Now, how do you delete SubCollection?

Note that you must provide token A to remove SubCollection from
Collection. Also, you must provide token B for SubCollection *and*
File1..N.

What's the IF: header look like?

(presume that you cannot delineate all the (recursive) members of
 SubCollection and insert them *all* into the IF: header)

I can't see a way to do it. Normally, no-tag-lists are used for specifying
locks for a hierarchy. But you must use a tagged-list to specify token A.

Ideas?

Cheers,
-g

--
Greg Stein, http://www.lyra.org/



