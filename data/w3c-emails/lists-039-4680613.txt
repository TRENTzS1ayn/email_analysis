docno="lists-039-4680613"
received="Mon Mar  8 18:07:19 1999"
isoreceived="19990308230719"
sent="Mon, 08 Mar 1999 15:03:34 -0800"
isosent="19990308230334"
name="Max Rible"
email="max@glyphica.com"
subject="Advanced collections and ordering"
id="4.1.19990308145112.00a93220@shell7.ba.best.com"
charset="us-ascii"
expires="-1"


To:w3c-dist-auth@w3.org

As currently specified, the advanced collections protocol does not cover
the case of specifying the Position header for an entity in an ordered
collection in the case that performing this operation would break the
rules of ordering for that collection.

Consider a collection created through

MKCOL /foo HTTP/1.1
Host: www.quux.com
Ordered: <http://www.webdav.org/standards/collectionOrder/alphabetical.xml>

that contains the elements A.html, B.pdf, and C.txt.  (Assume that
the specification of order for the collection means "sort alphabetically".)
Any PROPFIND on the collection should yield elements in the order
A.html, B.pdf, and C.txt.

If you then add an element to the collection:

MKREF /foo/Z.ref HTTP/1.1
Host: www.quux.com
Ref-Target: <http://www.webdav.org/>
Position: First

you are requesting that the collection-- which is defined to sort its
entries alphabetically-- return Z.ref, A.html, B.pdf, and C.txt, in
that order!  This could be rather surprising.

It seems to me that this should either 
(a) fail with 409 Conflict, since it is impossible to specify a position
    when there are sorting rules in order
(b) fail with 409 Conflict, since the new entry conflicts with the 
    ordering of the collection-- Position: Last would have resulted
    in 204 Created
or 
(c) change the ordering of the collection to DAV:custom such that 
    the ordering is Z.ref, A.html, B.pdf, and C.txt.

I am inclined toward (a), for ease of implementation.  Changing a
collection from ordered to unordered is something that probably should
not be done lightly.  If someone really wants to change the
ordering, they can PROPPATCH the DAV:orderingtype to DAV:custom
and ORDERPATCH it from there.  (It might be good to specify that
a change of the DAV:orderingtype to DAV:custom from any other
value should preserve the ordering that was previously evident.)

-- 
%% Max Rible %% max@glyphica.com %% http://www.amurgsval.org/~slothman/ %%
%% "Before enlightenment:  sharpen claws, catch mice.                   %%
%%  After enlightenment:  sharpen claws, catch mice."            - me   %%



