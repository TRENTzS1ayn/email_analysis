docno="lists-040-0591910"
received="Thu Feb  3 17:20:39 2000"
isoreceived="20000203222039"
sent="Thu, 3 Feb 2000 17:20:37 -0500"
isosent="20000203222037"
name="Geoffrey M. Clemm"
email="geoffrey.clemm@rational.com"
subject="Re: 423 Locked"
id="10002032220.AA02585@tantalum"
inreplyto="8525687A.0060BD3F.00&#64;d54mta03.raleigh.ibm.com"
expires="-1"


To:w3c-dist-auth@w3.org


   From: jamsden@us.ibm.com

   I'm trying to solve a different problem than the one you reference below.
   I'm not worried about hijacking someone else's lock, what I want is just
   some way to get the lock tokens for the resources *I* have locked so I
   don't have to hang on to them in my client application.

I assume by "I" and "someone else", you mean two different clients
(which may or may not be working on behalf of the same principal).
Since the client that took out the lock would have to remember what
the URL of the resource was, it would seem rather bizarre to not
store the lock-token in the same data structure as well.  That's what
in process memory is for (:-).

Cheers,
Geoff

   "Geoffrey M. Clemm" <geoffrey.clemm@rational.com> on 02/03/2000 11:03:26 AM

   What Jim is asking for is a way for a client to find out "is my
   current principal the same as the principal that took out the lock"
   *without* asking its user.

   I do not believe that is what Richard was asking for, but rather
   wanted information to give to the user about who currently has
   that resource locked (i.e. the information in the DAV:owner field).
   Richard: Is this interpretation correct?

   Since a client should *always* ask its user before doing
   anything with a lock token from some other client, I maintain
   that the currently defined DAV:owner field is adequate for
   correct usage of lock tokens, and no DAV:principal field
   should be defined.

      From: jamsden@us.ibm.com

      There is a DAV property called DAV:lockdiscovery which contains a
      DAV:activelock element which contains, among other things, a DAV:owner
      field describing the owner of the lock. The WebDAV spec does not define
   the
      content of the DAV:owner element, it only suggests that it should
   describe
      the owner of the lock in some way that another user could contact the
      owner. Unfortunately, there is no element in DAV:activelock that
   specifies
      the actual princapal that took out the lock. I believe this is a bug
   that
      requires all clients to maintain their lock tokens in some other
   redundant
      repository. This issue has been open for over a year. I hope it gets
      addressed and resolved as part of the ongoing effort to clarify WebDAV
      locking semantics and protocol.


      "Rickard Falk" <rickard.falk@excosoft.se>@w3.org on 02/03/2000 03:46:52
   AM

      If a resource is locked with a exclusive lock, and another user tries to
      lock if. The response then is 423 Locked. But, is there any way for the
      client to know who owns the lock?
      I would like the response to look something like this :
      421 Locked
      Date: ...
      Server: ...
      Connection: ...
      LockOwner : user
      LockDate  : date
      LockType  : exclusive
      LockedUntil : date         // if specified when locked

      Comments?

      /Rickard



