docno="lists-040-11675927"
received="Thu Jul  5 02:31:12 2001"
isoreceived="20010705063112"
sent="Thu, 05 Jul 2001 08:31:04 +0200"
isosent="20010705063104"
name="Steinar Bang"
email="sb@metis.no"
subject="Re: WebDAV and write access discovery"
id="m38zi3ki31.fsf@viffer.computas.no"
charset="us-ascii"
inreplyto="3906C56A7BD1F54593344C05BD1374B1018E2502&#64;SUS-MA1IT01"
expires="-1"

To:w3c-dist-auth@w3.org


>>>>> "Clemm, Geoff" <gclemm@rational.com>:

> You are not allowed to send a Expect request header if you do not
> intend to send a request body (Section 8.2.3):

>         A client MUST NOT send an Expect request-header field (section
>         14.20) with the "100-continue" expectation if it does not intend
>         to send a request body.

Yes, I missed that.  Thanx for the clarification.

> An early terminated PUT request (i.e. without a message body) should
> be treated by the server as a failure by the client, and not as a
> 0-length content update.  But the overhead of having the client
> prematurely terminate a connection (to get the PUT to fail) or wait
> for the server to timeout the connection, would make it unadvisable
> to use this as a techique for finding out whether the resource is
> readonly.

I agree.

> When the ACL protocol is implemented, that would be the best way to
> determine whether a resource is readonly.  If it is a Class 2 DAV
> server, trying to get a write lock might be something to try,

That was my next idea, also.

After I have done a GET, immediately start a LOCK on the same
resource, and then either UNLOCK the lock (to try to grab it again, if
I ever wish to attempt a PUT), or let it time out (and refresh it
before a PUT).

Yet another approach would be to do a PROPFIND on the resource, to see
if it has any locks.  Or aren't lock tokens listed as properties?
(One tricky bit here would be to map from the HREF to the authenticated
user, but presumably I would know what URL I set myself.)

I wonder what eg. Word 2000 does?  Does it mark everything as R/W, and
just PUT, and then report a failure?

> but I don't know whether or not servers tend to fail requests to get
> write-locks on read-only resources.

I thought 8.10.7 of RFC 2518 would require them to return a 412 in
this case (ie. "lock token not enforcable on this resource")...?
<http://andrew2.andrew.cmu.edu/rfc/rfc2518.html#sec-8.10.7>



