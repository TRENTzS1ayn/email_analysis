docno="lists-040-3352548"
received="Tue Jul 11 05:51:43 2000"
isoreceived="20000711095143"
sent="Tue, 11 Jul 2000 11:51:35 +0200"
isosent="20000711095135"
name="Rickard Falk"
email="rickard.falk@excosoft.se"
subject="RE: Refreshing locks"
id="NDBBLFJCCKNFKHAFJDCDCEJNCDAA.rickard.falk@excosoft.se"
charset="iso-8859-1"
inreplyto="20000711022208.Z29590&#64;lyra.org"
expires="-1"

To:"Greg Stein"<gstein@lyra.org>
Cc:<w3c-dist-auth@w3.org>


I know that I have to send the If header, but where does the spec. say that a refresh request must be sent without the body? In
chapter 7.8 it only say that the client 'may' send it without the body, not that a lock refresh must be without a body. It states
that a Lock request without a body must only be used as a refresh lock request.

Is my interpretation wrong?

What I would like to se is something like:
'A client MUST NOT submit a body on a LOCK request, that is intended to "refresh" a lock.'

/Rickard Falk

> -----Original Message-----
> From: Greg Stein [mailto:gstein@lyra.org]
> Sent: den 11 juli 2000 11:22
> To: Rickard Falk
> Cc: w3c-dist-auth@w3.org
> Subject: Re: Refreshing locks
>
>
> On Tue, Jul 11, 2000 at 10:32:05AM +0200, Rickard Falk wrote:
> > When I'm about to refresh a lock, can I then send exactly the same request as I sent when I locked the resource? I've tried this
> > with IIS-5 and Sharemation, but the response I get is '423 Locked'. The only things that differs are, the If header and
> any cookies
> > that may have been set. According to the spec. I doesn't have to send exactly the same request, but it doesn't say that I can't.
> > To get it to work I excluded the body of the lock request, as the spec. say's I can.
> >
> > Chap 7.8 Refreshing Write Locks
> > 'However, a client may submit a LOCK method with an If header but without a body. This form of LOCK MUST only be used
> to "refresh" a
> > lock.'
> >
> > Can I rely on that if I send the Lock request without the body, that all servers will see this as a Lock refresh?
>
> Nope. You must supply the If: header which contains the locktokens of the
> locks that you wish to refresh. You must also submit an empty body to
> perform a refresh. If you supply a body, then the server will think you are
> attempting to create a new lock; if either of the locks are exclusive, then
> it will punt.
>
> Similar to IIS5 and Sharemation, mod_dav (and Apache 2.0 :-) will return a
> 423 if you attempt to LOCK a resource without supplying the necessary If:
> header and empty body on a refresh.
>
> Cheers,
> -g
>
> --
> Greg Stein, http://www.lyra.org/
>



