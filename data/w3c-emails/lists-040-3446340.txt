docno="lists-040-3446340"
received="Fri Jul 28 18:15:43 2000"
isoreceived="20000728221543"
sent="Fri, 28 Jul 2000 15:10:39 -0700"
isosent="20000728221039"
name="Jim Whitehead"
email="ejw@ics.uci.edu"
subject="RE: How do I set getlastmodified using PROPPATCH ?"
id="NDBBIKLAGLCOPGKGADOJCEOKDHAA.ejw@ics.uci.edu"
charset="iso-8859-1"
inreplyto="003e01bff82b$f41ebac0$fed670d8&#64;concentric.net"
expires="-1"

To: John Glavin<jglavin@riverfrontsoftware.com>, WebDAV WG<w3c-dist-auth@w3.org>




> -----Original Message-----
> From: w3c-dist-auth-request@w3.org
> [mailto:w3c-dist-auth-request@w3.org]On Behalf Of John Glavin
> Sent: Thursday, July 27, 2000 5:37 PM
> To: w3c-dist-auth@w3.org
> Subject: Re: How do I set getlastmodified using PROPPATCH ?
>
>

> I was thinking about using a custom property to save the modified time
> myself, however after trying this on several servers.  Most of
> them report a status of
>
> "409 (Conflict) - The client has provided a value whose semantics are not
> appropriate for the property. This includes trying to set read- only
> properties."
>
> Is this error because I haven't been granted access on the server to do a
> PROPPATCH, or perhaps I haven't formatted the request properly ?

Well, I suspect that, for the Zope server, the "manage properties"
permission is not set for the resource, since they claim support for
PROPPATCH.  You should ask them directly about this, at webdav@zope.org. As
for Driveway and MyDocsOnline, I suspect that they have simply not
implemented PROPPATCH, since the main motivation was to support Web Folders,
which does not require PROPPATCH. You could send them email directly to
confirm this.

> Here is what my request looked like.
>
> PROPPATCH /test.txt HTTP/1.1
> ....
> ....
>
> <?xml version="1.0" encoding="utf-8" ?>
>   <D:propertyupdate xmlns:D="DAV:">
>   <D:set>
>           <D:prop>
>                   <D:webdrivemodtime>Here is my property
> value</D:webdrivemodtime>
>           </D:prop>
>      </D:set>
>    </D:propertyupdate>

This request looks well-formed to me.  As a style note, the DAV: namespace
is intended for use by the WebDAV protocol -- new applications should use a
non-DAV namespace.  For you, I recommend using
"http://www.riverfrontsoftware.com/", and hence your request would look
like:

PROPPATCH /test.txt HTTP/1.1
....
....

<?xml version="1.0" encoding="utf-8" ?>
  <D:propertyupdate xmlns:D="DAV:"
xmlns:R="http://www.riverfrontsoftware.com/">
  <D:set>
          <D:prop>
                  <R:webdrivemodtime>Here is my property
value</R:webdrivemodtime>
          </D:prop>
     </D:set>
  </D:propertyupdate>


Of course, you could choose any URL for the namespace, and any prefix
character that was unique within the message.

- Jim



