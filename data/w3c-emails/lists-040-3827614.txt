docno="lists-040-3827614"
received="Thu Oct 19 17:03:30 2000"
isoreceived="20001019210330"
sent="Thu, 19 Oct 2000 14:00:29 -0700"
isosent="20001019210029"
name="Greg Stein"
email="gstein@lyra.org"
subject="Re: WebFolder does not recognize my WebDAV server"
id="20001019140029.A739@lyra.org"
charset="us-ascii"
inreplyto="077097E85A6BD3119E910800062786A90125A286&#64;muc-mail5.ixos.de"
expires="-1"

To: Anton Schegg<anton.schegg@ixos.de>
Cc:"'w3c-dist-auth@w3.org'"<w3c-dist-auth@w3.org>


Oh, geez. What has this list come to. Three replies, and three incorrect (or
close to it) answers...

A1: "respond with HTTP/1.1"
--> well, this is obviously not a prerequisite because we see that Web
    Folders *does* end up doing a PROPFIND. So it obviously doesn't mind.

A2: "use 'DAV :1.1' and 'MS-Author-Via: DAV'"
--> the former should be the 'DAV: 1,2' header and the latter is not
    required (it simply optimizes out a round trip). We also see in the log
    below that Anton returns those for the /DAV directory.

A3: "return MKCOL and PROPFIND in the OPTIONS response"
--> he is returning PROPFIND (but not MKCOL). Web Folders doesn't need the
    MKCOL... it already believes there is a DAV server there by the simple
    evidence that it issues a PROPFIND.


Sigh. Yes, using HTTP/1.1 in the response is a good idea and is technically
required (and it will help with connection persistence and request
pipelining). But it isn't a precondition. It would be good to return MKCOL,
too. I'd also suggest getting rid of that Status: header (it's useless).

I believe your real problem exists in the Multistatus response. You are
using the "DAV" namespace *prefix*, but have not placed the elements into
the "DAV:" *namespace*. Change your outermost element to:

<DAV:multistatus xmlns:DAV="DAV:">

That should hopefully do the trick. I haven't thoroughly analyzed the body
of your multistatus, but a rough glance seems to show it is okay.

Also, have you seen the Slide project? http://jakarta.apache.org/slide/
Or the Magi-DAV project? http://magi.endeavors.org/

Cheers,
-g

On Thu, Oct 19, 2000 at 04:53:39PM +0200, Anton Schegg wrote:
>...
> ************************************
> Establish new connection
> ************************************
> ------------------------------------
> INFO: client -> server
> ------------------------------------
> PROPFIND /DAV HTTP/1.1
> Accept-Language: de, en-us;q=0.5
> Content-Type: text/xml
> Translate: f
> Content-Length: 0
> Depth: 0
> User-Agent: Microsoft Data Access Internet Publishing Provider DAV 1.1
> Host: muc01134:8888
> Connection: Keep-Alive
> 
> ------------------------------------
> INFO: server -> client
> ------------------------------------
> HTTP/1.0 207 Multi-Status
> ------------------------------------
> INFO: server -> client
> ------------------------------------
> Status: 207
> ------------------------------------
> INFO: server -> client
> ------------------------------------
> Content-Type: text/xml; charset="utf-8"
> ------------------------------------
> INFO: server -> client
> ------------------------------------
> Servlet-Engine: Tomcat Web Server/3.1 (JSP 1.1; Servlet 2.2; Java 1.1.4;
> Windows NT 5.0 x86; java.vendor=Microsoft Corp.)
> Date: Thu, 19 Oct 2000 14:59:59 GMT+00:00
> Content-Language: en
> 
> <?xml version="1.0" encoding="UTF-8"?>
> <DAV:multistatus>
>     <DAV:response>
>         <DAV:href>/DAV/</DAV:href>
>         <DAV:propstat>
>             <DAV:prop>
>                 <DAV:creationdate>2000-08-21T09:21:17Z</DAV:creationdate>
>                 <DAV:getlastmodified>Wed, 13 Sep 2000 09:40:34
> GMT</DAV:getlastmodified>
>                 <DAV:getetag>&quot;0-0-39bf4b92&quot;</DAV:getetag>
>                 <DAV:supportedlock>
>                     <DAV:lockentry>
>                         <DAV:lockscope>
>                             <DAV:exclusive/>
>                         </DAV:lockscope>
>                         <DAV:locktype>
>                             <DAV:write/>
>                         </DAV:locktype>
>                     </DAV:lockentry>
>                     <DAV:lockentry>
>                         <DAV:lockscope>
>                             <DAV:shared/>
>                         </DAV:lockscope>
>                         <DAV:locktype>
>                             <DAV:write/>
>                         </DAV:locktype>
>                     </DAV:lockentry>
>                 </DAV:supportedlock>
>                 <DAV:lockdiscovery/>
>                 <DAV:resourcetype>
>                     <DAV:collection/>
>                 </DAV:resourcetype>
>  
> <DAV:getcontenttype>httpd/unix-directory</DAV:getcontenttype>
>             </DAV:prop>
>             <DAV:status>HTTP/1.1 200 OK</DAV:status>
>         </DAV:propstat>
>     </DAV:response>
> </DAV:multistatus>
> sender has closed connection: server -> client
> sender has closed connection: client -> server

-- 
Greg Stein, http://www.lyra.org/



