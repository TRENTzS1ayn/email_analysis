docno="lists-041-1876931"
received="Thu Apr 25 02:38:38 2002"
isoreceived="20020425063838"
sent="Wed, 24 Apr 2002 23:39:45 -0700"
isosent="20020425063945"
name="Greg Stein"
email="gstein@lyra.org"
subject="etags in If: headers (was: 54th IETF Meeting Information, and RFC2518 open issues)"
id="20020424233944.A6025@lyra.org"
charset="us-ascii"
inreplyto="7BBFC815-5611-11D6-9959-00039384827E&#64;greenbytes.de"
expires="-1"

To:"Webdav WG (E-mail)"<w3c-dist-auth@w3c.org>


On Mon, Apr 22, 2002 at 06:53:34PM +0200, Stefan Eissing wrote:
> Am Montag den, 22. April 2002, um 18:36, schrieb Lisa Dusseault:
>...
> If headers with ETags do not add any value to the protocol. For
> GET rfc2616 already defines If-Match and friends. Since the ETag
> only captures content changes (property changes have undefined
> effect on ETags), IF headers for ETag lack a use case.

An etag in an If: header can be used to assert that a file has been
unchanged since you last fetched it. Specifically, that you still have the
locktoken *or* (you lost it and) it is unchanged.

This is to cover the case where lock a file, fetch it, and then attempt to
PUT the file back. The PUT should succeed if you have the locktoken *or* if
you lost your lock but the etag matches what you GET'd (thus: nobody else
changed it).

Arguably, the semantic could be manufactured with other combinations, but
I'd suggest that is your use case.

Cheers,
-g

-- 
Greg Stein, http://www.lyra.org/



