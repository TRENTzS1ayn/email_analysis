docno="lists-041-2880698"
received="Wed May 29 07:43:10 2002"
isoreceived="20020529114310"
sent="Wed, 29 May 2002 13:30:48 +0200"
isosent="20020529113048"
name="Stefan Eissing"
email="stefan.eissing@greenbytes.de"
subject="Re: Lightweight PROPFIND requests"
id="862701CA-72F7-11D6-AB6D-00039384827E@greenbytes.de"
charset="US-ASCII"
inreplyto="02D5A282-72A2-11D6-B08A-0003934B6A22&#64;apple.com"
expires="-1"

Cc:w3c-dist-auth@w3.org
To: Jim Luther<luther.j@apple.com>



That of course opens the question why DELETE on a collection
with Depth: 0 is forbidden. There seems to be a use case
for this and it is easy for a server to implement.

Jim, did you make any tests how servers respond to a Depth: 0
DELETE request?

//Stefan

Am Mittwoch den, 29. Mai 2002, um 03:18, schrieb Jim Luther:

> There are a few times when the Mac OS X WebDAV file system client 
> needs to use the PROPFIND method with "Depth: 1" on a collection 
> resource to determine if it contains any children resources. For 
> example, POSIX requires that my rmdir code must not delete a 
> directory (collection) unless it is empty. Since the WebDAV DELETE 
> method doesn't work that way (it deletes all children), my code 
> uses the PROPFIND method with "Depth: 1" to determine if the 
> DELETE method can be called on the empty collection, or if 
> ENOTEMPTY should be returned because the collection has children. 
> I don't need any properties from that PROPFIND, just the list of 
> children.
>
> I tried this:
>
> <?xml version="1.0" encoding="utf-8"?>
> <D:propfind xmlns:D="DAV:">
> <D:prop>
> </D:prop>
> </D:propfind>
>
> and it works with mod_dav. However (and this is my question), is 
> this legal by the rule <!ELEMENT prop ANY>? I looked through the 
> XML docs to see how ANY was defined but couldn't tell it allowed 
> an empty set.
>
> If that's illegal and I must I ask for at least one property, I'll 
> just ask for the resourcetype property since it looks like the 
> only property that MUST be defined for all DAV compliant resources 
> (all of the other DAV properties are shoulds, or are MUSTs under 
> certain conditions).
>
> Thanks,
>
> - Jim Luther
>
>



