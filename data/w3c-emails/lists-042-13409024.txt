docno="lists-042-13409024"
received="Fri Jun  4 11:39:58 2004"
isoreceived="20040604153958"
sent="Fri, 4 Jun 2004 11:38:44 -0400"
isosent="20040604153844"
name="Geoffrey M Clemm"
email="geoffrey.clemm@us.ibm.com"
subject="Re: LOCK error marshalling (lockdiscovery property included?)"
id="OF6AE8B649.A408831A-ON85256EA9.0055453B-85256EA9.0055F7D4@us.ibm.com"
charset="US-ASCII"
inreplyto="40C07D8C.5010902&#64;gmx.de"
expires="-1"

To:w3c-dist-auth@w3.org


I don't think anything needs to be changed here.
I'm not sure what you had in mind by saying
"it MUST be returned on successful execution",
since the whole point is to indicate what existing
lock caused the LOCK request to fail, i.e. this
property is returned only for the failure case.

WRT the marshalling, I agree that this is not a
consistent way of using the propstat syntax
(i.e. the status is not about the property,
but that was just a convenient place to put it).
So if nobody implements this,
we certainly could define a cleaner marshalling,
but if any client/server does implement it, then we
should leave it alone.

Cheers,
Geoff


Julian wrote on 06/04/2004 09:47:56 AM:

> RFC2518, section 8.10.10 
> (<http://greenbytes.de/tech/webdav/rfc2518.html#rfc.section.8.10.10>) 
> currently shows an example where the multistatus response body contains 
> a DAV:lockdiscovery property...:
> 
>     HTTP/1.1 207 Multi-Status
>     Content-Type: text/xml; charset="utf-8"
>     Content-Length: xxxx
> 
>     <?xml version="1.0" encoding="utf-8" ?>
>     <D:multistatus xmlns:D="DAV:">
>       <D:response>
>            <D:href>http://webdav.sb.aol.com/webdav/secret</D:href>
>            <D:status>HTTP/1.1 403 Forbidden</D:status>
>       </D:response>
>       <D:response>
>            <D:href>http://webdav.sb.aol.com/webdav/</D:href>
>            <D:propstat>
>                 <D:prop><D:lockdiscovery/></D:prop>
>                 <D:status>HTTP/1.1 424 Failed Dependency</D:status>
>            </D:propstat>
>       </D:response>
>     </D:multistatus>
> 
> The text then goes on...:
> 
> "Note also that the lockdiscovery property for the Request-URI has been 
> included as required."
> 
> This seems to address a requirement from 8.10.1:
> 
> "The response MUST contain the value of the lockdiscovery property in a 
> prop XML element."
> 
> (RFC2518bis-05 contains the same language).
> 
> Questions:
> 
> 1) What's the benefit to get the DAV:lockdiscovery property in case the 
> request fails? Shouldn't we just say that it MUST be returned on 
> successful method execution and leave it at that?
> 
> 2) Is anybody actually implementing this? Are there clients relying on 
> it? (I don't think so, but I'll check). If nobody is actually doing 
> this, we should remove that.
> 
> 3) *If* we want to keep this, we'll have to think about that example:
> 
>       <D:response>
>            <D:href>http://webdav.sb.aol.com/webdav/</D:href>
>            <D:propstat>
>                 <D:prop><D:lockdiscovery/></D:prop>
>                 <D:status>HTTP/1.1 424 Failed Dependency</D:status>
>            </D:propstat>
>       </D:response>
> 
> After all, the "424" status is on the resource itself, not the 
> DAV:lockdiscovery property. So it really would need to be....:
> 
>       <D:response>
>            <D:href>http://webdav.sb.aol.com/webdav/</D:href>
>            <D:status>HTTP/1.1 424 Failed Dependency</D:status>
>       </D:response>
> 
> ...and then we'd need a way to put in the DAV:lockdiscovery property in 
> a way that doesn't break the DTD for the response element.
> 
> 
> Feedback appreciated,
> 
> Julian
> 
> 
> 
> 
> -- 
> <green/>bytes GmbH -- http://www.greenbytes.de -- tel:+492512807760
> 



