docno="lists-042-3698420"
received="Tue Mar  4 19:16:06 2003"
isoreceived="20030305001606"
sent="Wed, 5 Mar 2003 01:15:28 +0100"
isosent="20030305001528"
name="Julian Reschke"
email="julian.reschke@gmx.de"
subject="RE: Move and Delete (was: bind draft issues)"
id="JIEGINCHMLABHJBIGKBCGEHCGKAA.julian.reschke@gmx.de"
charset="iso-8859-1"
inreplyto="E4F2D33B98DF7E4880884B9F0E6FDEE25ED6D0&#64;SUS-MA1IT01"
expires="-1"

To:"Clemm, Geoff"<gclemm@rational.com>,"WebDAV"<w3c-dist-auth@w3.org>



Geoff,

thanks for trying to come up with a scenario that benefits from the current
required semantics. Comments inline.

> From: w3c-dist-auth-request@w3.org
> [mailto:w3c-dist-auth-request@w3.org]On Behalf Of Clemm, Geoff
> Sent: Tuesday, March 04, 2003 12:34 AM
> To: WebDAV
> Subject: RE: Move and Delete (was: bind draft issues)
>
>
>
> "Best effort" deletion is forbidden by the bind protocol,
> because it can cause a DELETE in one collection to cause a change
> in another collection, and this kind of "deletion side effect"
> was something we explicitly were trying to avoid.  For example,
> suppose /henry/has-friend/jeff and /jim/has-friend/jeff
> were bindings to the same collection, JEFF, and JEFF has a binding
> named "wife" to a resource, MARI.  Now suppose henry gets mad
> at jeff, and issues a "DELETE /henry/has-friend/jeff" request.

In this case I'd just remove that binding.

The question where we disagree is about the required behaviour when the
collection binding is the last one, i.e. when the server is then free to
remove all internal members.

> But suppose at that moment someone else has a Depth:0 lock
> on the /henry/has-friend collection.  The result of a "best effort"
> deletion is the removal of the "wife" binding from JEFF.  That

Nope. I didn't say that.

> may be OK if you were just updating the information accessible
> from /henry (he isn't JEFF's friend anymore, and he's happy to
> purge as much information about JEFF as he can), but with multiple
> bindings, "best effort" deletion has now trashed the JEFF object
> in all the other contexts in which it is still visible (and the
> folks that still are his friends are still interested in that
> information).
>
> So we're not saying that "best effort deletion" is always a bad thing,
> but we are saying that "best effort deletion" is a bad thing when
> you care about multiple bindings to the same resource.

I'd rephrase that as "best effort deletion of internal members is a bad
thing when you aren't destroying the last binding to the collection". I
agree with that. Where I disagree is whether best effort deletion should be
allowed when the binding that is removed is the last binding to a
collection. In this particular case, I'd prefer to allow RFC2518 behaviour
(if we don't, I don't see how can sell the implementation to my customer
:-).

Julian

--
<green/>bytes GmbH -- http://www.greenbytes.de -- tel:+492512807760



