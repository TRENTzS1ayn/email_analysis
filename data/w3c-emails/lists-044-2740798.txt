docno="lists-044-2740798"
received="Thu Dec  2 23:51:21 1999"
isoreceived="19991203045121"
sent="Fri, 3 Dec 1999 13:50:39 +0900"
isosent="19991203045039"
name="TAMURA Kent"
email="kent@trl.ibm.co.jp"
subject="Comments for Transform"
id="199912030450.NAA13834@ns.trl.ibm.com"
charset="US-ASCII"
expires="-1"


To:w3c-ietf-xmldsig@w3.org


I have comments for Transform(s) in the 19991116 draft.

There are some types of information passed from/to Transform.  A
handling of `node-set' type, which is output of XPath, is not
defined neatly in the draft.  It seems that the draft says in
`5.6.3 XPath Filtering' that a node-set always can be treated as
an XML document.  But it is not true because an XML document
must have just one element, and a node-set may consist of more
than one element, or attributes, or character data.  We can not
implement the first characteristics in 5.6.3 based on XML
Infoset, that is, an XML processor does not provide information
of an XML declaration, a character encoding, and existence of
BOM in a document.


I propose to define types of information as the following.

................................................................
There are three types:
o Octet stream
o Character stream
o XML document (or single XML element)

o Transforms
IN: octet stream (for external resource), or
    XML document (an Object element, for embeded resource)
OUT: octet stream

o Encoding
IN: octet sequence
OUT: octet sequence

o C14n
IN: XML document
OUT: octet sequence

o XPath/XPointer
IN: XML document
OUT: XML document (if a node-set is single element), or
     character stream (if a node-set is single text node)
     Error (otherwise)

o XSLT
IN: XML document
OUT: XML document (if <xsl:output method="XML"/>)
     character stream (if <xsl:output method="TEXT"/>)

(Octet sequences generated by XSLT are implementation-dependent.
For instance, XSLT document can not control order of attributes.
So, a C14n is needed after XSLT Transfroms.)


If a Transform expects an XML document as the input but the
output of previous Transform is a octet sequence or a character
sequence, the sequence is parsed as an XML document.

If a Transform expects an octet sequence as the input but the
output of previous Transform is a character sequence, the
sequence is encoded with UTF-8.

We must use a C14n or an Encoding as the last Transform.
................................................................

-- 
TAMURA Kent @ Tokyo Research Laboratory, IBM



