docno="lists-045-11198090"
received="Fri Jul 27 18:09:01 2001"
isoreceived="20010727220901"
sent="Fri, 27 Jul 2001 18:08:43 -0400"
isosent="20010727220843"
name="Joseph M. Reagle Jr."
email="reagle@w3.org"
subject="RE: Section 4.3.3.2"
id="4.3.2.7.2.20010727180658.02f1a768@localhost"
charset="us-ascii"
inreplyto="7874BFCCD289A645B5CE3935769F0B520C3438&#64;tigger.PureEdge.com "
expires="-1"


To:"John Boyer"<JBoyer@PureEdge.com>
Cc:"Dournaee, Blake"<bdournaee@rsasecurity.com>,"Donald E. Eastlake 3rd"<dee3@torque.pothole.com>,<w3c-ietf-xmldsig@w3.org>,"Shi, Angela"<ashi@rsasecurity.com>

At 17:36 7/27/2001, John Boyer wrote:
>If C14N is called with a node-set, then it processes the node-set.  Only
>if it is called with an octet stream does it behave as if running an
>XPath that eliminates comments.  Therefore to retain the default
>behavior of stripping comments, we defined the processing model for
>References as stripping the comments out.

I propose adding text ([INS]) to the spec to make this more clear:

http://www.w3.org/Signature/Drafts/xmldsig-core/Overview.html#sec-Same-Document
$Revision: 1.104 $ on $Date: 2001/07/27 22:07:47 $

>4.3.3.3 Same-Document URI-References
>...
>  5. if the URI is not a full XPointer, then delete all comment nodes
>...
>The last step is performed for null URIs, barename XPointers and child 
>sequence
>XPointers. [INS:It's necessary because when [XML-C14N] is passed a 
>node-set, it
>processes the node-set as is: with or without comments. Only when it's called
>with an octet stream does it invoke it's own XPath expressions (default or
>without comments). Therefore to retain the default behavior of stripping
>comments when passed a nodeset, they are removed in the last step if the 
>URI is
>not a full XPointer. :INS]To retain comments while selecting an element by an
>identifier ID, use the following full XPointer: URI='#xpointer(id('ID'))'. To
>retain comments while selecting the entire document, use the following full
>XPointer: URI='#xpointer(/)'. This XPointer contains a simple XPath 
>expression
>that includes the root node, which the second to last step above replaces 
>with
>all nodes of the parse tree (all descendants, plus all attributes, plus all
>namespaces nodes).


--
Joseph Reagle Jr.                 http://www.w3.org/People/Reagle/
W3C Policy Analyst                mailto:reagle@w3.org
IETF/W3C XML-Signature Co-Chair   http://www.w3.org/Signature
W3C XML Encryption Chair          http://www.w3.org/Encryption/2001/



