docno="lists-045-1399608"
received="Wed Oct 11 11:45:37 2000"
isoreceived="20001011154537"
sent="Wed, 11 Oct 2000 08:45:20 -0700"
isosent="20001011154520"
name="John Boyer"
email="jboyer@PureEdge.com"
subject="RE: Tentative signature over C14N examples"
id="BFEDKCINEPLBDLODCODKAELDCFAA.jboyer@PureEdge.com"
charset="iso-8859-1"
inreplyto="E13jHwg-0004zo-00&#64;yog-sothoth"
expires="-1"

To:<merlin@baltimore.ie>
Cc:"XML DSig"<w3c-ietf-xmldsig@w3.org>


Hi Merlin,

No, a namespace node is not omitted if the element's parent contains the
same namespace declaration.  Please see [1]

[1] http://www.w3.org/TR/xpath#namespace-nodes

which says,

"This means that an element will have a namespace node:

for every attribute on the element whose name starts with xmlns:;

for every attribute on an ancestor element whose name starts xmlns: unless
the element itself or a nearer ancestor redeclares the prefix;

for an xmlns attribute, if the element or some ancestor has an xmlns
attribute, and the value of the xmlns attribute for the nearest such element
is non-empty
"

Thanks,
John Boyer
PureEdge Solutions Inc.

-----Original Message-----
From: merlin@baltimore.ie [mailto:merlin@baltimore.ie]
Sent: Wednesday, October 11, 2000 2:13 AM
To: John Boyer
Cc: XML DSig
Subject: Re: Tentative signature over C14N examples



Hi,

r/jboyer@PureEdge.com/2000.10.10/16:19:06
><merlin>
>The C14N of e3 should ?not? have xmlns:w3c.
></merlin>
>
><john>
>Actually, it should have the w3c namespace.  Each node receives namespace
>nodes for its entire namespace context, including those derived from its
>ancestors.
></john>

But are they not emitted from C14N if they are in scope and set for
the nearest parent in the node set?

Merlin

[new xpath]

<!-- Evaluate with declaration xmlns:ietf="http://www.ietf.org" -->

(//. | //@* | //namespace::*)
[
   self::ietf:e1 or (parent::ietf:e1 and not(self::text() or self::e2))
   or
   count(id("E3")|ancestor-or-self::node()) =
count(ancestor-or-self::node())
]

[document]

<!DOCTYPE doc [
<!ATTLIST e2 xml:space (default|preserve) 'preserve'>
<!ATTLIST e3 id ID #IMPLIED>
]>
<doc xmlns="http://www.ietf.org" xmlns:w3c="http://www.w3.org">
   <e1>
      <e2 xmlns="">
         <e3 id="E3"/>
      </e2>
   </e1>
</doc>

[suggested c14n]

<e1 xmlns="http://www.ietf.org" xmlns:w3c="http://www.w3.org"><e3 xmlns=""
xmlns:w3c="http://www.w3.org" id="E3" xml:space="preserve"></e3></e1>

[my c14n]

<e1 xmlns="http://www.ietf.org" xmlns:w3c="http://www.w3.org"><e3 xmlns=""
id="E3" xml:space="preserve"></e3></e1>



