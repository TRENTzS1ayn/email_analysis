docno="lists-045-15429867"
received="Thu Apr 18 07:16:51 2002"
isoreceived="20020418111651"
sent="Thu, 18 Apr 2002 13:03:32 +0200"
isosent="20020418110332"
name="Gregor Karlinger"
email="gregor.karlinger@iaik.at"
subject="Gregor's EXC-C14N interop samples (WAS:RE: Moving exc-c14n forward: your response is needed!)"
id="016f01c1e6c8$b5919830$68981b81@iaik.at"
charset="us-ascii"
inreplyto="20020418042738.1D39543BEA&#64;yog-sothoth.ie.baltimore.com"
expires="-1"

To:<merlin@baltimore.ie>,<reagle@w3.org>
Cc:"'TAMURA Kent'"<kent@trl.ibm.co.jp>,"'Ari Kermaier'"<arik@phaos.com>,"'Aleksey Sanin'"<aleksey@aleksey.com>,<w3c-ietf-xmldsig@w3.org>


Merlin,

[...]
> 3. I've tried Gregor's examples and, with one exception 
> (example 4, regular c14n, GrandChild, xml:fool should not be 
> there?), I think everything works.
[...]

I guess that you mean example 1 since this is the only one
bearing an xml:fool attribute.

According to the second paragraph of [1], section 2.4 I think
the appearance of xml:fool as attribute of element GrandChild
is correct:  

  The processing of an element node E MUST be modified
  slightly when an XPath node-set is given as input and the
  element's parent is omitted from the node-set. The method
  for processing the attribute axis of an element E in the
  node-set is enhanced. All element nodes along E's ancestor
  axis are examined for nearest occurrences of attributes in
  the xml namespace, such as xml:lang and xml:space (whether
  or not they are in the node-set).

For "GrandChild", this results in the list 
  - xml:foo (barbarossa)
  - xml:lang (ge)
  - xml:fool (barbar)
  - xml:space (default)

  From this list of
  attributes, remove any that are in E's attribute axis
  (whether or not they are in the node-set).

After this step, the following list remains:
  - xml:foo (barbarossa)
  - xml:lang (ge)
  - xml:fool (barbar)

  Then,
  lexicographically merge this attribute list with the nodes
  of E's attribute axis that are in the node-set. 

This step results in
  - xml:foo (barbarossa)
  - xml:lang (ge)
  - xml:fool (barbar)
  - xml:space (preserve)

  The result
  of visiting the attribute axis is computed by processing the
  attribute nodes in this merged attribute list.

Am I missing something here?

/Gregor

--
[1] http://www.w3.org/TR/2001/REC-xml-c14n-20010315.html 



