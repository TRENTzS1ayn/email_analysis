docno="lists-046-0059000"
received="Thu May 23 10:05:19 2002"
isoreceived="20020523140519"
sent="Thu, 23 May 2002 16:10:27 +0200"
isosent="20020523141027"
name="Christian Geuer-Pollmann"
email="geuer-pollmann@nue.et-inf.uni-siegen.de"
subject="Re: Error in merlin-iaikTests-two.tar.gz?"
id="27132514.1022170227@crypto"
charset="us-ascii"
inreplyto="Error in merlin-iaikTests-two.tar.gz?"
expires="-1"

To: merlin<merlin@baltimore.ie>
cc: Gregor Karlinger<gregor.karlinger@iaik.at>,w3c-ietf-xmldsig@w3.org,jboyer@PureEdge.com


Hi Merlin,

OK, I understood the writing. But now a question. Given the following 
document. The document subset is formed of the C and E element (//C | //E).

<a xml:a="xmla">
<b>
<C xml:C="xmlC">
<d xml:d="xmld">
<E>
</E>
</d>
</C>
</b>
</a>

Is the result after c14n this one? I read the c14n spec so:

<C xml:a="xmla" xml:C="xmlC">
<E xml:a="xmla" xml:C="xmlC" xml:d="xmld">
</E>
</C>

That's really strange. Intuitively, I'd guessed:

<C xml:a="xmla" xml:C="xmlC">
<E xml:d="xmld">
</E>
</C>

Christian

--On Donnerstag, 23. Mai 2002 14:24 +0100 merlin <merlin@baltimore.ie> 
wrote:

>
> Hi Christian,
>
> This is a feature of the c14n spec; see the second paragraph
> of 2.4:
>
>   The processing of an element node E MUST be modified slightly when an
>   XPath node-set is given as input and the element's parent is omitted
>   from the node-set. The method for processing the attribute axis of an
>   element E in the node-set is enhanced. All element nodes along E's
>   ancestor axis are examined for nearest occurrences of attributes in the
>   xml namespace, such as xml:lang and xml:space (whether or not they are
>   in the node-set). From this list of attributes, remove any that are in
>   E's attribute axis (whether or not they are in the node-set). Then,
>   lexicographically merge this attribute list with the nodes of E's
>   attribute axis that are in the node-set. The result of visiting the
>   attribute axis is computed by processing the attribute nodes in this
>   merged attribute list.
>
> This probably isn't aesthetically ideal; however, it doesn't
> cause any problems.
>
> Merlin
>
> r/geuer-pollmann@nue.et-inf.uni-siegen.de/2002.05.23/14:45:23
>> Hi Merlin,
>>
>> I have a problem to verify your signature.xml from
>> merlin-iaikTests-two.tar.gz which was for testing exclusive c14n: The
>> first  Reference (digest input in c14n-0.xml) seems to be wrong. The
>> others can be  verified. It looks like this (indentation added by me):
>>
>> - c14n-0.xml -----------------------
>>
>> <Parent xml:foo="bar"
>>        xml:fool="barbar"
>>        xml:lang="en"
>>        xml:space="default">
>>
>> <GrandChild xml:foo="barbarossa"
>>            xml:fool="barbar"
>>            xml:lang="ge"
>>            xml:space="preserve"></GrandChild>
>>
>> </Parent>
>> ----------------------------------
>>
>> This reference was simply the XPath transform (and implicit inclusive
>> c14n  omitting comments). What I see is that both the Parent and the
>> GrandChild  have a xml:fool="barbar" attribute while the GrandChild
>> shouldn't.
>>
>> Regards,
>> Christian



