docno="lists-046-11199589"
received="Mon Mar 22 04:37:16 2004"
isoreceived="20040322093716"
sent="Mon, 22 Mar 2004 10:36:50 +0200"
isosent="20040322083650"
name="Alexander Dimitrov"
email="alexander@progress.inetg.bg"
subject="SignedInfo"
id="000501c40fe8$d2d94460$a400000a@IT"
charset="koi8-r"
expires="-1"


To:<w3c-ietf-xmldsig@w3.org>


Hi,
I want to ask what is aactually signed?
I think that it is the SignedInfo element, but when I sign it the produced
result seemed incorrect?

Below is an example ot my SignedInfo element and a piece of code I use to
sign the data:

<SignedInfo><CanonicalizationMethod
Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"></Canonicalizati
onMethod><SignatureMethod
Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"></SignatureMethod><Re
ference URI="#MyDocument"><Transforms><Transform
Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"></Transfor
m><Transform
Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"></Transform></Tr
ansforms><DigestMethod
Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"></DigestMethod><DigestVal
ue>G4J2tuGKazay8hcG8hRBzQoobpg=</DigestValue></Reference></SignedInfo>

and the code is (C#):

CspParameters p=new CspParameters(1, c.PrivateKey.ProviderName,
c.PrivateKey.ContainerName);
key=new RSACryptoServiceProvider(p);
HashAlgorithm sha = new SHA1CryptoServiceProvider();
FileStream fs = new FileStream(@"D:\SignedInfoCanonical.xml.txt",
FileMode.Open);
byte[] bytes = key.SignData(fs, sha);
char[] chars = new char[500];
Convert.ToBase64CharArray(bytes, 0, bytes.Length, chars, 0);
str = new String(chars);
Console.Out.WriteLine("Signature: " + str);



