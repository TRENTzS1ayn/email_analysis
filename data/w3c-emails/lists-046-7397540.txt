docno="lists-046-7397540"
received="Wed Dec  4 15:55:03 2002"
isoreceived="20021204205503"
sent="Wed, 4 Dec 2002 15:53:57 -0500"
isosent="20021204205357"
name="Joseph Reagle"
email="reagle@w3.org"
subject="Re: Exclusive C14N Error: Using #default in NMTOKENS"
id="200212041553.57642.reagle@w3.org"
charset="iso-8859-1"
inreplyto="7874BFCCD289A645B5CE3935769F0B52452854&#64;tigger.pureedge.com"
expires="-1"

To:"John Boyer"<JBoyer@PureEdge.com>,<w3c-ietf-xmldsig@w3.org>



On Wednesday 04 December 2002 12:57 pm, John Boyer wrote:
> The PrefixList is defined to be of type NMTOKENS, but the # character is
> not allowed according to the XML rule for NmToken.

Yep, it's a problem. I remember the "#default" went missing, we put it back 
in at the end and I suppose I never validated it an example at that time. 
I'm led to that conclusion because I can't find a separate DTD/schema since 
neither would be useful in-and-of themselves. However, that goof can also 
be of use to use now in that I think we can address this with an errata... 
We don't have to worry about fixing a "frozen" DTD and schema at specified 
URIs that folks are already using.

(We were simply borrowing XSLT '#default' and Schema '##other' conventions 
but on investigation their XML types are CDATA and Schema types are 
xsd:string.)

> This can be fixed in one of two ways:
>
> 1) Change from NMTOKENS to CDATA

CDATA in the DTD description; and xs:strings in the schema.

> 2) Change from # to :
>
> The latter approach is reasonable because namespace prefixes do not
> contain a colon.  This would allow us to keep the NMTOKENS content model.

This approach also *invalidates* existing instances, which I don't want to 
do. I think it is *much* more likely that there are instances using the 
syntax than relying upon a schema definition somewhere -- as I stated, we 
didn't even provide one on-line ourselves for this spec since it's so 
small/trivial and needs to be incorporated elsewhere.

I'd propose the following erratum:

http://www.w3.org/2002/07/xml-exc-c14n-errata#E02
  E02 2002-10-03 (Error)
          In section 4 Use in XML Security, the data type of the
          PrefixList attribute value is specified as NMTOKENS in both the
          DTD and Schema. This does not permit the occurrence of the
          '#default' token in the attribute value. Consequently, the type
          of this attribute value should be CDATA in a DTD and/or
          xsd:string in a XML Schema.



