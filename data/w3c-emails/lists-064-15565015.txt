docno="lists-064-15565015"
received="Mon Feb  4 10:35:50 2002"
isoreceived="20020204153550"
sent="Mon, 4 Feb 2002 15:33:47 -0000"
isosent="20020204153347"
name="Jim Ley"
email="jim@jibbering.com"
subject="Re: EARL in Page Valet"
id="004e01c1ad91$5749c4c0$ca969dc3@emedia.co.uk"
charset="iso-8859-1"
inreplyto="20020204031747.F8737-100000&#64;fenris.webthing.com"
expires="-1"


To:<w3c-wai-er-ig@w3.org>

"Nick Kew":
> On Sun, 3 Feb 2002, Nick Kew wrote:
>
> >
> > I've put up a second Page Valet+EARL prototype.  This one has dropped
the
> > XHTML, and is somewhat more considered.  It's still at
> > <URL:http://valet.webthing.com/page/wai.html>

> >     * Accessibility checks - reference an element in the normalised
> >       parse tree.  I'm aiming for a "fuzzy Xpointer" (as discussed
> >       in IRC), but there's some significant hacking to visval
> >       required first
> > http://foo.bar/docname.html#e12 (now)
> > http://foo.bar/docname.html#1/4/1 (goal)
>
> Goal now reached.  Jim's going to see if this is any use to him
> a clientside app.

Okay, done this...

The following:

javascript:
str='#1/2/1/1/3/4/2/1/1/3';arr=str.substr(1).split("/");el=document.docum
entElement; for (var i=1;i<arr.length;i++) { el=el.firstChild;for
(j=1;j<arr[i];j++) {el = el.nextSibling; while (el && el.nodeType != 1)
{el = el.nextSibling}
alert(el.nodeName+'\n\n'+el.parentNode.innerHTML)} }
alert(el.nodeName+'\n'+el.innerHTML+'\n\n'+el.outerHTML)

in the location bar of Mozilla and IE (and maybe others suck it and see.)
parse the fuzzypointer and alert the element's nodeName (TD or whatever)
the innerHTL - and in IE, the outerHTML.

Mozilla's don't seem to work too well (the above from the report on
www.showcaster.com ) gets it wrong, IE5.5 appears to do okay on all of
the www.showcaster.com ones.

For www.google.com, both Mozilla, and IE disagree with site-valet - but
then so do I !
Looking at "#1/2/1/2" that points to a <BR> yet the fuzzy pointer only
makes sense if it points at the table that comes after the BR.  - A bug
in Site-valets creation?

Jim.



