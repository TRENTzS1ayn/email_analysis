docno="lists-082-5162302"
received="Fri Nov 13 00:24:31 1998"
isoreceived="19981113052431"
sent="Thu, 12 Nov 1998 21:24:28 -0800 (PST)"
isosent="19981113052428"
name="Scott Luebking"
email="phoenixl@netcom.com"
subject="JAWS and Javascript"
id="199811130524.VAA15935@netcom3.netcom.com"
expires="-1"


To:w3c-wai-ua@w3.org

Hi,
I realize that this isn't totally on the subject of ua, but this problem
has taken up a lot of my past couple of days.  I was hoping that some
knowledgable fellow committee member might have some advice or
suggestions.

I've been working on a project to help blind chemists using web pages.
We're developing web pages which use javascript as part of the project.  
The web pages show up in explorer and netscape, but JAWS doesn't
seem to realize the pages are changing.  Is there something special
that needs to be done to get JAWS to work with javascript and browsers
oe have we stumbled across a JAWS bug?

Thanks very much,
Scott

Here are two test HTML files we've been using.

------  jaws_javascript_test.htm   ------------------------------------
<html>

<HEAD>

<TITLE>JAWS Test of Javascript</TITLE>

<link rev=made HREF="mailto:criptrip@aol.com">


<SCRIPT LANGUAGE="JavaScript"> 
<!--  hide script from old browsers

  //  initialize

  var versionInfo = "Version:  Test 0.0";

  var helpInfo
     = "Help\n"
      +  "COMMAND    ABBREVIATIONS    DESCRIPTION\n\n"
      +  "molecule   mo               Switch to page about molecule\n"
      +  "intro      in               Re-display intro\n"
      +  "\nEnd of help\n";

  var initialInfo
     = "This web page is a simple test of javascript.\n"
      +  "Type 'help' for list of commands.\n";


  var rootUrl = parent.location.href;
  rootUrl = rootUrl.substring(0, (rootUrl.lastIndexOf("/")+1));


  //  function to process commands in a string

  function commandFunc(str)
  {
    var cmdStr;
    var newComponent;
    var dateObj;

    document.demoform.outputfield.value = "";

    if(str != "")
    {
      cmdStr = str;

      if((cmdStr == "molecule")
        || (cmdStr == "mo"))
      {
        newPage("jaws_javascript_molecule.htm");
      }
      else if((cmdStr == "intro")
        || (cmdStr == "in"))
      {
        document.demoform.outputfield.value
          = document.demoform.outputfield.value + initialInfo;
      }
      else if(cmdStr == "help")
      {
        document.demoform.outputfield.value
          = document.demoform.outputfield.value + helpInfo;
      }
      else
      {
        addText("Command '" + cmdStr + "' is not known.\n");
      }
    }
  }


  //  function to add text to output field.

  function addText(text)
  {
    document.demoform.outputfield.value
        = document.demoform.outputfield.value + text;
  }


  //  function to change to a new page

  function newPage(pageSpecifier)
  {
    parent.location.href = rootUrl + pageSpecifier;
  }

// end hiding contents -->

</SCRIPT>


</HEAD>


<BODY>

<H1> JAWS Javascript test </H1>

<br>
<hr>

<p>

<form name=demoform
  onSubmit="commandFunc(demoform.commandfield.value); document.demoform.commandfield.value = ''; return false">

<strong>
    <label for="output-id"> Output:</label>
</strong>

<br>

<textarea name=outputfield id="output-id" rows=15 cols=70></textarea>
<SCRIPT LANGUAGE="JavaScript">
    document.demoform.outputfield.value = initialInfo;
</SCRIPT>

<P>

<strong>
    <label for="command-id"> Command: </label> &nbsp; &nbsp;
</strong>

<input type="text" name="commandfield" id="command-id" "value=""  size=67>
<SCRIPT LANGUAGE="JavaScript">
    document.demoform.commandfield.focus();
</SCRIPT>
</form>


<p>
<hr>
<address>
   Last updated: 12 November 1998
<BR>
   Please send comments to:  
   <a HREF="mailto:criptrip@aol.com">criptrip@aol.com</a>
</address>

</BODY>
</html>
------  jaws_javascript_molecule.htm   ------------------------------------
<html>

<HEAD>

<TITLE>JAWS Test of Javascript  -  Molecule Description</TITLE>

<link rev=made HREF="mailto:criptrip@aol.com">


<SCRIPT LANGUAGE="JavaScript"> 
<!--  hide script from old browsers

  //  initialize

  var versionInfo = "Version:  Test 0.0";

  var helpInfo
     = "Help\n"
      +  "COMMAND    ABBREVIATIONS    DESCRIPTION\n\n"
      +  "home       ho               Switch to home page\n"
      +  "intro      in               Re-display intro\n"
      +  "\nEnd of help\n";

  var initialInfo
     = "This web page is a simple test of javascript.\n"
      +  "This page is a dummy molecule description.\n"
      +  "Type 'help' for list of commands.\n";

  var rootUrl = parent.location.href;
  rootUrl = rootUrl.substring(0, (rootUrl.lastIndexOf("/")+1));


  //  function to process commands in a string

  function commandFunc(str)
  {
    var cmdStr;
    var newComponent;
    var dateObj;

    document.demoform.outputfield.value = "";

    if(str != "")
    {
      cmdStr = str;

      if((cmdStr == "home")
        || (cmdStr == "ho"))
      {
        newPage("jaws_javascript_test.htm");
      }
      else if((cmdStr == "intro")
        || (cmdStr == "in"))
      {
        document.demoform.outputfield.value
          = document.demoform.outputfield.value + initialInfo;
      }
      else if(cmdStr == "help")
      {
        document.demoform.outputfield.value
          = document.demoform.outputfield.value + helpInfo;
      }
      else
      {
        addText("Command '" + cmdStr + "' is not known.\n");
      }

    }
  }


  //  function to add text to output field.

  function addText(text)
  {
    document.demoform.outputfield.value
        = document.demoform.outputfield.value + text;
  }


  //  function to change to a new page

  function newPage(pageSpecifier)
  {
    parent.location.href = rootUrl + pageSpecifier;
  }

// end hiding contents -->

</SCRIPT>


</HEAD>


<BODY>

<H1> JAWS Javascript test -- Molecule Description</H1>

<br>
<hr>

<p>

<form name=demoform
  onSubmit="commandFunc(demoform.commandfield.value); document.demoform.commandfield.value = ''; return false">

<strong>
    <label for="output-id"> Output:</label>
</strong>

<br>

<textarea name=outputfield id="output-id" rows=15 cols=70></textarea>
<SCRIPT LANGUAGE="JavaScript">
    document.demoform.outputfield.value = initialInfo;
</SCRIPT>

<P>

<strong>
    <label for="command-id"> Command: </label> &nbsp; &nbsp;
</strong>

<input type="text" name="commandfield" id="command-id" "value=""  size=67>
<SCRIPT LANGUAGE="JavaScript">
    document.demoform.commandfield.focus();
</SCRIPT>
</form>


<p>
<hr>
<address>
   Last updated: 12 November 1998
<BR>
   Please send comments to:  
   <a HREF="mailto:criptrip@aol.com">criptrip@aol.com</a>
</address>

</BODY>
</html>



