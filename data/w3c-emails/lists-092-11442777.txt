docno="lists-092-11442777"
received="Wed Aug 21 04:32:27 2002"
isoreceived="20020821083227"
sent="Wed, 21 Aug 2002 10:36:09 +0200"
isosent="20020821083609"
name="Paul Cheyrou-lagreze"
email="Paul.Cheyrou-Lagreze@inrialpes.fr"
subject="&quot;Amaya and Javascript&quot;"
id="20020821103609.0eb8af45.Paul.Cheyrou-Lagreze@inrialpes.fr"
charset="US-ASCII"
inreplyto="39BE7CFF58D7D51181BE00D0B792024E03C495&#64;CHL1NT01"
expires="-1"

To:German.Gonzalez@britishcouncil.cl;rdm@docreate.net;;;;
Cc:www-amaya-dev@w3.org




Spidermonkey is the best choice for javascipt integration. Most interesting documents about embedding the engine areat http://lxr.mozilla.org/mozilla/source/js/src/README.html and http://www.mozilla.org/js/spidermonkey/tutorial.html

TODO LIST :

1) Integrate and Init the JS engine in Amaya. This require the integration of the engine in the Amaya compilation process, as a separate module.

2) Define the objects and properties Amaya's javascript have to use :
(The JSdefineObject and JSDefineProperties functions of the JS engine)

For that, read DOM specifications (http://www.w3c.org/DOM/DOMTR), then take a look at Thot Function listing ( http://www.w3.org/Amaya/User/APIman.toc.html ). You'll have to find all Thot functions that are to be used by the javascript engine as DOM manipulation properties. For Example : TtaGetFirstChild will be used for document.FirtsChild properties of the document Object. You might have to build some function that are missing by using the Thot API. => This is the HUGE part !

4) Execute predefined Scripts using external files loading on tests documents using a button or a key shorcut.

5) Modify Thot to get all javascript in documents loaded redirected to the engine (registering functions, events, calling functions...)

6) Integrate it in the Amaya main loop and in the canvas event loop (All keyboard and mouse events) and in some key Amaya steps (Documentloaded, etc...)

>Our CVS base is public and if someone is interested in working on integrating
>Javascript, s/he can count on us for technical advice.

For All developpement related discussions, use www-amaya-dev@w3.org

-Paul



