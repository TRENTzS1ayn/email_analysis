docno="lists-092-11466548"
received="Mon Aug 26 08:41:58 2002"
isoreceived="20020826124158"
sent="Mon, 26 Aug 2002 14:40:56 +0200"
isosent="20020826124056"
name="Laurent Carcone"
email="Laurent.Carcone@inrialpes.fr"
subject="Re: Infinite loop in html2thot.c"
id="20020826124056.B0B886F92@tux.inrialpes.fr"
charset="us-ascii"
inreplyto="20020825224113.GB710&#64;z273.org.uk"
expires="-1"

To:www-amaya-dev@w3.org



Hello Brian,

Thanks for your report and for your very good analysis.
I fixed the bug in the second way you mentionned (BlockInCharLevelElem check 
extended).

Laurent Carcone


> While browsing http://directory.google.com/, I found that a rather
> confused attempt at HTML there that causes Amaya to lock up.  I have
> attached a reduced test case.
> 
> The loop occurs in the CheckBlocksInCharElem function, where it
> continually attempts to check the same structure, around a character
> level element.  It appears that this happens because the same element is
> put into the ToBeChecked list twice, the first time by CheckSurrounding
> where it is created, and the second in XhtmlElementComplete.  Another
> element is entered into the list between these calls to
> BlockInCharLevelElem, preventing the duplicates check there from
> working.
> 
> Now, if XhtmlElementComplete is called for all elements, then the
> BlockInCharLevelElem call in CheckSurrounding can be removed, preventing
> the duplicate list entry and the loop.  Unfortunately, I am not familiar
> enough with the code to know if this is true.  Failing that, the check
> in BlockInCharLevelElem could be extended, although this would increase
> the computational complexity of the function.
> 
>   Brian Campbell
> 



