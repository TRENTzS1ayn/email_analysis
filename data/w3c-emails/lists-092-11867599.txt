docno="lists-092-11867599"
received="Fri Dec 20 10:17:20 2002"
isoreceived="20021220151720"
sent="Fri, 20 Dec 2002 14:34:33 +0100"
isosent="20021220133433"
name="Irene Vatton"
email="irene.vatton@inrialpes.fr"
subject="Re: How about the status of some code in editcommands.c?"
id="20021220143433.53e5dea4.irene.vatton@inrialpes.fr"
charset="US-ASCII"
inreplyto="200212161700.CAA09166&#64;jcraft.com"
expires="-1"

To:ymnk@jcraft.com(Atsuhiko Yamanaka)
Cc:www-amaya-dev@w3.org



On Tue, 17 Dec 2002 02:00:50 +0900
ymnk@jcraft.com (Atsuhiko Yamanaka) wrote:

> 
> Hi,
> 
> I'm interested in editing I18N documents in Amaya,
> but it seems there are problems because of the incompleteness of
> chunk of code in 'thotlib/editing/editcommands.c', which is disabled as
> follows,
> 
> #ifdef IV /* not enough stable */
>                           if  (script != ' ' && script != 'D' &&
>                                pSelBox && pSelBox->BxScript != EOS &&
>                                pSelBox->BxScript != script)
> 
> How about the current status of that code?

That development is stuck.

> I understand that Amaya developers are now working on the SVG support and
> if that code is in low priority for core developers, I will start to hack that.
> Is there somebody working on that at present?

Nobody is working on that at present. You could try to do that and I'll help
if you need.

> I also want to know the status of 'SplitForScript' in 
> 'thotlib/view/buildboxes.c'.  I think this function is the essential part
> of about chunk of code, but it seems to me that that function generates wrong
> box chain and I guess that this function will be starting point for that hack.

I don't think so:
There is 2 chains: BxNexChild that links boxes attached to an element and BxNext and
BxPrvious that link displayed boxes.
The box of the root element (pMainBox) is special:
pMainBox->BxPrevious points to the last displayed box
pMainBox->BxNext points to the first displayed box

> Any suggestions or comments are welcome.

The idea is to split the current box with the wrong script and insert a new box
with the right script. The problem is to update all current parameters.
Of course the function SplitForScript should be used.

Happy holiday season.
-- 
     Irene.



