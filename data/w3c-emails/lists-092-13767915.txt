docno="lists-092-13767915"
received="Fri Sep 20 03:56:40 2002"
isoreceived="20020920075640"
sent="Thu, 19 Sep 2002 16:04:06 -0400 (EDT)"
isosent="20020919200406"
name="Steve Dunham"
email="dunham@cse.msu.edu"
subject="PATCH: two issues with int -&gt; char casts."
id="3D8A2DCA.2020303@cse.msu.edu"
charset="us-ascii"
expires="-1"


To:www-amaya-dev@w3.org






Below is a patch for two instances where the output of getc() is
assigned to a char and subsequently compared to EOF (the integer -1).

This issue was caught by GCC on the ARM architecture, which has
unsigned chars.  (So the EOF comparison always fails.)


Thanks,
Steve Dunham
dunham@debian.org

(Please CC replies, I'm not on the mailing list.)

--- Amaya/amaya/trans.c.orig    2002-09-19 12:34:08.000000000 -0700
+++ Amaya/amaya/trans.c 2002-09-19 12:34:24.000000000 -0700
@@ -731,7 +731,7 @@
  static ThotBool ExportSubTree (Element subTree, Document doc)
  {
    char               tmpfilename[MAX_PATH];
-  char               charRead;
+  int                charRead;
    FILE              *inputFile = NULL;
    int                 len;
    ThotBool           result = FALSE;
--- Amaya/thotlib/image/xpmhandler.c.orig       2002-09-19 
12:35:38.000000000 -0700
+++ Amaya/thotlib/image/xpmhandler.c    2002-09-19 12:35:54.000000000 -0700
@@ -170,7 +170,7 @@
  ThotBool IsXpmFormat (char *fn)
  {
    FILE               *f;
-  char                c;
+  int                c;
    ThotBool            res;

    res = FALSE;



