docno="lists-092-15600987"
received="Wed Mar 31 03:31:05 2004"
isoreceived="20040331083105"
sent="Wed, 31 Mar 2004 10:29:16 +0200"
isosent="20040331082916"
name="Irene Vatton"
email="irene.vatton@inrialpes.fr"
subject="Re: Missing routines in the distribution."
id="20040331102916.49b6750b.irene.vatton@inrialpes.fr"
charset="ISO-8859-1"
inreplyto="200403301957.i2UJvGGA011825&#64;dolphin.adi.com"
expires="-1"

To:schulz@adi.com(Thomas Schulz)
Cc:www-amaya-dev@w3.org



On Tue, 30 Mar 2004 14:57:16 -0500 (EST)
schulz@adi.com (Thomas Schulz) wrote:

> 
> I am trying to build Amaya 8.3 on an AIX 4.1.5 R2 system using gcc version
> 3.3.2.  I am using gtk+ 1.2.10.  When the build gets to the point of trying
> to link bin/grm, there are several undefined references.  The show stopper
> is the following:
> 
> .../thotlib/libThotEditor.a(appdialogue.o)(.pr+0x2044):../../thotlib/dialogue/
> ppdialogue.c: undefined reference to `.TteLoadApplications()'

This function is included in the Amaya/obj/amaya/EDITORAPP.c file generated 
by the app compiler.
Are you sure you processed as explained in 
            http://www.w3.org/Amaya/User/Autoconf.html
1) create a new empty subdirectory obj
2) move into this subdirectory and execute "../configure"
3) launch "make"

> I have searched all files in the distribution and can not find any file that
> contains a subroutine named TteLoadApplications.
> 
> Other undefined references are ZoomIn and ZoomOut, but I have found these in
> amaya/init.c.  Note that init.c is not compiled at this point, and I have not
> yet tried to compile it.

These function calls are protected a _ZOOMSCROLL define and are in a module
that is not linked by grm and other compilers.

> Also undefined are the variables appArgc and appArgv.  As a workaround I
> added the following to  batch/grammar.c:
> 
> 710a711,712
> > int appArgc;
> > char **appArgv;
> 732a735,737
> > 
> > appArgc = argc;
> > appArgv = argv;

Normally you don't need to add any declaration.
It seems that some includes are not found.

> In addition I had to add the following to the link (g++) command line to get
> this far:
> 
> -lThotEditor -lgdk_imlib -lgtk -lgdk -lglib -lX11 -lXext -lpng -ljpeg
> -ltiff -lz -lungif -lgmodule

The configure should add necessary libraries -lThotKernel etc.

> 
> I tried getting the latest source from CVS, but I still could not find any
> file that had a subroutine named TteLoadApplications.  Any help would be
> appreciated.

Let me know if things work better or not.
     Irene.
-----
Ir?ne Vatton                     INRIA Rh?ne-Alpes
INRIA                               ZIRST
e-mail: Irene.Vatton@inria.fr       655 avenue de l'Europe
Tel.: +33 4 76 61 53 61             Montbonnot
Fax:  +33 4 76 61 52 07             38334 Saint Ismier Cedex - France



