docno="lists-092-7109191"
received="Mon Jan 10 06:39:00 2000"
isoreceived="20000110113900"
sent="Mon, 10 Jan 2000 12:38:47 +0100"
isosent="20000110113847"
name="Irene.Vatton@inrialpes.fr"
email="Irene.Vatton@inrialpes.fr"
subject="Re: scrolling; annotations"
id="200001101138.MAA10177@tahiti.inrialpes.fr"
charset="iso-8859-1"
inreplyto="scrolling; annotations"
expires="-1"


To:bglbv@my-deja.com
cc:www-amaya-dev@w3.org


Hi,

As that question concerns the development I answer in the www-amaya-dev list
instead of the www-amaya list.

In-reply-to: Your message of Sat, 08 Jan 2000 09:55:29 -0500."
             <20000108143400.993.qmail@my-deja.com> 
> I've had trouble with Amaya going into an infinite loop when I hit one of the
> arrow keys in the structure view. I suspect the problem is in the routine
> LocateLeafBox (thotlib/editing/textcommands.c) where the routines TtcLineUp,
> TtcLineDown, TtcScrollLeft, TtcScrollRight are always called with the second
> argument equal to 1, regardless of the value of FrameTable[frame].FrView .
> 
> For one thing, that 1 is formally wrong since those routines take an argument
> of type View and 1 is a literal of type int. At the very least it should be
> replaced with a symbolic designation for the formatted view, if the formatted
> view is intended (which I don't even think it is).
> 
> For another, I just patched my copy of the source code and tested the result,
> and it seems to behave much better. I'm composing this message offline, so I
> can't run a "cvs diff -c" on the relevant file until after this message gets
> sent. But it amounts to
>    View view;
>    view = FrameTable[frame].FrView;
> and replacing those (doc, 1) with (doc, view).

You're right, this is a bug but I propose a different fix.
The caller function knows the view and just has to pass the right view number.
I fixed that bug in the CVS base.

> ----------
> Also, I hope Jos? Kahan and any other interested parties have noticed that
> the latest annotlib changes won't compile. I had to reconfigure with
> --disable-annot (which is OK for me, since I haven't actually tried the
> annotation feature yet).
> 

OK, he will fix the problem as soon as possible.

  Irene.



