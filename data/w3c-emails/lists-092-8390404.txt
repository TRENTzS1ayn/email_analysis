docno="lists-092-8390404"
received="Tue May 23 04:30:08 2000"
isoreceived="20000523083008"
sent="Mon, 22 May 2000 18:24:54 -0400 (EDT)"
isosent="20000522222454"
name="Mcdowell, Bryon"
email="Bryon.Mcdowell@ca.com"
subject="backspace after enter"
id="27B34B6046FFD311BD880050046DFAD4F54E6C@usilms01.cai.com"
expires="-1"


To:www-amaya-dev@w3.org

There is an error in the code that handles the Backspace key.  

Here is how to recreate it:
1) Create a new HTML document
2) Type some text
3) Hit the Enter key
4) Hit the Backspace key

Notice the placement of the cursor; it is one space to the left of where it
should be.  I looked at the code for TtcDeletePreviousChar(...) which
handles this case.  There is a flag called moveAfter that causes the
undesired cursor movement.  The problem is that I don't completely
understand the conditions that sets this flag.  Can anyone shed some light
on this for me?

Code from TtcDeletePreviousChar(...):

 /* delete the current selection instead of the previous char */
CloseTextInsertion ();
/* by default doen't change the selection after the delete */
moveAfter = FALSE
if (pViewSel->VsBox != NULL)
{
moveAfter = (pViewSel->VsBox->BxAbstractBox->AbLeafType != LtText ||
pViewSel->VsBox->BxAbstractBox->AbVolume == 0);
ContentEditing (TEXT_SUP);
}
if (moveAfter)
TtcPreviousChar (document, view);


Thanks again,

Bryon McDowell
bryon.mcdowell@cai.com



