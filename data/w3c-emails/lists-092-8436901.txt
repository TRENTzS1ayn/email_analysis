docno="lists-092-8436901"
received="Mon May 29 09:57:33 2000"
isoreceived="20000529135733"
sent="Mon, 29 May 2000 15:57:25 +0200"
isosent="20000529135725"
name="Irene VATTON"
email="Irene.Vatton@inrialpes.fr"
subject="Re: backspace after enter"
id="200005291357.PAA17266@tahiti.inrialpes.fr"
charset="us-ascii"
inreplyto="Irene.Vatton&#64;inrialpes.fr"
expires="-1"


To:"Mcdowell, Bryon"<Bryon.Mcdowell@ca.com>,www-amaya-dev@w3.org


> > Here is how to recreate it:
> > 1) Create a new HTML document
> > 2) Type some text
> > 3) Hit the Enter key
> > 4) Hit the Backspace key

Oops I didn't test exactly that case.
You're right, when the Backspace deleted the last paragraph of the document, 
the new selection was misplaced.
This is the bug fix:

           if (pViewSel->VsBox != NULL)
             {
               moveAfter = (pViewSel->VsBox->BxAbstractBox->AbLeafType != 
LtText
 ||
                            pViewSel->VsBox->BxAbstractBox->AbVolume == 0);
               ContentEditing (TEXT_SUP);
             }
-           if (moveAfter)
+           if (moveAfter &&
+               pViewSel->VsBox && pViewSel->VsIndBox < pViewSel->VsBox->
BxNChars)
             TtcPreviousChar (document, view);

-- 
     Irene.



