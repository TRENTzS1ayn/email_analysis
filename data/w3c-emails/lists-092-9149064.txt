docno="lists-092-9149064"
received="Sun Sep 10 22:57:44 2000"
isoreceived="20000911025744"
sent="Mon, 11 Sep 2000 10:57:24 +0800"
isosent="20000911025724"
name="John Darrington"
email="john.darrington@mitswa.com.au"
subject="Error in ThotFreeFont"
id="39BC4A14.43FCEFF6@mitswa.com.au"
charset="us-ascii"
expires="-1"


To:www-amaya-dev@w3.org
CC:david.buddrige@mitswa.com.au

Further to my post last week, I've tracked down the source of the bug in
ThotFreeFont.

It's missing a pair of braces.

Patch attached --- It solved the problem I was having, but further than
this, I've not tested it.

John
The information transmitted is intended for the person or entity to 
which it is addressed and may contain confidential and/or privileged 
material. Any review, retransmission, dissemination, copying or other 
use of, or taking any action in reliance upon, this information by 
persons or entities other than the intended recipient is prohibited. If 
you have received this in error, please contact the sender and delete 
the material from your system. Utility Services Corporation (USC) is not 
responsible for any changes made to the material other than those made 
by USC or for the effect of the changes on the material?s meaning.
--- font.cMon Sep 11 10:50:42 2000
+++ font.c-newMon Sep 11 10:41:56 2000
@@ -1394,10 +1394,12 @@
 #ifdef _GTK
   gdk_font_unref (TtFonts[i]);
 #else /* _GTK */
+{
   /* remove the indicator */
   if (TtPatchedFont[i])
     TtPatchedFont[i] = 0;
   XFreeFont (TtDisplay, (XFontStruct *) TtFonts[i]);
+}
 #endif /* _GTK */
 #endif /* _WINDOWS */
   TtFonts[i] = NULL;



