docno="lists-092-9389390"
received="Wed Aug  1 18:32:56 2001"
isoreceived="20010801223256"
sent="Thu, 2 Aug 2001 00:32:27 +0200"
isosent="20010801223227"
name="Peter Paluch"
email="peterp@frcatel.fri.utc.sk"
subject="Minimal international support for Amaya?"
id="20010802003227.A9477@lin400"
charset="us-ascii"
expires="-1"

To:www-amaya-dev@w3.org


Hello,
=-==-=

Amaya 5.1 does not properly support input and displaying of international
characters. It does not even call "setlocale" to be at least partially
prepared for it. Still I am using ISO-8859-2 charset and I desperately need
Amaya to work properly for me.
 
I made Amaya execute "setlocale" by inserting two lines into
Amaya/batch/writeapp.c, here is the patch:

--- writeapp-orig.c     Fri Mar 30 18:06:28 2001
+++ writeapp.c  Wed Aug  1 23:32:31 2001
@@ -52,6 +52,7 @@
    fprintf (file, "/* File generated by app - do not edit! */\n");
    fprintf (file, "/* #################################### */\n");
    fprintf (file, "/* Included files */\n");
+   fprintf (file, "#include \<locale.h\>\n");
    fprintf (file, "#include \"string.h\"\n");
    fprintf (file, "#include \"thot_gui.h\"\n");
    fprintf (file, "#include \"thot_sys.h\"\n");
@@ -541,6 +542,7 @@
       fprintf (AppFile, "  int lg; /* identify dialogue messages */\n");
       fprintf (AppFile, "  char appName[MAX_PATH]; /* name of the application */\n");
       fprintf (AppFile, "  char workName[MAX_PATH]; /* path of the application */\n");
+      fprintf (AppFile, "  setlocale\(LC_ALL,\"\"\);\n");
       
       fprintf (AppFile, "  /* initialize the Registry */\n");
       fprintf (AppFile, "  TtaInitializeAppRegistry (argv[0]);\n");


As I am very new to Amaya I do not know the source very well so I have put
it in the first place that seemed to be suitable.

This was not sufficient, though. Amaya now loads the locale, yet it doesn't
load the proper font and it does not accept a modifier key (that is, key
with acute, circumflex and other special "decorations").

This is however too difficult for me to implement. Would PLEASE somebody be
so kind to implement at least a font selection dialog which would allow the
user to select also the font encoding? I suppose that would not be difficult
for a skilled programmer (I am not such a one). That would solve the font
displaying problems. Or is there a nicer way to solve it?

Thanks a lot. I will try to help as much as I can.

All the very best,
Peter



