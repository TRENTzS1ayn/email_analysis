docno="lists-093-1446415"
received="Thu Nov  7 09:52:07 1996"
isoreceived="19961107145207"
sent="Thu, 7 Nov 1996 09:49:37 +0100 (MET)"
isosent="19961107084937"
name="Marek Rouchal"
email="marek@btfmd1.fs.uni-bayreuth.de"
subject="Re: Bug in PNG support of Amaya"
id="Pine.LNX.3.95.961107092956.17519A-100000@btfmd1.fs.uni-bayreuth.de"
charset="US-ASCII"
inreplyto="199611061729.SAA22165&#64;lifou.inrialpes.fr"
expires="-1"

To:Vincent.Quint@inria.fr
cc:www-amaya@w3.org


On Wed, 6 Nov 1996, Vincent QUINT wrote:

> >  Certainly: http://saftsack.fs.uni-bayreuth.de/~marek/ttt/ttt.html
> >  
> >  This contains a simple testpage with two inlined PNGs, both of them
> >  transparent, 1-bit grayscale.
> 
> Well, there is a bug somewhere.
> 
> Did you try to change the background color of the whole document body?
> When doing that, the background of your images stay white and the
> foreground takes the same color as the document background.
> 
> Are you sure that the *background* of your PNGs is transparent? It seems
> that it is the *forground* that is transparent.

Vincent, (and others)

thanks for having a look at this, I really appreciate your help. I thought
of this point, too. My images are generated by pnmtopng from a
black&white pbm (Portable Bit Map, only two colors). I tried both

            pnmtopng -transparent #ffffff img1.pnm > img1.png

(this is supposed to have the effect I want - black characters on the
browser's background) and

            pnmtopng -transparent #000000 img1.pnm > img1.png

The behaviour was *almost* the same: The *white* image background is
visible in both cases, but the color of the characters is *grey* in the
first case and *light grey* in the second. I've prepared another test
page, here are the URLs:

http://saftsack.fs.uni-bayreuth.de/~marek/ttt/ttt.html

- This is the document with PNGs with -transparent #ffffff. This should be
  the one that works in the end, given that everything is ok with
  libpng-0.89c, libz-1.0.4 and pnmtopng-2.31

http://saftsack.fs.uni-bayreuth.de/~marek/ttt/ttt2.html

- This is the version using transparent GIFs instead of PNGs - works ok
  with netscape and other browsers.

http://saftsack.fs.uni-bayreuth.de/~marek/ttt/ttt3.html

- This is the same as the first URL, but with -transparent #000000 to show
  the effect mentioned above.

You can also retrieve the original PNMs from

http://saftsack.fs.uni-bayreuth.de/~marek/ttt/img1.pnm and img2.pnm

(actually these two are PBMs, i.e. 1-bit image data)

Thank you again for your cooperation, I'll be happy to contribute to the
development of the *first* linux browser with proper PNG support!

Best regards

Marek

PS. I haven't tried multicolor, transparent PNGs yet. Hopefully I'll find
some time to do that, perhaps it will bring us closer to the root of this
problem.

****************************************************************************
* Marek Rouchal                            <Marek.Rouchal@uni-bayreuth.de> *
* -----------------------\       http://saftsack.fs.uni-bayreuth.de/~marek *
* Unteres Tor 12          \------------------------------------------------*
* D-95445 Bayreuth                finger marek@saftsack.fs.uni-bayreuth.de *
* Tel/FAX +49-921-511824          for PGP Public Key                       *
****************************************************************************



