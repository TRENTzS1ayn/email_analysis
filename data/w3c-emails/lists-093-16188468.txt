docno="lists-093-16188468"
received="Wed Jan  6 04:26:33 1999"
isoreceived="19990106092633"
sent="06 Jan 1999 04:26:44 -0500"
isosent="19990106092644"
name="Don Croyle"
email="croyle@gelemna.ft-wayne.in.us"
subject="Re: Amaya and FreeBSD"
id="86k8z03g6i.fsf@emerson.gelemna.ft-wayne.in.us"
charset="US-ASCII"
inreplyto="Tue, 5 Jan 1999 14:44:06 +0100 (MET)&quot;"
expires="-1"

To:jose.kahan@w3.org
Cc:www-amaya@w3.org


jose.kahan@w3.org writes:

> Hello Don,
> 
> In our previous episode, Don Croyle said:
>  
> > Amaya itself needs a couple of small tweaks to build in FreeBSD.  I've made
> > a port for it, but it hasn't been committed yet.  You can get it from: 
> > http://www.freebsd.org/cgi/query-pr.cgi?pr=9210
> 
> If you mail us the tweaks, we can integrate them into the Amaya source code :)

Ok, there are two issues.  

First is that our default compiler is gcc, and, as has previously been
reported, it doesn't like being called as cc -E without a *.c file on
the command line.  Sam posted a patch to fix this for real, I've just
been saying:
  sed -e 's/CPP.*/CPP = cpp/' <Options.orig >Options
after running the configure script.  This really needs to be fixed,
especially since it isn't all that obvious that you *were* trying to
run the preprocessor when the build dies.

Second is a small patch to the libwww sources.  If you hear from users
of any other O_SYNC deprived OSen, it might be more efficient to just
say #ifndef O_SYNC.

--- libwww/Library/src/HTMemLog.c.origWed Dec 16 11:55:44 1998
+++ libwww/Library/src/HTMemLog.cTue Jan  5 20:13:09 1999
@@ -15,7 +15,7 @@
 #include "HTMemLog.h"
 #include "HTTimer.h"
 
-#ifdef WWW_MSWINDOWS
+#if defined(WWW_MSWINDOWS) || defined (__FreeBSD__)
 #define OPEN_FLAGSO_WRONLY|O_CREAT|O_TRUNC
 #else /* WWW_MSWINDOWS */
 #define OPEN_FLAGSO_WRONLY|O_CREAT|O_TRUNC|O_SYNC

-- 
I've always wanted to be a dilettante, but I've never quite been ready
to make the commitment.



