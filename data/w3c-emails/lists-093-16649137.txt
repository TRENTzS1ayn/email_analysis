docno="lists-093-16649137"
received="Mon Jan 18 09:34:07 1999"
isoreceived="19990118143407"
sent="Mon, 18 Jan 1999 15:33:50 +0100"
isosent="19990118143350"
name="Ramzi GUETARI"
email="guetari@silhouette.inrialpes.fr"
subject="Re: winthotcompilers.c patch"
id="199901181433.PAA21425@silhouette.inrialpes.fr"
charset="us-ascii"
inreplyto="winthotcompilers.c patch"
expires="-1"


To: Tim Baker<dbaker@direct.ca>
cc:www-amaya@w3.org,guetari@silhouette.inrialpes.fr

In-reply-to: Your message of Sun, 17 Jan 1999 17:04:26 -0800."
             <36A2889A.289C3FDE@direct.ca> 

Thank you Tim,

  Ramzi.

>This is a multi-part message in MIME format.
>--------------F04BAB513700BEEF89602409
>Content-Type: text/plain; charset=us-ascii
>Content-Transfer-Encoding: 7bit
>
>I've attached a small patch which fixes problems with winthotcompilers.c
>
>in the Amaya 1.4a distribution.
>
>Hope it comes across okay.
>
>-- Tim Baker
>--------------F04BAB513700BEEF89602409
>Content-Type: text/plain; charset=us-ascii;
> name="diff.txt"
>Content-Transfer-Encoding: 7bit
>Content-Disposition: inline;
> filename="diff.txt"
>
>--- winthotcompilers-orig.cFri Jan 15 21:01:10 1999
>+++ winthotcompilers-patch.cFri Jan 15 20:58:18 1999
>@@ -656,14 +656,14 @@
>                                          currentFile = (char*) 0;
>   }
>                                       if (SrcFileName) {
>-                                         free (currentFile);
>-                                         currentFile = (char*) 0;
>+                                         free (SrcFileName);
>+                                         SrcFileName = (char*) 0;
>   }
>                                       if (WorkFileName) {
>-                                         free (currentFile);
>-                                         currentFile = (char*) 0;
>+                                         _unlink (WorkFileName);
>+                                         free (WorkFileName);
>+                                         WorkFileName = (char*) 0;
>   }
>-                                      _unlink (WorkFileName);
>                                       if (result == FATAL_EXIT_CODE)
>                                          return result;
>                                       len = strlen (WorkPath);
>@@ -806,14 +806,14 @@
>                                          currentFile = (char*) 0;
>   }
>                                       if (SrcFileName) {
>-                                         free (currentFile);
>-                                         currentFile = (char*) 0;
>+                                         free (SrcFileName);
>+                                         SrcFileName = (char*) 0;
>   }
>                                       if (WorkFileName) {
>-                                         free (currentFile);
>-                                         currentFile = (char*) 0;
>+                                         _unlink (WorkFileName);
>+                                         free (WorkFileName);
>+                                         WorkFileName = (char*) 0;
>   }
>-                                      _unlink (WorkFileName);
>                                       if (result == FATAL_EXIT_CODE)
>                                          return result;
>                                       len = strlen (WorkPath);
>@@ -857,7 +857,7 @@
>                       SrcFileName = (char*) malloc (len + strlen (BinFiles[i]
>) + 1);
>                       sprintf (SrcFileName, "%s%s", WorkPath, BinFiles [i]);
>   } else {
>-                         SrcFileName = (char*) malloc (len + strlen (BinFiles
>) + 2);
>+                         SrcFileName = (char*) malloc (len + strlen (BinFiles
> [i]) + 2);
>                          sprintf (SrcFileName, "%s\\%s", WorkPath, BinFiles [
>i]);
>   }
>                   _unlink (SrcFileName);
>
>
>--------------F04BAB513700BEEF89602409--



