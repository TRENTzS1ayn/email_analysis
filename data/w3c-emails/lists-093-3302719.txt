docno="lists-093-3302719"
received="Fri Jan 31 18:07:13 1997"
isoreceived="19970131230713"
sent="Fri, 31 Jan 1997 12:07:26 -0500"
isosent="19970131170726"
name="Arnaud Le Hors"
email="lehors@w3.org"
subject="Building amaya on solaris 2.5"
id="32F226CE.1525@w3.org"
charset="us-ascii"
expires="-1"


To:www-amaya@w3.org

Hi everybody,
I just built amaya 0.9a on solaris 2.5 and thought you might find useful
the following report of how things went.
Hope this helps,
-- 
Arnaud Le Hors - W3C Technical Staff - http://www.w3.org

----------
Here is my experience while compiling Amaya on my Solaris 2.5 machine.

In http://www.w3.org/member/WWW/Amaya/User/Compiling.html it is said:
<<<<<<<<<
How to build, short version:

Here is a simple recipe explaining how to build on one of the supported
target:

      cd to Amaya/Target directory. 
>>>>>>>>>>

However, there is no Amaya directory in the hierarchy. I assume it's
really
Thot/Target and go into Thot/solaris2.

<<<<<<<<<
$ make
gcc -c -O -Wall -DRISC -DSVR4 -DSYSV -I/usr/X11/include
-I/nfs/u/lehors/Thot/solaris2 -DHAVE_CONFIG_H
-I/nfs/u/lehors/Thot/thotlib/include
-I/nfs/u/lehors/Thot/thotlib/internals/var
-I/nfs/u/lehors/Thot/thotlib/internals/h
-I/nfs/u/lehors/Thot/thotlib/internals/f -I/nfs/u/lehors/Thot/schemas 
-I/nfs/u/lehors/Thot/schemasOPERA -I/nfs/u/lehors/Thot/libjpeg
-I/nfs/u/lehors/Thot/libpng -I/nfs/u/lehors/Thot/libpng/zlib
-I/usr/X11/include  -o
/nfs/u/lehors/Thot/solaris2/thotlib/base/compilmsg.o 
/nfs/u/lehors/Thot/thotlib/base/compilmsg.c
In file included from /nfs/u/lehors/Thot/thotlib/include/interface.h:20,
                 from /nfs/u/lehors/Thot/thotlib/include/app.h:19,
                 from
/nfs/u/lehors/Thot/thotlib/internals/h/typestr.h:30,
                 from
/nfs/u/lehors/Thot/thotlib/internals/h/typeint.h:19,
                 from
/nfs/u/lehors/Thot/thotlib/internals/h/typemedia.h:19,
                 from /nfs/u/lehors/Thot/thotlib/base/compilmsg.c:21:
/nfs/u/lehors/Thot/thotlib/include/thot_gui.h:152: X11/keysym.h: No such
file or directory
/nfs/u/lehors/Thot/thotlib/include/thot_gui.h:153: X11/IntrinsicP.h: No
such file or directory
/nfs/u/lehors/Thot/thotlib/include/thot_gui.h:154: X11/CoreP.h: No such
file
or
...
*** Error code 1
make: Fatal error: Command failed for target
`/nfs/u/lehors/Thot/solaris2/thotlib/base/compilmsg.o'
>>>>>>>>>>

I set the following in the Makefile:
MOTIFLIBS = -L/usr/dt/lib -L/usr/openwin/lib -lXm -lXt# Solaris
STDLIBS  = -L/usr/openwin/lib -lX11 -lsocket -lnsl -lm -lc # Solaris
COMPIL_OPTIONS= -c $(CFLAGS) $(SYSTEM_FLAGS) -I /usr/dt/include
-I/usr/openwin/include -I$(THOTDIR)/${MACHINE} -DHAVE_CONFIG_H

This time the build goes all the way through. I get to the second step
'make
amaya' which fails with the following error:

<<<<<<<<<
cd /nfs/u/lehors/Thot/amaya; /nfs/u/lehors/Thot/solaris2/bin/str HTML
sh: cpp: not found
*** Error code 139
make: Fatal error: Command failed for target
`/nfs/u/lehors/Thot/amaya/HTML.STR'
>>>>>>>>>>

cpp on solaris is in /usr/ccs/lib. I wouldn't expect people to have this
in
there PATH. cpp should be defined at compile time, and controlled via a
variable in the Makefile.
I add /usr/ccs/lib to my PATH though and restart 'make amaya'.

This time it works all the way through.

I try to start it:
<<<<<<<<<
$ bin/amaya
ld.so.1: bin/amaya: fatal: libXm.so.3: can't open file: errno=2
Killed
>>>>>>>>>>

Gasp.

<<<<<<<<<
$ ldd bin/amaya
        libXm.so.3 =>    (not found)
        libXt.so.4 =>    /usr/lib/libXt.so.4
        libX11.so.4 =>   /usr/lib/libX11.so.4
        libsocket.so.1 =>        /usr/lib/libsocket.so.1
        libnsl.so.1 =>   /usr/lib/libnsl.so.1
        libm.so.1 =>     /usr/lib/libm.so.1
        libc.so.1 =>     /usr/lib/libc.so.1
        libXext.so.0 =>  /usr/openwin/lib/libXext.so.0
        libdl.so.1 =>    /usr/lib/libdl.so.1
        libw.so.1 =>     /usr/lib/libw.so.1
        libintl.so.1 =>  /usr/lib/libintl.so.1
        libmp.so.1 =>    /usr/lib/libmp.so.1
>>>>>>>>>>

(BTW ldd is not available on all systems, on HP it's chatr, etc...)
I start it with LD_LIBRARY_PATH=/usr/dt/lib:/usr/openwin/lib. I'm not
sure why
I need this since there is -L/usr/dt/lib in the link command of amya...

One other comment: the lack of edit/browse mode makes it difficult to
use amaya
as a simple browser since I can modify by mistake the document I'm
browsing. Could we have an option to make editing inactive ?

<The End>



