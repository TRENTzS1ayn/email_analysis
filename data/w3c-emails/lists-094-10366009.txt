docno="lists-094-10366009"
received="Fri Jan 21 06:25:31 2000"
isoreceived="20000121112531"
sent="Fri, 21 Jan 2000 12:25:23 +0100 (MET)"
isosent="20000121112523"
name="jose.kahan@w3.org"
email="jose.kahan@w3.org"
subject="Re: Broken Pipe?"
id="200001211125.MAA23592@tuvalu.inrialpes.fr"
charset="US-ASCII"
inreplyto="38879A12.39CFA385&#64;giggleswick.n-yorks.sch.uk"
expires="-1"


To:sawhite@giggleswick.n-yorks.sch.uk
CC:www-amaya@w3.org

Hello Stuart,

In our previous episode, Stuart White said:

> Linux - latest is the rpm of 2.4.1.
> Amaya loads and displays the first page, but then disappears if I follow
> an external link, claiming a broken pipe.  It sometimes loads part of
> the external page, but it always bombs out.  I'm using an
> MS proxyserver, but it seems to be OK, in that it asks for
> authentication OK and supplies some of the page data at least.

Amaya uses the HTTP/1.1 protocol. It may be that the proxy isn't fully
compliant. I've used the proxy function against an Apache server and it
worked well for me.

One way that we can test it is if you telnet to your proxy and type:

HEAD http://www.w3.org/ HTTP/1.1
Host:www.w3.org
Connection: Keep-Alive

Then see what it returns. It should return something close to:

HTTP/1.1 200 OK
Date: Fri, 21 Jan 2000 11:24:05 GMT
Server: Apache/1.3.6 (Unix) PHP/3.0.11
Last-Modified: Mon, 03 Jan 2000 17:16:36 GMT
ETag: "2c0540-3313-3870d974"
Accept-Ranges: bytes
Content-Length: 13075
Keep-Alive: timeout=15
Connection: Keep-Alive
Content-Type: text/html; charset=iso-8859-1

and it shouldn't break the connection.

For the other broken pipe problems, I'm working on an upgrade/patch of libwww
to try improve the situation. In some places, no check is done to see if
a socket has been closed, before writing to it. This generates many of the
broken pipe messages.

Could you report back to the list? Also, if you could use another proxy,
could you tell us if you still have the same problems?

Thanks,

-Jose



