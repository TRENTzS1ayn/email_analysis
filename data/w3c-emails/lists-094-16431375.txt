docno="lists-094-16431375"
received="Tue Nov 28 08:54:35 2000"
isoreceived="20001128135435"
sent="Sat, 25 Nov 2000 14:03:45 -0500 (EST)"
isosent="20001125190345"
name="Patrik Hagglund"
email="patha@softlab.ericsson.se"
subject="4.1 Unix build bug: configure doesn't find libjpeg and libpng"
id="20001125190357.A50455877@hunny.softlab.se"
expires="-1"

To:www-amaya@w3.org


I tried to build Amaya 4.1 with ../configure
--without-included-jpeg, but configure fails to read the version
numbers in /usr/include/libjpeg.h and /usr/include/png.h.

I deleted an extra space in configure.in. 

I also had libpng version 1.0.8 installed and changed the test
from 1.0.1 to 1.0.x as shown below.

However, thotlib/image/pnghandler.c tries to use the deprecated
function png_read_init(), which makes amaya to only produce an
error message at startup.

--
Patrik H?gglund


--- configure.inTue Oct 31 13:42:07 2000
+++ configure.in.newSat Nov 25 19:07:37 2000
@@ -56,7 +56,7 @@
 if test "$with_included_jpeg" != "yes" ; then
 dnl
     AC_MSG_CHECKING([for libjpeg version = 6b])
-    AC_EGREP_CPP([x 62  x],
+    AC_EGREP_CPP([x 62 x],
         [#include <jpeglib.h>
          x JPEG_LIB_VERSION x],
 dnl
@@ -69,8 +69,8 @@
         )
 dnl    
 dnl
-    AC_MSG_CHECKING([for libpng version = 1.0.1])
-    AC_EGREP_CPP([x \"1.0.1\"  x],
+    AC_MSG_CHECKING([for libpng version = 1.0.x])
+    AC_EGREP_CPP([x \"1\.0\..*\" x],
         [#include <png.h>
 x PNG_LIBPNG_VER_STRING x],
 dnl



