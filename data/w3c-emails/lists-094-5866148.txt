docno="lists-094-5866148"
received="Tue Dec 21 10:27:00 1999"
isoreceived="19991221152700"
sent="Tue, 21 Dec 1999 16:26:56 +0100"
isosent="19991221152656"
name="Vincent Quint"
email="quint@w3.org"
subject="Re: Out-of-order &lt;A NAME=&quot;Top&quot;&gt; confuses Amaya"
id="199912211526.QAA28665@lifou.inrialpes.fr"
charset="us-ascii"
inreplyto="ACBDAGBLHGGBMAAA&#64;my-deja.com"
expires="-1"


To:"Sergio Gelato"<bglbv@my-deja.com>
cc:www-amaya@w3.org

Sergio Gelato wrote:
>
> I actually have several concerns with this.
> 
> 1) It would be nice, when loading an initially invalid document into
> Amaya for editing, to have it transformed into something that doesn't
> require *extensive* clean-up. In this case, the NAME= attribute
> shouldn't have been inherited by every <A> element in sight. What makes
> sense for  fonts doesn't necessarily for anchors.

Right.  As you may have noticed, Amaya tries to fix *some* *common* HTML
errors.  A common error is a character level element such as font that
encloses several block elements such as paragraphs, headings, lists, etc.
In that regard, anchors are currently handled in the same way as font
elements, just because they belong to the same category: character
level elements.  Obvioulsy, that's wrong and Amaya should make a special
case for anchors.

>In this case, I'd be happy with the <A NAME="Top"> being floated down
> to the beginning of the BODY contents, and the missing </A> being
> placed immediately afterwards (although that is perhaps less critical,
> as long as the user is in a position to manipulate the anchor with
> Amaya's editing tools).

That'ss exactly what will be done for the next release.

> 2) Somehow that out-of-place, unclosed anchor triggers other bugs in
> Amaya. There is no excuse for breaking a line in the middle of a word,
> for example. Nor for having such a garbled rendition of the document
> in the structure view (both the Linux and the Solaris version print
> several lines on top of each other, making the whole
> thing hard to read). [I must say the X server I used was on Linux in
> both cases; if it's an XFree86 bug, that would be interesting to know.]

Don't blame Amaya for not recovering properly from an error.  Blame the
producer of this garbled pseudo-HTML file first.  It's much easier to
produce valid HTML by simply following the specification than trying to
recover from a virtually infinite number of undocumented situations.

Anyway, we have learned from that new case, and Amaya will now handle
it properly, but I am sure someone else will report another strange
HTML error soon, and we will have to cope with it.  That's an endless
effort and we prefer to spend our limited resources to develop new
features, rather than trying to fix all possible HTML errors.

> 3) I know I ought to look this up in the spec, but is it legal for several anchors to be given the same NAME attribute value? Isn't NAME like ID, in that the values are meant to be unique across a document?

No, it's not legal.  It will be fixed in the next release.

> On Mon, 20 Dec 1999 14:18:14   Irene.Vatton wrote:
> >
> >Hi,
> >
> >Amaya detects that the anchor <A NAME="Top"> is misplaced. That's true,
> >but I agree the result is surprising. In fact Amaya tries to apply the 
> >same fix as it does for misplaced <font> elements.
> >What are you expecting: Amaya ignore the invalid anchor? Amaya creates an
> >empty anchor as the first element of the body? what else?

-------------------------------------------------------
Vincent Quint                       INRIA Rhone-Alpes
W3C/INRIA                           ZIRST
e-mail: Vincent.Quint@w3.org        655 avenue de l'Europe
Tel.: +33 4 76 61 53 62             38330 Montbonnot St Martin
Fax:  +33 4 76 61 52 07             France



