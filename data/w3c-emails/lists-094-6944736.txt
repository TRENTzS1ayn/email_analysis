docno="lists-094-6944736"
received="Sun Apr 23 16:00:46 2000"
isoreceived="20000423200046"
sent="Sun, 23 Apr 2000 21:00:42 +0100"
isosent="20000423200042"
name="A E Lawrence"
email="adrian.lawrence@computing-services.oxford.ac.uk"
subject="amaya 3.1 dumps core, illegal instruction, on exit"
id="3903566A.31AA30C@oucs.ox.ac.uk"
charset="us-ascii"
expires="-1"


To:www-amaya@w3.org

I am new here, but I have had a quick look at the archives and could not
see anything like this reported.

Amaya compiled from amaya-src-3.1.tgz with gcc version egcs-2.91.66
19990314/Linux (egcs-1.1.2 release) . With -g and -O2 as default
Options.orig.
Running on pretty much a stock Redhat 6.2 installation FWIW.

I have compiled several times with a few variations, but it always dumps
core on exit. Most unlikely to be hardware problem. There are so many
warning messages during compilation that I might have missed a serious
error, but the compilation and make complete.

I attach a very short gdb transcript with a backtrace from where the
illegal instruction occured. Hope this helps.

Adrian
--
Dr A E Lawrence (from home)
GNU gdb 19991004
Copyright 1998 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "i386-redhat-linux"...
Core was generated by `bin/amaya'.
Program terminated with signal 4, Illegal instruction.
Reading symbols from /usr/X11R6/lib/libXm.so.2...done.
Reading symbols from /usr/X11R6/lib/libXt.so.6...done.
Reading symbols from /usr/X11R6/lib/libXp.so.6...done.
Reading symbols from /usr/X11R6/lib/libSM.so.6...done.
Reading symbols from /usr/X11R6/lib/libICE.so.6...done.
Reading symbols from /usr/X11R6/lib/libXext.so.6...done.
Reading symbols from /usr/X11R6/lib/libX11.so.6...done.
Reading symbols from /lib/libdl.so.2...done.
Reading symbols from /lib/libm.so.6...done.
Reading symbols from /lib/libc.so.6...done.
Reading symbols from /lib/ld-linux.so.2...done.
#0  0x4039f061 in main_arena () from /lib/libc.so.6
(gdb) backtarce    race
#0  0x4039f061 in main_arena () from /lib/libc.so.6
#1  0x8a513c0 in ?? ()
#2  0x402065ea in XFreeFont () from /usr/X11R6/lib/libX11.so.6
#3  0x80d83a9 in ThotFreeFont (frame=1) at ../../thotlib/dialogue/font.c:1403
#4  0x811ae52 in DestroyFrame (frame=1)
    at ../../thotlib/dialogue/appdialogue.c:3606
#5  0x810fa1d in CloseAllViewsDoc (pDoc=0x8a51e20)
    at ../../thotlib/view/displayview.c:593
#6  0x810f84d in TCloseDocument (pDoc=0x8a51e20)
    at ../../thotlib/view/displayview.c:470
#7  0x811f84b in CloseADocument (document=1, docform=1, viewform=1)
    at ../../thotlib/dialogue/closedoc.c:208
#8  0x811f869 in TtcCloseDocument (document=1, view=1)
    at ../../thotlib/dialogue/closedoc.c:228
#9  0x807ab91 in CloseDocument (doc=1, view=1) at ../../amaya/init.c:5310
#10 0x811bf2e in ThotCallback (ref=191, typedata=1, 
    data=0xd <Address 0xd out of bounds>)
    at ../../thotlib/dialogue/appdialogue.c:4743
#11 0x81215e3 in CallMenu (w=0x8ae74c0, catalogue=0x8a343e4, 
    call_d=0xbfffd674 "\n") at ../../thotlib/dialogue/dialogapi.c:928
#12 0x401784c0 in XtCallCallbackList () from /usr/X11R6/lib/libXt.so.6
#13 0x400a8810 in XmSetWMProtocolHooks () from /usr/X11R6/lib/libXm.so.2
#14 0x401a5dd4 in HandleActions () from /usr/X11R6/lib/libXt.so.6
#15 0x401a62b6 in HandleSimpleState () from /usr/X11R6/lib/libXt.so.6
#16 0x401a67f1 in _XtTranslateEvent () from /usr/X11R6/lib/libXt.so.6
#17 0x401831ac in XtDispatchEventToWidget () from /usr/X11R6/lib/libXt.so.6
#18 0x40183aed in _XtDefaultDispatcher () from /usr/X11R6/lib/libXt.so.6
#19 0x40183d2d in XtDispatchEvent () from /usr/X11R6/lib/libXt.so.6
#20 0x812b282 in TtaHandleOneEvent (ev=0xbfffd858)
    at ../../thotlib/dialogue/interface.c:1328
#21 0x812b37e in TtaMainLoop () at ../../thotlib/dialogue/interface.c:1428
#22 0x804f74f in main (argc=1, argv=0xbffff924) at EDITORAPP.c:923
(gdb) l ../../thotlib/dialogue/font.c:1403
1398  gdk_font_unref (TtFonts[i]);
1399#else /* _GTK */
1400  /* remove the indicator */
1401  if (TtPatchedFont[i])
1402    TtPatchedFont[i] = 0;
1403  XFreeFont (TtDisplay, (XFontStruct *) TtFonts[i]);
1404#endif /* _GTK */
1405#endif /* _WINDOWS */
1406  TtFonts[i] = NULL;
1407       }
(gdb) ; l ../../thotlib/dialogue/interface.c:1428
1423  NewMainLoop ();
1424  continue;
1425}
1426#ifndef _WINDOWS
1427      TtaFetchOneEvent (&ev);
1428      TtaHandleOneEvent (&ev);
1429#else  /* !_WINDOWS */
1430      if (GetMessage (&msg, NULL, 0, 0)) {
1431         /* if (currentFrame >= 1)
1432            SetFocus (FrRef[currentFrame]); */
(gdb) q



