docno="lists-094-9368330"
received="Mon Jan 10 02:57:52 2000"
isoreceived="20000110075752"
sent="Sat, 8 Jan 2000 09:55:29 -0500 (EST)"
isosent="20000108145529"
name="bglbv@my-deja.com"
email="bglbv@my-deja.com"
subject="scrolling; annotations"
id="20000108143400.993.qmail@my-deja.com"
charset="iso-8859-1"
expires="-1"


To:www-amaya@w3.org

I've had trouble with Amaya going into an infinite loop when I hit one of the
arrow keys in the structure view. I suspect the problem is in the routine
LocateLeafBox (thotlib/editing/textcommands.c) where the routines TtcLineUp,
TtcLineDown, TtcScrollLeft, TtcScrollRight are always called with the second
argument equal to 1, regardless of the value of FrameTable[frame].FrView .

For one thing, that 1 is formally wrong since those routines take an argument
of type View and 1 is a literal of type int. At the very least it should be
replaced with a symbolic designation for the formatted view, if the formatted
view is intended (which I don't even think it is).

For another, I just patched my copy of the source code and tested the result,
and it seems to behave much better. I'm composing this message offline, so I
can't run a "cvs diff -c" on the relevant file until after this message gets
sent. But it amounts to
   View view;
   view = FrameTable[frame].FrView;
and replacing those (doc, 1) with (doc, view).
----------
Also, I hope Jos? Kahan and any other interested parties have noticed that
the latest annotlib changes won't compile. I had to reconfigure with
--disable-annot (which is OK for me, since I haven't actually tried the
annotation feature yet).



