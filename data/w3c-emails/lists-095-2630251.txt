docno="lists-095-2630251"
received="Thu Jan 11 08:42:36 2001"
isoreceived="20010111134236"
sent="Thu, 11 Jan 2001 10:00:07 +0100"
isosent="20010111090007"
name="Holleck, J?rg"
email="Joerg.Holleck@prodv.de"
subject="Printing-problems"
id="8EE016BBE1BE5F44B695C5E623D72C3A0B2DCF@x001.p01.prodv.loc"
charset="iso-8859-1"
expires="-1"


To:"Irene VATTON"<Irene.Vatton@inrialpes.fr>
Cc:<www-amaya@w3.org>

Hi Irene,

In order to analyse our amaya printing problems we have downloaded the
4.2.1 source. The problems still persist and their source seems to be
the handling of memory. When printing AmayaPage.html the debugger
reports 

HEAP[amaya.exe]: HEAP: Free Heap block 13b7b0 modified at 13b7c0 after
it was freed

and we get an access violation when calling GetTextExtentPoint() in
DrawString() defined in windowsdisplay.c. The parameters of this
function are correct, I reckon. This doesn't seem to be the real
location of the error though, since we often experience similar access
violations in the call of GlobalFree() which sometimes leads to the
output of DrawPicture (2). Memory problems don't always reveal as soon
as they occur :-) I tried to comment out some invocations of free(),
GlobalFree() and LocalFree() but that didn't help. We are running
Windows NT 4.0 Service Pack 6.0 RC 1.5 (german version). The error is
not dependent on the printer we choose.

In addition:
*If I try to print the amayapage.html amaya crashed and the
printjob is killed.
*If I try to print the amayapage.html without the second image
called "annot.gif" the printjob works well.
*If I try to print a whole document created by the function "make
book", two messages appear with the following text: 
"Error-Source: PiveotError: Picture 2" and
"Error-Source: PrintDoc (4)"
 
I hope, that these information will help to solve the problem.

With kind regards, J?rg.



