docno="lists-095-8759561"
received="Tue Dec 11 19:35:55 2001"
isoreceived="20011212003555"
sent="Wed, 12 Dec 2001 10:35:42 +1000 (EST)"
isosent="20011212003542"
name="Horatio Davis"
email="horatio@qpsf.edu.au"
subject="CVS Amaya doesn't build on Linux 2.4.9"
id="Pine.GSO.4.31.0112120944390.16914-100000@sasquatch"
charset="US-ASCII"
expires="-1"

To:<www-amaya-dev@w3.org>,<www-amaya@w3.org>



My Linux is the November KRUD 7.2 (basically Red Hat 7.2) running
with an out-of-the-box configuration on a commodity Intel system.

I have just checked out Amaya and libwww from CVS and tried to build them
using the recipe at http://www.w3.org/Amaya/User/cvs.html. This proceeded
as normal until...

creating Library/src/windows/Makefile
creating Library/src/vms/Makefile
creating wwwconf.h
libwww is configured
make[3]: Entering directory
`/home/horatio/amaya-hackery/Amaya/LINUX-ELF/libwww/
modules/md5'
/bin/sh ../../libtool --mode=compile gcc -DHAVE_CONFIG_H -I.
-I/home/horatio/ama
ya-hackery/Amaya/LINUX-ELF/../../libwww/modules/md5 -I../..
-I/home/horatio/am
aya-hackery/Amaya/LINUX-ELF/../libpng/zlib  -O2 -W  -DXML_DTD -DXML_NS -c
/home/
horatio/amaya-hackery/Amaya/LINUX-ELF/../../libwww/modules/md5/md5.c
libtool: ltconfig version `' does not match ltmain.sh version `1.3.4'
Fatal configuration error.  See the libtool docs for more information.
make[3]: *** [md5.lo] Error 1
make[3]: Leaving directory
`/home/horatio/amaya-hackery/Amaya/LINUX-ELF/libwww/m
odules/md5'
make[2]: *** [libwww_make_module_md5] Error 2
make[2]: Leaving directory `/home/horatio/amaya-hackery/Amaya/LINUX-ELF'
make[1]: *** [amaya_comp_libwww] Error 2
make[1]: Leaving directory
`/home/horatio/amaya-hackery/Amaya/LINUX-ELF/amaya'

Has anybody else reproduced this behaviour?

The proximate cause _appears_ to be that LTCONFIG_VERSION is never set in
Amaya/LINUX_ELF/libwww/libtool. At least, adding to that script the lines

#KLUDGE
LTCONFIG_VERSION=1.3.4

enables "make libwww" to proceed with no further errors. The only ltconfig
I can find that might be relevant is Amaya/../libwww/config/ltconfig, and
it writes the correct LTCONFIG_VERSION to libtool when invoked.  Is it
invoked to regenerate Amaya/obj/libwww/libtool when libwww is configured?
If not, where does that libtool come from?

Has anybody else encountered this?

Cheers,

Horatio



