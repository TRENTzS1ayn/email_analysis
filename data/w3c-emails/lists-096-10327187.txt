docno="lists-096-10327187"
received="Fri Sep 26 10:07:10 2003"
isoreceived="20030926140710"
sent="Fri, 26 Sep 2003 05:06:10 -0400 (EDT)"
isosent="20030926090610"
name="Scott Walters"
email="scott@illogics.org"
subject="amaya build, NetBSD 1.6.1 - tweaks"
id="20030926090157.GD8682@illogics.org"
charset="us-ascii"
expires="-1"

To:www-amaya@w3.org






Hi, 

This report is for amaya-8.1b.

1.

config.status spits out confstat09929a/subs-3.sed, part of which reads:

/@dav_frag@/r

...which closely resembles other lines, like:

/@math_frag@/r ../amaya/Makefile.math

...except lacking a file name, which sed doesn't like. I'm sure ./configure
was supposed to compute a filename somewhere and just failed to on this
platform, but I didn't investigate the details.

2.

in thotlib/base/fileaccess.c, around line 271, it tried to include
definitions for struct ieee for both little and big endian. That didn't
go over very well =) 

3.

amaya/Makefile, had to add  -lwwwnews -lwwwtelnet -lwwwgopher to LIBS:

LIBS    =  $(AMAYA_PLUGIN_LIBS) $(AMAYA_ANNOT_LIBS) $(AMAYA_DAV_LIBS) \
            \
           $(AMAYA_MATH_LIBS) $(AMAYA_GRAPH_LIBS) \
           -L../tablelib -L../thotlib -L.. -lThotTable -lThotEditor -L/usr/pkg/lib \
          $(AMAYA_OPTION_EXTRA_LIBS) $(IMGLIBS) $(EXPAT_LIBRARIES) \
          $(AMAYA_LIBWWW_LIBS) \
          $(MOTIF_LIBRARIES) $(GTK_LIBRARIES) \
          $(XMLIB) $(X_LIBS) -lXt $(X_PRE_LIBS)  -lwwwnews -lwwwtelnet -lwwwgopher \
          -lXext -lX11 $(X_EXTRA_LIBS)   -lm $(GL_LIBRARIES)

...or else final linking for the amaya executable comes back with:

/usr/local/lib/libwwwapp.so: undefined reference to `HTLoadNews'
/usr/local/lib/libwwwapp.so: undefined reference to `HTLoadTelnet'
/usr/local/lib/libwwwapp.so: undefined reference to `HTLoadGopher'
/usr/local/lib/libwwwapp.so: undefined reference to `HTNewsGroup'
/usr/local/lib/libwwwapp.so: undefined reference to `HTNewsList'
gmake[1]: *** [../bin/amaya] Error 1
gmake[1]: Leaving directory `/usr/home/tgz/Amaya/obj/amaya'
gmake: *** [amaya_prog] Error 2

4. 

The included libraries are fickle. They don't like to copy their .a files out
again after a make clean (of which I had to do several), they had trouble finding
their headers, and other things. IMHO, a program really ought to default to using
already installed libraries, if they can be found.

Amaya 7.2 built and installed curtesy for NetBSD's pkgsrc system, and runs fine. It
is *extremely* nifty - very nice hack. When I saw that table rendering had been
improved, I was eager to try the new version.

I'm sure a lot of this is user error, but I thought the feedback might be helpful
anyway.

Anyway, thanks for all of your hard work on this.

-scott



