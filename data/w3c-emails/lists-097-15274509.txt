docno="lists-097-15274509"
received="Thu Jun 21 23:52:52 2001"
isoreceived="20010622035252"
sent="Thu, 21 Jun 2001 22:52:44 -0500"
isosent="20010622035244"
name="Aaron Swartz"
email="me@aaronsw.com"
subject="relativeURI Patch"
id="200106220355.f5M3tPQ13830@theinfo.org"
charset="us-ascii"
expires="-1"


Cc: www-archive+n3bugs@w3.org
To: Tim Berners-Lee<timbl@w3.org>, Dan Connolly<connolly@w3.org>

Please apply this patch to fix problems with the relativeURI 
function in notation3.py (thanks to Dan Connolly for the fix):

diff -u -r1.82 notation3.py
--- notation3.py        2001/06/01 07:52:40     1.82
+++ notation3.py        2001/06/22 03:49:49
@@ -1025,8 +1025,8 @@
      if uri[i:i+1] =="#": return uri[i:]  # fragment of base
      while i>0 and uri[i-1] != '/' : i=i-1  # scan for slash

-    if i == 0: return uri  # No way.
-    if string.find(base, "//", i)>0: return uri # An unshared "//"
+    if i < 3: return uri  # No way.
+    if string.find(base, "//", i-2)>0: return uri # An unshared "//"
      if string.find(base, ":", i)>0: return uri  # An unshared ":"
      n = string.count(base, "/", i)
      return ("../" * n) + uri[i:]

--
[ "Aaron Swartz" ; <mailto:me@aaronsw.com> ; <http://www.aaronsw.com/> ]



