docno="lists-097-2156295"
received="Tue Nov  6 05:15:12 2001"
isoreceived="20011106101512"
sent="Tue, 06 Nov 2001 10:14:24 +0000"
isosent="20011106101424"
name="Gunnar AAstrand Grimnes"
email="ggrimnes@csd.abdn.ac.uk"
subject="Re: Instructions for Installing Annotation Server for NT"
id="5.0.0.25.0.20011106100458.00ab7890@pigeon.csd.abdn.ac.uk"
charset="us-ascii"
inreplyto="000301c1660b$06b96010$95c45882&#64;cs.man.ac.uk"
expires="-1"


To:www-annotation@w3.org,"Sean Bechhofer"<seanb@cs.man.ac.uk>

At 10:02 05/11/2001 -0500, you wrote:
>What's the current status with this? I just tried with the latest versions
>from the CVS
>archive and I'm getting this problem with syscall.ph too (on both NT and
>2000).


Sean,

I struggled with this for a few weeks, and eventually gave up,
Annotea is not written to work with Windows and uses several linux only 
features, such as the syscall things...

The syscall in question is used to obtain a high-resolution timestamp for 
the debug files, it is not essential for normal operation ( I think ) and 
if you are happy to live without debug info you can change the following 
lines in annotate (around line 172 in my file, but could have changed if 
you have fresh sources from the CVS):

     $query = new W3C::Util::W3CDebugCGI($0, $ARGV[0] eq 'DEBUG',
                                         {-dieNoOpen => 1,
                                          -logExt => '.log',
                                          -storeIn => '/temp/logs',
                                          -rerun => 'w3c_rerun',
                                          -mergeQueryAndPOST => 1});

Add    "-noStore=>1" somewhere in the parameter string and annotea will 
newer write the debug information file, and never need syscall.ph.
Alternatively you can replace the timestamp with a low-res timestamp (1s) 
using the built in perl time() command.


I also ran into problems with the DBM files used and changed this 
line  (line 42 in my file)

$DEFAULT_dbParms = "-type => 'sdbm', -file => '/etc/apache/conf/users'";

to using sdbm in place of "ndbm" (I think - i cant be bothered to check the 
original sources)
This must be changed in several files.


I had a few other problems as well, but I cannot remember them now...

The best result I ever got was a server that returned the right http code 
according to the protocol, but never actually wrote anything to the DB. In 
the end we decided not to use annotea for our course after all, so my time 
dedicated to this was limited.

Let me know how you get on!







--
Gunnar AAstrand Grimnes
ggrimnes@csd.abdn.ac.uk
http://www.csd.abdn.ac.uk/~ggrimnes

7 John Knox Court
Mounthooly
Aberdeen
AB24 3LF



