docno="lists-097-4936217"
received="Wed Oct 16 08:24:24 2002"
isoreceived="20021016122424"
sent="Wed, 16 Oct 2002 14:24:08 +0200"
isosent="20021016122408"
name="Jose Kahan"
email="jose.kahan@w3.org"
subject="Re: New annotea server in Zope"
id="20021016122408.GD18027@inrialpes.fr"
charset="us-ascii"
inreplyto="Pine.LNX.4.30.0210141214030.15184-100000&#64;tux.w3.org"
expires="-1"

To: Charles McCathieNevile<charles@w3.org>
Cc: Brent M Hendricks<brentmh@ece.rice.edu>, Jim Ley<jim@jibbering.com>,www-annotation@w3.org



Charles,

Yes, the bug was in my XPointer parser. I just commited a fix. The
problem comes from the way you code the ID attribute in the Xpointer
portion of your RDF:

For the same image, you propose:

 <a:Annotation
  a:context="http://www.w3.org/#xpointer(id(&amp;quot;logo&amp;quot;)/img[1])"

  And in Amaya, I have:

<a:context>http://www.w3.org/#xpointer(id("logo")/img[1])</a:context>

Although you coded it differently, the RDF parser was able to get it
correctly (good work Raptor and Dave Becket).

However, your error comes from the way you coded your HTML entity. It
should have been &quot; rather than &amp;quot... That gives you an
id value that's illegal and that my parser discards.

-jose

On Mon, Oct 14, 2002 at 12:16:38PM -0400, Charles McCathieNevile wrote:
> 
> Yep, works beautifully. I should figure out what is still not working in my
> ruby script and update the live version -
> http://www.w3.org/2001/sw/Europe/200209/annodemo/annoget.rb
> 
> >
> >> I managed to post an annotation for Amaya (need to configure my annotataion
> >> post tool to be flexible about which port it uses %-\ and when I looked for
> >> that the body had been given a ful URI so maybe this is an old problem that
> >> has been fixed.
> >
> >You annotated the image at the top, right?  This seems to crash my copy
> >of Amaya when I try to load the annotations.  Hmmm.
> 
> Right. Well, I am not sure where the bug is - but I am suspicious that it is
> in Amaya.



