docno="lists-097-5474450"
received="Thu Dec 12 04:27:28 2002"
isoreceived="20021212092728"
sent="Thu, 12 Dec 2002 10:27:23 +0100"
isosent="20021212092723"
name="Jose Kahan"
email="jose.kahan@w3.org"
subject="Re: updating annotations"
id="20021212092723.GJ20434@inrialpes.fr"
charset="us-ascii"
inreplyto="Pine.LNX.4.44.0212120208450.15757-100000&#64;electricblue"
expires="-1"

To: Doug Daniels<rainking@rice.edu>
Cc:www-annotation@w3.org



Hello Doug,

Your question arrives just in time. I think I said in a recent post
that we're updating the Annotea protocols. The motivation is to remove
these ambiguities and also to document the reply protocol.

The last section we're completing before making the draft available is
the one concerning annotations update. We noticed this discrepancy
between the protocol description (use PUT) and what we do in Amaya
(POST with ?replace_source).

What probably happened is that because of a time delay we used POST
instead of PUT in Amaya and then forgot to finish that work. The latest
version of Amaya (7.1) still uses POST for update.

As our server seems to support both PUT and POST for updating
annotations, we were considering implementing the PUT also in Amaya and
use it as the only method for updating Annotations. 

I'd like to have the opinion of other Annotea client developers to know:

1. If they're using PUT or POST to update annotations. And, if yes,

2. When doing a PUT, do they do a single PUT of both metadata and the body
   content, or a PUT directly to either resource that has been modified
   (eventually two PUTS if both pieces of data have been modified).

The direction we're taking is to do a PUT directly to the resource
that was modified (metadata or body).

If the developers want to keep the POST method for updating annotations,
we can also include it in the document. In the current draft both
methods are documented, but we were not sure if we should retain them
there.

This having been said, if there is still some discussion on this point,
we may as well publish the draft as it is and have everyone discuss it
on the list.

-jose

On Thu, Dec 12, 2002 at 02:11:55AM -0600, Doug Daniels wrote:
> 
> > As I read the protocol you SHOULD use PUT to update an annotation, only using
> > POST to have the server create one with new URIs for the annotation and its
> > body, although this isn't a MUST for some reason I don't understand that
> > comes out as "implementation magic".
> 
> Yes, both annozilla and amaya use the POST method with ?replace_source
> instead of PUT to update annotations.  As far as annozilla is concerned,
> I'm not certain that the XMLHttpRequest object has PUT implemented yet.
> POST seems to be more commonly available to clients.



