docno="lists-097-5886466"
received="Fri Jan 24 05:52:43 2003"
isoreceived="20030124105243"
sent="Fri, 24 Jan 2003 11:52:41 +0100"
isosent="20030124105241"
name="Jose Kahan"
email="jose.kahan@w3.org"
subject="Re: format for body of annotations"
id="20030124105241.GB12553@inrialpes.fr"
charset="us-ascii"
inreplyto="format for body of annotations"
expires="-1"

To:www-annotation@w3.org



Hello!

Thanks for your report. You're correct. The generated XHTML body
is not valid.

The procedure that Amaya uses to add a namespace was changed around 
December. The annotation library was not updated at that time and this is 
what was causing the problem. Previous to this modification (I suppose
before release 7.0), I believe that the namespace was being correctly
added.

I fixed the problem and commited the code to CVS. The namespace is now being
added to the HTML element. We're planning a new Amaya release for next
week so this fix will make it.

Another problem is that if I post an annotation with this modification
and then reload it from the server, the server is not retaining the
namespace. I'll ask Eric to take a look at this problem later on today
(when he wakes up). I'll ask him also if it's possible to add the missing
namespace to the annotations that were posted in the meantime and
stored in the database.

Thank you all for this report.

-jose


On Thu, Jan 23, 2003 at 10:09:53PM -0000, Jim Ley wrote:
> 
> "Doug Daniels" <rainking@rice.edu> wrote in message
> news:Pine.LNX.4.33.0301231519310.19069-100000@bunker.ece.rice.edu...
> 
> > this sort of annotation 1) has no doctype and 2) has no namespace.  as
> > such, when annotest.w3.org serves this document up with mimetype
> > "application/xhtml+xml", poor mozilla becomes utterly confused.
> 
> annotest gets the mime-type of the resource from the submission, the problem
> is purely an Amaya problem of incorrectly submitting the mime-type as
> application/xhtml+xml (well and a problem of embedding documents within
> other documents in the xhtml world...)
> 
> > so, I suggest that we have our clients, especially amaya,  put a namespace
> > and/or doctype in the body html.
> 
> amaya should simply not claim that the previous document is
> application/xhtml+xml when it's not!



