docno="lists-097-7174970"
received="Wed Oct 15 07:16:33 2003"
isoreceived="20031015111633"
sent="Wed, 15 Oct 2003 12:14:56 +0100"
isosent="20031015111456"
name="Peter Crowther"
email="Peter.Crowther@melandra.com"
subject="Encoding for URLs in Algae queries?"
id="DDBBD1E00935D144AB9563D57EF98D62536E@raccoon.melandra.net"
charset="us-ascii"
expires="-1"


To:<www-annotation@w3.org>


[Please reply directly to me as well as to the list - despite having
subscribed over a month ago, I appear to have received no messages and
suspect a glitch in the subscription process]

I'm trying to write an Algae query to Annotea that copes with arbitrary
characters in URLs.  The query that triggered this had the form (before
final URL encoding and transmission):

--start--
http://annotest.w3.org/annotations?w3c_algaeQuery=
(ask '(
    (http://www.w3.org/1999/02/22-rdf-syntax-ns#type ?annot
http://www.w3.org/2000/10/annotation-ns#Annotation)
    (http://cohse.semanticweb.org/annotation#ontology ?annot
http://localhost:8080/os/ontologies/diving)
    (http://cohse.semanticweb.org/annotation#concept ?annot
http://cohse.semanticweb.org/ontologies/diving#Wet Suit)
    (http://cohse.semanticweb.org/annotation#ontology ?annot ?V3)
    (http://cohse.semanticweb.org/annotation#type ?annot ?V5)
    (http://cohse.semanticweb.org/annotation#concept ?annot ?V2)
    (http://cohse.semanticweb.org/annotation#location ?annot ?V1)
    (http://www.w3.org/2000/10/annotation-ns#annotates ?annot ?V0)
    (http://purl.org/dc/elements/1.1/title ?annot ?V4)
  )
 :collect '(?annot ?V3 ?V5 ?V2 ?V1 ?V0 ?V4))
--end--

... which fails with a 500 error, as it doesn't know what type of symbol
'Suit' is.

Quoted-printable encoding the URLs, to give (again, before the final
transmission):

--start--
http://annotest.w3.org/annotations?w3c_algaeQuery=(ask '(
    (http://www.w3.org/1999/02/22-rdf-syntax-ns#type ?annot
http%3A%2F%2Fwww.w3.org%2F2000%2F10%2Fannotation-ns%23Annotation)
    (http://cohse.semanticweb.org/annotation#ontology ?annot
http%3A%2F%2Foiled.man.ac.uk%2Fontologies%2Fdiving)
    (http://cohse.semanticweb.org/annotation#concept ?annot
http%3A%2F%2Fpotato.cs.man.ac.uk%2Fontologies%2Fdiving%23Wet%20Suit)
    (http://cohse.semanticweb.org/annotation#ontology ?annot ?V3)
    (http://cohse.semanticweb.org/annotation#type ?annot ?V5)
    (http://cohse.semanticweb.org/annotation#concept ?annot ?V2)
    (http://cohse.semanticweb.org/annotation#location ?annot ?V1)
    (http://www.w3.org/2000/10/annotation-ns#annotates ?annot ?V0)
    (http://purl.org/dc/elements/1.1/title ?annot ?V4)
  )
 :collect '(?annot ?V3 ?V5 ?V2 ?V1 ?V0 ?V4))
--end--

... fails as Annotea doesn't know what type of symbol 'http%3a...' is.

So: How do I use URLs with embedded spaces in Algae queries to Annotea?
The URLs concerned are from OWL ontologies over which I have no control,
so removing the spaces is not an option.

- Peter
--
Peter Crowther, Director, Melandra Limited



