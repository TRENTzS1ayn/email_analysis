docno="lists-098-16546651"
received="Thu Apr  3 17:17:30 2003"
isoreceived="20030403221730"
sent="03 Apr 2003 16:17:18 -0600"
isosent="20030403221718"
name="Dan Connolly"
email="connolly@w3.org"
subject="Re: cwm uripath.py bug"
id="1049408237.29191.22.camel@dirk.dm93.org"
inreplyto="Pine.LNX.4.30.0304031648400.25190-100000&#64;tux.w3.org"
expires="-1"

To: Ryan Lee<ryanlee@w3.org>
Cc: www-archive+n3bugs@w3.org, Tim Berners-Lee<timbl+n3bugs@w3.org>



nice work; I'm reviewing the work, but it's hard for
me to think about it wihout seeing the test case.

Did you add a unit test to be sure we don't break this in the
future? I don't see one.

 test-before-you-code
 http://www.w3.org/2000/10/swap/test/README
 -> http://www.extremeprogramming.org/rules/testfirst.html

On Thu, 2003-04-03 at 16:08, Ryan Lee wrote:
> http://dev.w3.org/cvsweb/2000/10/swap/uripath.py
> 
> A while loop at line 194 increments a string index past the end of the
> shortest string (contrary to the comments) in the case where refTo(base,
> uri) is comparing uneven length strings.  If uri is shorter, then code
> like uri[i] on line 217 will complain about the index being out of bounds
> (whereas code using splicing like line 208 will just ignore the problem).
> 
> Fixed by checking that i<len(uri) in line 217, which I think is correct:
> if base and uri match for the whole length of uri, then it will take some
> number of '../' to get to uri from base, with no other trailing
> characters (the else case).
> 
> Passes uripath.py tests, Python no longer barfs on what I run it on -
> checked in change.

-- 
Dan Connolly, W3C http://www.w3.org/People/Connolly/



