docno="lists-098-2474139"
received="Fri Apr 19 19:36:51 2002"
isoreceived="20020419233651"
sent="Fri, 19 Apr 2002 19:38:39 -0400"
isosent="20020419233839"
name="Tim Berners-Lee"
email="timbl@w3.org"
subject="Re: cwm bug: &#64;&#64;Length is 32 instead of 7"
id="033c01c1e7fb$5586a6e0$0301a8c0@w3.org"
charset="iso-8859-1"
inreplyto="1019241778.5164.403.camel&#64;dirk"
expires="-1"


To:"Dan Connolly"<connolly@w3.org>
Cc:<www-archive+n3bugs@w3.org>,"Dan Connolly"<connolly@w3.org>

Wacky.   
Something to do with the opening and closing of formulae
not being done right.
On close, a formula is filed under its length, (and in fact a different
one returned if it now matches an existing one -- interned).
Sound like the formula was closed once, filed under its original length,
and then should have been reopened which takes it
out of the canonical system, but somehow left in underthe wrong lenbgth,

I check for attempting to addd to a connicalized formula. hmmm
I'll look at it when I can. Sorry about the bug.

Tim

----- Original Message ----- 
From: "Dan Connolly" <connolly@w3.org>
To: "Tim Berners-Lee" <timbl@w3.org>
Cc: <www-archive+n3bugs@w3.org>; "Dan Connolly" <connolly@w3.org>
Sent: Friday, April 19, 2002 2:42 PM
Subject: cwm bug: @@Length is 32 instead of 7


> in w3ccvs/WWW/2002/03owlt
> 
> I can do:
> 
> $ python ~/w3ccvs/WWW/2000/10/swap/cwm.py  ontAx.n3 sameStateP.n3
> 
> just fine. but If I try to parse them
> in the other order, I get:
> 
> $ python ~/w3ccvs/WWW/2000/10/swap/cwm.py  sameStateP.n3
> ontAx.n3              
> #Processed by Id: cwm.py,v 1.92 2002/03/22 21:36:00 timbl Exp 
>         #    using base file:/home/connolly/w3ccvs/WWW/2002/03owlt/
>         Traceback (most recent call last):
>   File "/home/connolly/w3ccvs/WWW/2000/10/swap/cwm.py", line 608, in ?
>     doCommand()
>   File "/home/connolly/w3ccvs/WWW/2000/10/swap/cwm.py", line 463, in
> doCommand
>     p.load(_inputURI)
>   File "/home/connolly/w3ccvs/WWW/2000/10/swap/notation3.py", line 158,
> in load
>     self.endDoc()
>   File "/home/connolly/w3ccvs/WWW/2000/10/swap/notation3.py", line 253,
> in endDoc
>     self._sink.endDoc(self._formula)
>   File "../../2000/10/swap/llyn.py", line 1100, in endDoc
>     self.endFormulaNested(self.intern(rootFormulaPair))
>   File "../../2000/10/swap/llyn.py", line 964, in endFormulaNested
>     self.endFormulaNested( _lookup(bindings, x), bindings,
> level=level+1)
>   File "../../2000/10/swap/llyn.py", line 974, in endFormulaNested
>     new = self.endFormula(F)
>   File "../../2000/10/swap/llyn.py", line 907, in endFormula
>     if len(gl) != l: raise RuntimeError("@@Length is %i instead of %i"
> %(len(gl), l))
> RuntimeError: @@Length is 32 instead of 7
> 
> 
> -- 
> Dan Connolly, W3C http://www.w3.org/People/Connolly/
> 
> 



