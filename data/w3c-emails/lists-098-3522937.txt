docno="lists-098-3522937"
received="Thu Aug 15 19:05:31 2002"
isoreceived="20020815230531"
sent="Fri, 16 Aug 2002 00:05:16 +0100"
isosent="20020815230516"
name="Sean B. Palmer"
email="sean@mysterylights.com"
subject="Pre-processing Scanner-subclass Code"
id="007c01c244b0$3b128ec0$9a560150@localhost"
charset="utf-8"
expires="-1"


To:"Dan Connolly"<connolly@w3.org>
Cc:<www-archive@w3.org>


class Scanner(_Scanner):
    def __init__(self, patterns, ignore, input):
        _Scanner.__init__(self, patterns, ignore, input)
        self.preProcess()

    def preProcess(self):
        B_LIT = r'"""[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*"""'
        A_LIT = r'"[^"\\]*(?:\\.[^"\\]*)*"'
        Token = re.compile(r'(%s|%s|<[^>]*>|\.\s*}|[^\s#]+)' % (B_LIT,
A_LIT))
        self.input = ' '.join([re.sub(r'^\.\s*}$', '}', token)
                             for token in Token.findall(self.input)])

For yappsrt.py--class Scanner needs to be renamed _Scanner.

--
Kindest Regards,
Sean B. Palmer
@prefix : <http://purl.org/net/swn#> .
:Sean :homepage <http://purl.org/net/sbp/> .



