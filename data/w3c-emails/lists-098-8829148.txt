docno="lists-098-8829148"
received="Wed Jul 10 06:26:11 2002"
isoreceived="20020710102611"
sent="Wed, 10 Jul 2002 11:24:11 +0100"
isosent="20020710102411"
name="Jeremy Carroll"
email="jjc@hplb.hpl.hp.com"
subject="Using WinCVS to access w3ccvs"
id="JAEBJCLMIFLKLOJGMELDOEFACEAA.jjc@hplb.hpl.hp.com"
charset="US-ASCII"
inreplyto="Pine.LNX.4.30.0207011035230.6604-100000&#64;tux.w3.org"
expires="-1"

To:<simon@w3.org>,<gerald@w3.org>
Cc:<sysreq@w3.org>,<connolly@w3.org>,<www-archive@w3.org>,<Mark_Butler@hplb.hpl.hp.com>




Since the setup I now have working to access the w3ccvs server is not
documented, I thought I should document it and give you the opportunity to link
to this message from http://www.w3.org/Project/CVSdoc/

Many thanks to Mark Butler who worked out most of this.

Object: use WinCVS from a Windows machine behind a firewall to access the W3C
CVS server.

Variation: use of putty and hummingbird rather than cygwin

These notes are for a windows 2000 pro machine. Some variation maybe expected
for other windows.

Software to install.
+ WinCVS
http://www.wincvs.org/

+ putty
http://www.chiark.greenend.org.uk/~sgtatham/putty/

+ hummingbird (only if behind firewall)
http://www.hummingbird.com/products/nc/socks/


Config instructions
===================

1. Hummingbird
--------------

Needed if behind firewall. If not behind firewall skip this step.

Once you have installed the proxy client you'll need to configure it as well. To
configure it you need to open the file
c:\winnt\system32\hummingbird\connectivity\7.10\Socks\socks.cfg in a text editor
and add lines like the following:

# socksify every program
BIND-MODULE *
# do not socksify address which
#    when ANDed with 255.0.0.0
#    give             15.0.0.0
# (note this is only good if you
# work for HP)
DIRECT 15.0.0.0 255.0.0.0
# socksify all other addresses,
# using the named socks server
SOCKD5 @=socks.hpl.hp.com 0.0.0.0 0.0.0.0


Note when you have done this, your machine will send all
outbound traffic (i.e. that doesn't match the DIRECT line) via the socks server.
If you want to use the machine when it is not behind the firewall, you need to
comment out the lines above.


2. Putty
--------
You need at least:

putty.exe
plink.exe
puttygen.exe
pageant.exe

Update your path environment variable via
start->settings->control panel->system->advanced->environment variables
so it includes the directory where you downloaded these files.

3. Generate a public / private key pair.
----------------------------------------

Start puttygen.exe. Press generate to generate the public /
private key pair, and follow the instructions on moving the
mouse in order to generate randomness. Once the key is generated,
type in a pass phrase making sure that you will be able to
remember this pass phrase later. Save the private key to
a local directory.
Copy the public key from the puttygen window to a new text
file in the directory. Ensure that the two files have names that
allow you to remember them as the private key and public
key pair.
The public key will be send by e-mail as part of your W3C
cvs access request.
(This process can now be done, you will need your w3c cvs login
name at step 5. This will be returned to you in the reply to your
cvs access request).

4. Set up pageant

Next you need to start pageant.exe. Load in the key you generated
before and type in the pass phrase when prompted. Note you will
need to start pageant for every cvs session, so you may want to
put it in your startup folder. However you will still have to
load the key and type in the pass phrase when prompted each time.

5. Set up putty.

Start putty.exe. Specify hostname connection i.e.
"cvs.w3.org". Then select the SSH protocol by clicking the
appropriate radio button.
Enter the name "cvs.w3.org" (again) in the saved sessions
text box and press the save button.

6. Testing connectivity

At this point you should be able to do a handshake with the cvs
server at w3c.
This is useful for debugging.

a: get a command prompt
b: try plink.exe -v cvs.w3.org
It should go something like (not the user input of
user name).

C:\>plink -v cvs.w3.org
Server version: SSH-1.5-OpenSSH_3.4p1
We claim version: SSH-1.5-PuTTY
Using SSH protocol version 1
Received public keys
Host key fingerprint is:
      1024 06:ae:2a:63:45:30:41:81:ac:0a:5e:8f:0f:f2:d1:44
Encrypted session key
Using 3DES encryption
Trying to enable encryption...
Successfully started encryption
login as: <!!user input>jcarroll
Sent username "jcarroll"
Pageant is running. Requesting keys.
Pageant has 1 keys
Trying Pageant key #0
Remote: Pty allocation disabled.
Remote: Port forwarding disabled.
Remote: X11 forwarding disabled.
Remote: Agent forwarding disabled.
Received RSA challenge
Sending Pageant's response
Remote: RSA authentication accepted.
Pageant's response accepted
Authenticated using RSA key "rsa-key-20020424" from agent
Authentication successful
Server refused to allocate pty
Allocated pty
Started session
^C
C:\>

7: now try wincvs ...

a: Start WinCVS and configure it.

Under Admin->Preferences

General Tab
  CVS root
   :ext:jcarroll@cvs.w3.org:/w3ccvs
  Authentication
    SSH server

Ports tab
  Check for an alternate rsh name (tick)
                      plink.exe


b: Now check out

Create->CheckOut Module

  Use module name consisting of:
   WWW/ followed by the part of the w3ccvs that you are editing.

e.g.
URI
http://www.w3.org/2002/03owlt/

==>
Module name
WWW/2002/03owlt/

Also fill in local directory to check out to.


This should work, and then use WinCVS like with a local CVS repository!






I hope this is useful.

Jeremy



