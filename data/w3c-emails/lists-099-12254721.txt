docno="lists-099-12254721"
received="Sat Jan 17 18:48:39 2004"
isoreceived="20040117234839"
sent="Sun, 18 Jan 2004 00:48:33 +0100"
isosent="20040117234833"
name="Bjoern Hoehrmann"
email="derhoermi@gmx.net"
subject="Re: OpenSP 1.5.1 Win32/MSVC++ patch / binaries"
id="4023c62d.85380150@smtp.bjoern.hoehrmann.de"
charset="us-ascii"
inreplyto="40126f55.63149053&#64;smtp.bjoern.hoehrmann.de"
expires="-1"

To:openjade-devel@lists.sourceforge.net
Cc:www-archive@w3.org


* Bjoern Hoehrmann wrote:
>Note that my patch would add an unconditional
>
>  #undef SP_MULTI_BYTE
>
>to config.h.old.in. onsgmls and osx won't compile on any platform with
>-DSP_MULTI_BYTE as they assume various SP-specific types resolve to char
>while they resolve to wchar_t with SP_MULTI_BYTE. Since SP_MULTI_BYTE is
>the default on Win32 and the various Visual Studio Project files define
>SP_MULTI_BYTE, undefining SP_MULTI_BYTE in config.h is the most simple
>solution to this problem.

It turned out that onsgmls and osx wont compile only if SP_MULTI_BYTE
causes SP_WIDE_SYSTEM to be defined which is a well hidden default on
Win32. The attached patch replaces my previous patch and turns off -D
SP_WIDE_SYSTEM on Win32. I've also updated my binaries accordingly.
Please consider fixing onsgmls/osx or the library part to re-allow -D
SP_WIDE_SYSTEM builds.

regards.




text/plain attachment: sp-win32.patch_




