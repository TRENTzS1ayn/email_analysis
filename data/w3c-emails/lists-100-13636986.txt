docno="lists-100-13636986"
received="Sun Aug 19 17:21:33 2001"
isoreceived="20010819212133"
sent="Sun, 19 Aug 2001 16:21:12 -0500"
isosent="20010819212112"
name="Curt Arnold"
email="carnold@houston.rr.com"
subject="NIST tests passing DTD validation"
id="00b401c128f4$dfa924e0$a800a8c0@CurtMicron"
charset="iso-8859-1"
expires="-1"


To:<www-dom-ts@w3.org>

I've just committed changes to the NIST tests that allow them to pass DTD validation.  The changes were extensive, however most were only typographical fixes, such as changing DOMString to String and actual for actuel.  The other most common fix was adding variables for methods that had a return value but did not have a var attribute.

There were a few changes that were significant.

Changes to DTD and Schema

a) added boolean as a variable type to DTD and schema
b) removed enumerated values for hasFeature, hasFeature now takes arbitrary string literals.
c) assertTrue and assertFalse in DTD inadvertantly required a conditional child element (the schema had it correct as an optional element).

Changes to Tests

I moved two tests to level2/core since the depended on behaviors defined in the Level 2 spec and thus could not be validated against the DOM 1 DTD and a two others since they called hasFeature with version="2.0"

attrsetvaluenomodificationallowederr.xml attempted to raise a DOMException with code=NO_MODIFICATION_ERR on when attempting to set Node.value.  This was not defined in the Level 1 spec but was added to the Level 2 spec.

elementsetattributensurlnull.xml calls Element.setAttributeNS which was added in Level 2.

domimplementationfeaturexmlversion2.xml expected true from hasFeature("XML","2.0");

domimplementationfeaturecore.xml called hasFeature("core","2.0").  Feature "Core" was not defined in the DOM 1 spec.

------------------

notationgetsystemid.xml used string manipulation functions not defined in the DTD or schema to attempt to compensate for the DOM implementation returning an absolute URI for Notation.systemId.  Since I do not believe that is an appropriate behavior, I've commented out the fragment that tried to crack the URI.

-------------------

documenttypegetentities.xml attempts to implement a sort, again using elements not in the DTD, to implement a order independent comparision.  Since I had already provided that by assertEquals if you passed in Collections (which are unordered) instead of Lists (which are ordered), I gutted the sorting code.



