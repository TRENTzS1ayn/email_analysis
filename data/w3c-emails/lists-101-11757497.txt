docno="lists-101-11757497"
received="Tue Nov 26 16:29:31 2002"
isoreceived="20021126212931"
sent="Tue, 26 Nov 2002 22:29:23 +0100"
isosent="20021126212923"
name="David Faure"
email="david@mandrakesoft.com"
subject="Re: DOM Level 2 HTML Tests results"
id="200211262229.23423.david@mandrakesoft.com"
charset="iso-8859-1"
inreplyto="1038339944.25095.450.camel&#64;jfouffa"
expires="-1"

To: Philippe Le Hegaret<plh@w3.org>
Cc:www-dom-ts@w3.org



-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Tuesday 26 November 2002 20:45, Philippe Le Hegaret wrote:
> On Mon, 2002-11-25 at 18:23, Philippe Le Hegaret wrote:
> > 
> > Using ant 1.4, xalan 2.1, and Curt's jsunit.zip [1], I tried the CVS
> > version of the DOM Level 2 HTMl Test Suite on Mozilla and Internet
> > Explorer. Results are at [2]. Opera 7 reports ~100 errors/failures but
> > didn't produce the error messages. I'm trying to have it produce them.
> 
> Got results from Konqueror 3.0.98:
> http://www.w3.org/2002/11/DOM-Level-2-HTML-Results/Konqueror-3.0.98-KDE-3.1.RC2.html

Ah, great.
I have a patch ready for the recent datatype changes, but it would break binary
compatibility of the C++ DOM interface, so this fix can't be applied until KDE-4.0.

Most of the failing table tests are due to the section reordering issue. I sent
a mail to this list about it, but it remained unanswered. The subject line was
"Order of table sections". I would be glad if this could trigger some discussion :)
I feel that relying on the browser's internal ordering of the table sections 
in the DOM tree is wrong.

I also mailed a fix for HTMLTableElement31, which hasn't been applied.
Re-posting below.

=====================

HTMLTableElement31 says it will create a new table and append it to the
document. However it instead creates a table and tries to insert it into
another (empty) table. This is apparently forbidden, per the DOM/HTML
spec.

This isn't what the test says it will do, so I think it's a bug in the
test. What about this fix for it?

Index: HTMLTableElement31.xml
===================================================================
RCS file: /sources/public/2001/DOM-Test-Suite/tests/level2/html/HTMLTableElement31.xml,v
retrieving revision 1.4
diff -u -p -r1.4 HTMLTableElement31.xml
- --- HTMLTableElement31.xml      2002/08/22 04:53:15     1.4
+++ HTMLTableElement31.xml      2002/09/25 22:53:01
@@ -59,7 +59,7 @@ See W3C License http://www.w3.org/Consor
 <childNodes obj="testNode" var="tableList"/>
 -->
 <createElement obj="doc" var="table" tagName='"table"'/>
- -<appendChild obj="testNode" newChild="table" var="tableNode"/>
+<appendChild obj="testNode.parentNode" newChild="table" var="tableNode"/>
 <getElementsByTagName interface="Document" obj="doc" var="nodeList" tagname='"table"'/>
 <assertSize collection="nodeList" size="2" id="tableSize2"/>
 <tBodies interface="HTMLTableElement" obj="tableNode" var="tbodiesnodeList"/>

This adds the new table as a (last) sibling to the existing empty table,
i.e. to a node where we know tables are allowed - and it makes the test
work for me.

- -- 
David FAURE, david@mandrakesoft.com, faure@kde.org
http://people.mandrakesoft.com/~david/
Contributing to: http://www.konqueror.org/, http://www.koffice.org/
Get the latest KOffice - http://download.kde.org/stable/koffice-1.2/
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.7 (GNU/Linux)

iD8DBQE94+ez72KcVAmwbhARAln5AJ4wm7EczAYfQOacbJaaVOrPRYB3/wCgp89t
2H0jAi6AuhFlEJsBY62i3QE=
=R75F
-----END PGP SIGNATURE-----



