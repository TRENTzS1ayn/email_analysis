docno="lists-101-8814779"
received="Mon Jul  1 01:19:07 2002"
isoreceived="20020701051907"
sent="Mon, 01 Jul 2002 00:18:48 -0500"
isosent="20020701051848"
name="Curt Arnold"
email="carnold@houston.rr.com"
subject="DOM L1 HTML"
id="3D1FE638.7080308@houston.rr.com"
charset="us-ascii"
expires="-1"


To:www-dom-ts@w3.org


I spent a large part of the weekend working on the L1 HTML DOM tests.  I 
think the current state is very close to eliminating all invalid tests. 
 I've modified my JSUnit (http://home.houston.rr.com/curta/jsunit.zip) 
so that it works with both Mozilla 1.0 and IE 6.  IE apparently has 
problems with exceptions thrown in a member function being caught in 
code located in a different directory (you can see this by commenting 
out attemptTest in DOMTestCase.js, Mozilla will let the exception be 
caught in attemptTest in jsUnitTestCase, IE won't).

First, the files collection contained a large number of invalid HTML and 
XML documents.  Most common was to mark a transitional document as 
strict.  I believe the files can be copied over directly to HTML L2.

There were several documents that contained attributes that were 
intended to set values in the corresponding object.  For example, 
link.html had a DISABLED attribute on a LINK element attempting to cause 
the disabled attribute on the corresponding object.  However, DISABLED 
was not defined as an attribute in HTML 4.01.  HTMLObject.code is 
similarly unsettable.

About a third of the HTMLSelect tests had been failing with size 
assertions.  What was happening on these tests was that both IE and NN 
were adding implied TBODY elements, probably to try to simplify the 
implementation of HTMLTable.tbodies attribute..  The tests did not 
account for this "modification" of the document on load.  I modified the 
test document to make the TBODY explicit, so they would not be affected 
by differences in implementation in case another implementation decided 
to take another approach.

There was a test (HTMLSelect03) that attempted to check 
HTMLSelect.selectedIndex == -1, however there is not anyway to construct 
a document where it is guaranteed that nothing is selected.  See 
http://www.w3.org/TR/html401/interact/forms.html#h-17.6.1

Mozilla 1.0 HTML failures:

*HTMLAppletElement01.html-11.html
*

**

All HTMLApplet related tests fail for Mozilla

*11. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLDocument08.html:HTMLDocument08 
failed*

"length"
Expected 4 (number) but was 2 (number)

*CA: HTMLDocument.applets is supposed to contain both APPLET and OBJECT 
elements.  Mozilla omits OBJECT
*

*12. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLImageElement04.html:HTMLImageElement04 
failed
13. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLImageElement05.html:HTMLImageElement05 
failed
14. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLImageElement06.html:HTMLImageElement06 
failed**
15. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLImageElement11.html:HTMLImageElement11 
failed**
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLImageElement12.html:HTMLImageElement12 
failed
*

*CA: Type definitions changed in DOM L2
*

*17. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLIsIndexElement01.html:HTMLIsIndexElement01 
failed*

"formNotNull"
Expected not to be null


*18. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLTableElement31.html:HTMLTableElement31 
failed*

"Asize2"
Expected 1 (number) but was 0 (number)

CA:

----------------------------

Microsoft IE (Omitting tests failing on string to number mismatches)

4. file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLButtonElement08.html:HTMLButtonElement08 failed


"valueLink"
Expected Reset Disabled Button (string) but was Reset (string)

CA: returned content of element, not value attribute

5. file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLDocument04.html:HTMLDocument04 failed


"URLLink"
Expected document (string) but was D:\foo\2001\DOM-Test-Suite\build\level1\html\ecmascript\tests\document (string)

CA: IE returned UNC, not URL

10. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLInputElement06.html:HTMLInputElement06 
failed


"alignLink"
Expected bottom (string) but was  (string)

12. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLIsIndexElement01.html:HTMLIsIndexElement01 
failed


"Asize"
Expected 2 (number) but was 1 (number)

13. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLIsIndexElement02.html:HTMLIsIndexElement02 
failed


"notnull"
Expected not to be null

14. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLIsIndexElement03.html:HTMLIsIndexElement03 
failed


"Asize"
Expected 2 (number) but was 1 (number)

18. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLTableCellElement11.html:HTMLTableCellElement11 
failed


"chLink"
Expected : (string) but was  (string)

19. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLTableCellElement12.html:HTMLTableCellElement12 
failed


"chLink"
Expected : (string) but was  (string)

20. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLTableCellElement13.html:HTMLTableCellElement13 
failed


"chOffLink"
Expected 1 (string) but was  (string)

21. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLTableCellElement14.html:HTMLTableCellElement14 
failed


"chOffLink"
Expected 1 (string) but was  (string)

22. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLTableColElement03.html:HTMLTableColElement03 
failed


"chLink"
Expected * (string) but was  (string)

23. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLTableColElement04.html:HTMLTableColElement04 
failed


"chLink"
Expected $ (string) but was  (string)

24. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLTableColElement05.html:HTMLTableColElement05 
failed


"chLink"
Expected 20 (string) but was  (string)

25. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLTableColElement06.html:HTMLTableColElement06 
failed


"chLink"
Expected 15 (string) but was  (string)

26. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLTableRowElement08.html:HTMLTableRowElement08 
failed


"chLink"
Expected * (string) but was  (string)

27. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLTableRowElement09.html:HTMLTableRowElement09 
failed


"charOffLink"
Expected 1 (string) but was  (string)

28. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLTableSectionElement04.html:HTMLTableSectionElement04 
failed


"chLink"
Expected * (string) but was  (string)

29. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLTableSectionElement05.html:HTMLTableSectionElement05 
failed


"chLink"
Expected + (string) but was  (string)

30. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLTableSectionElement06.html:HTMLTableSectionElement06 
failed


"chLink"
Expected $ (string) but was  (string)

31. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLTableSectionElement07.html:HTMLTableSectionElement07 
failed


"chOffLink"
Expected 1 (string) but was  (string)


32. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLTableSectionElement08.html:HTMLTableSectionElement08 
failed


"chOffLink"
Expected 2 (string) but was  (string)

33. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLTableSectionElement09.html:HTMLTableSectionElement09 
failed


"chOffLink"
Expected 3 (string) but was  (string)

34. 
file:///D:/foo/2001/DOM-Test-Suite/build/level1/html/ecmascript/tests/HTMLTableSectionElement21.html:HTMLTableSectionElement21 
had an error


Error message is:
"Invalid argument."



