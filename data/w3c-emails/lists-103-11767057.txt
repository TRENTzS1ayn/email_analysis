docno="lists-103-11767057"
received="Thu Apr 26 10:59:49 2001"
isoreceived="20010426145949"
sent="Thu, 26 Apr 2001 15:59:41 +0100"
isosent="20010426145941"
name="K. Ari Krupnikov"
email="ari@cogsci.ed.ac.uk"
subject="EntityReference nodes and tree positon"
id="3AE837DD.D2E0CB1@cogsci.ed.ac.uk"
charset="us-ascii"
expires="-1"


To:www-dom@w3.org
CC:dbdom-devel@lists.sourceforge.net

A DOM tree may include entity reference nodes in the tree, if such
references were reported by the parser. All children of the relevant
entity are copied as children of the entity reference node. So
someEntityRef.getLastChild().getNextSibling() will always be null. Am I
correct so far?

Now consider the following fragment:

<!ENTITY c "<c/>">
...
<a>
  <b/>
  &c;
  <d/>
</a>

As far as XPath, or the Infoset are concerned, the next sibling of the
element c, which is the last child of entity c, is the element d
(whitespace ignored).

Is there an obvious solution to this difference, or is it the XPath
implementation's responsibility to translate getNextSibling() to
getParentNode().getNextSibling() in the case of nodes that are children
of entity references?

Ari.



