docno="lists-104-2168377"
received="Fri Aug 31 14:14:13 2001"
isoreceived="20010831181413"
sent="Fri, 31 Aug 2001 12:08:58 -0600"
isosent="20010831180858"
name="Arnold, Curt"
email="Curt.Arnold@hyprotech.com"
subject="Additional comment on DOM L3 XPath"
id="70E215722F6AD511820A000103D141D40AA530@thor.aeathtl.com"
expires="-1"


To:"'www-dom@w3.org'"<www-dom@w3.org>

XPathExpression should have a reference to the XPathEvaluator that created it.

-------

There needs to be an error code to represent a mismatch between the Xpath expression and context node.  Though it would be possible to write an XPath evaluator that would work on any DOM
implementation, it should be allowed for an XPathEvaluator implementation to only work with a compatible DOM implementation.  Something like:

XPathExpression xpathdoc1 = ((XPathEvaluator) doc1).createExpression(...);
XPathSetIterator resultSet = xpathdoc1.evaluate(doc2);

Should be allowed (but not compelled) to throw an exception.

------

XPathEvaluator.createExpression, createResult, evaluate, evaluateExpression

These names are too generic for methods that may be supported by the Document, since, as described at http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-45A944CB, certain bindings would have
difficulty if multiple interfaces supported by one object (in this case Document) had identically named methods.

-------

createNSResolver:

Adapts ANY node...

Is accepting ANY node a little too permissive.  It wouldn't seem to make sense for DocumentType, Entity or Notation nodes.

--------

XPathException code:

Following that thought, shouldn't there be a code for attempting to apply an XPath expression to an inappropriate context, like a DocumentType, Entity or Notation.

-------

Section 1.2.1:

Some discussion should be added on using fragmented text nodes as context nodes in Xpath evaluation.  I would assume that using any of the actual nodes in a logical text node should be equivalent.


-------

EntityReference nodes as context nodes

If an EntityReference only has one child (or its children are one logical text node), then it an evaluation on the entity reference could be equivalent to an evaluation on its child (or any of the
nodes in the logical text node).

However, if an entity reference contains multiple elements, then the evaluation doesn't correspond to any defined behavior in Xpath.



