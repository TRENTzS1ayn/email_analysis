docno="lists-104-4317253"
received="Mon Dec 17 14:47:00 2001"
isoreceived="20011217194700"
sent="Mon, 17 Dec 2001 14:39:50 -0400"
isosent="20011217183950"
name="Elliotte Rusty Harold"
email="elharo@metalab.unc.edu"
subject="Re: Entity references in Attr values"
id="p04330105b843eaa1a699@[192.168.254.4]"
charset="us-ascii"
inreplyto="OF22C7FE3B.7AF4E3D6-ON85256B25.0066E77B&#64;pok.ibm.com"
expires="-1"


To:"Joseph Kesselman"<keshlam@us.ibm.com>
Cc:www-dom@w3.org,www-xml-infoset-comments@w3.org

At 1:47 PM -0500 12/17/01, Joseph Kesselman wrote:

>Offhand, I think your choices are to either kick the user with an error
>message, or drop in an EntityReference node with null content (which
>therefore would not affect the attribute's string value), or (if you're
>flattening entity references) just drop the EntityReference (least useful),
>or some combination of the above. But I'd suggest you recheck the XML
>and/or Infoset RECs first to find out whether my memory of how unresolved
>entity refs may be handled is accurate.
>

I can't find anything in the XML 1.0 spec that's clearly on point 
here. I hadn't thought to look in the Infoset, but now that you 
suggested it I notice that the infoset does not define an attribute 
value. It does define a normalized attribute value by reference back 
to the XML 1.0 spec as follows:

[normalized value] The normalized attribute value (see 3.3.3 
Attribute-Value Normalization [XML]).

However, the algorithm for calculating the normalized attribute value 
in 3.3.3 fails in the event that external entity references are not 
available. Thus this appears to be a logical flaw in the infoset as 
well as the DOM.
-- 

+-----------------------+------------------------+-------------------+
| Elliotte Rusty Harold | elharo@metalab.unc.edu | Writer/Programmer |
+-----------------------+------------------------+-------------------+
|          The XML Bible, 2nd Edition (Hungry Minds, 2001)           |
|              http://www.ibiblio.org/xml/books/bible2/              |
|   http://www.amazon.com/exec/obidos/ISBN=0764547607/cafeaulaitA/   |
+----------------------------------+---------------------------------+
|  Read Cafe au Lait for Java news:  http://www.cafeaulait.org/      |
|  Read Cafe con Leche for XML news: http://www.ibiblio.org/xml/     |
+----------------------------------+---------------------------------+



