docno="lists-105-1861158"
received="Tue Jan  6 01:46:47 2004"
isoreceived="20040106064647"
sent="Tue, 06 Jan 2004 00:45:41 -0600"
isosent="20040106064541"
name="Curt Arnold"
email="carnold@houston.rr.com"
subject="Re: node.insertBefore(child, child)"
id="3FFA5995.5090203@houston.rr.com"
charset="ISO-8859-1"
inreplyto="Pine.LNX.4.58.0401051934060.13203&#64;dhalsim.dreamhost.com"
expires="-1"


Cc: Ian Hickson<ian@hixie.ch>,www-dom@w3.org


I surveyed multiple implementations on this issue in preparation for 
last week's WG conference call. 

I believe Crimson came closest to your definition of "following the 
spec", that is removing the reference node and then throws a 
NOT_FOUND_ERR.  This behavior is undesirable since it is not atomic (it 
both mutates the tree and throws an exception) and makes a call to 
insertBefore(child,child) act like a call to removeChild(child).

Multiple vendors decided that the "following the spec" behavior was not 
good thing and took their own approach, either performing a no-op 
(observed behavior of browser), removing and reinserting the node to 
trigger mutation events (Xerces-J) or throwing a HIERARCHY_REQUEST_ERR 
(Oracle).

Since all of these behaviors are reasonable and widely deployed and the 
"following the spec behavior" is undesirable, the best that we can do at 
this time is warn people not to make that type of call.



